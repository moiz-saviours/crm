var Hh=Object.defineProperty;var Vh=(e,t,n)=>t in e?Hh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zh=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var q=(e,t,n)=>Vh(e,typeof t!="symbol"?t+"":t,n);import{c as Le,b as _c}from"./bootstrap-BA2Cz7cT.js";var ey=zh((qt,kt)=>{var Ko="&#8203;";function Vs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(e){return function(t){if(Array.isArray(t))return Vs(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Vs(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vs(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ke={isEnabled:function(){var e;return(e=window.TAGIFY_DEBUG)===null||e===void 0||e},log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;this.isEnabled()&&(r=console).log.apply(r,["[Tagify]:"].concat(Wo(t)))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;this.isEnabled()&&(r=console).warn.apply(r,["[Tagify]:"].concat(Wo(t)))}},br=function(e,t,n,r){return e=""+e,t=""+t,r&&(e=e.trim(),t=t.trim()),n?e==t:e.toLowerCase()==t.toLowerCase()},Go=function(e,t){return e&&Array.isArray(e)&&e.map(function(n){return ma(n,t)})};function ma(e,t){var n,r={};for(n in e)t.indexOf(n)<0&&(r[n]=e[n]);return r}function zs(e){return new DOMParser().parseFromString(e.trim(),"text/html").body.firstElementChild}function Zo(e,t){for(t=t||"previous";e=e[t+"Sibling"];)if(e.nodeType==3)return e}function Xe(e){return typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):e}function Zt(e){var t=Object.prototype.toString.call(e).split(" ")[1].slice(0,-1);return e===Object(e)&&t!="Array"&&t!="Function"&&t!="RegExp"&&t!="HTMLUnknownElement"}function yt(e,t,n){var r,i;function s(a,o){for(var c in o)if(o.hasOwnProperty(c)){if(Zt(o[c])){Zt(a[c])?s(a[c],o[c]):a[c]=Object.assign({},o[c]);continue}if(Array.isArray(o[c])){a[c]=Object.assign([],o[c]);continue}a[c]=o[c]}}return r=e,((i=Object)!=null&&typeof Symbol<"u"&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)||(e={}),s(e,t),n&&s(e,n),e}function Xo(){var e=[],t={},n=!0,r=!1,i=void 0;try{for(var s,a=arguments[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,c=!0,u=!1,f=void 0;try{for(var g,d=o[Symbol.iterator]();!(c=(g=d.next()).done);c=!0){var p=g.value;Zt(p)?t[p.value]||(e.push(p),t[p.value]=1):e.includes(p)||e.push(p)}}catch(m){u=!0,f=m}finally{try{c||d.return==null||d.return()}finally{if(u)throw f}}}}catch(m){r=!0,i=m}finally{try{n||a.return==null||a.return()}finally{if(r)throw i}}return e}function ui(e){return String.prototype.normalize?typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:e}var Yo=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function Jo(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}function Je(e){var t,n=Tc.call(this,e),r=e==null||(t=e.classList)===null||t===void 0?void 0:t.contains(this.settings.classNames.tag);return n&&r}function Qo(e){return Tc.call(this,e)&&(e==null?void 0:e.closest(this.settings.classNames.tagSelector))}function Tc(e){var t;return(e==null||(t=e.closest)===null||t===void 0?void 0:t.call(e,this.settings.classNames.namespaceSelector))===this.DOM.scope}function xc(e,t){var n=window.getSelection();return t=t||n.getRangeAt(0),typeof e=="string"&&(e=document.createTextNode(e)),t&&(t.deleteContents(),t.insertNode(e)),e}function ut(e,t,n){return e?(t&&(e.__tagifyTagData=n?t:yt({},e.__tagifyTagData||{},t)),e.__tagifyTagData):(ke.warn("tag element doesn't exist",{tagElm:e,data:t}),t)}function Ie(e){if(e&&e.parentNode){var t=e,n=window.getSelection(),r=n.getRangeAt(0);n.rangeCount&&(r.setStartAfter(t),r.collapse(!0),n.removeAllRanges(),n.addRange(r))}}function Ec(e,t){e.forEach(function(n){if(ut(n.previousSibling)||!n.previousSibling){var r=document.createTextNode("​");n.before(r),t&&Ie(r)}})}var Ks={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,focusInputOnRemove:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:" "},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function Kh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Kh(e,i,n[i])})}return e}function Gh(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i.push.apply(i,s)}return i}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ws(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xh(e){return function(t){if(Array.isArray(t))return Ws(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Ws(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ws(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(){for(var e in this.dropdown={},this._dropdown)this.dropdown[e]=typeof this._dropdown[e]=="function"?this._dropdown[e].bind(this):this._dropdown[e];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var hi,On,Jh=(hi=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Zh(e,i,n[i])})}return e}({},{events:{binding:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:t.onKeyDown.bind(this),onMouseOver:t.onMouseOver.bind(this),onMouseLeave:t.onMouseLeave.bind(this),onClick:t.onClick.bind(this),onScroll:t.onScroll.bind(this)},r=e?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[r]("scroll",n.position,!0),window[r]("resize",n.position),window[r]("keydown",n.onKeyDown)),this.DOM.dropdown[r]("mouseover",n.onMouseOver),this.DOM.dropdown[r]("mouseleave",n.onMouseLeave),this.DOM.dropdown[r]("mousedown",n.onClick),this.DOM.dropdown.content[r]("scroll",n.onScroll)},callbacks:{onKeyDown:function(e){var t=this;if(this.state.hasFocus&&!this.state.composing){var n=this.settings,r=n.dropdown.includeSelectedTags,i=this.DOM.dropdown.querySelector(n.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(i),a=n.mode=="mix",o=n.mode=="select";n.hooks.beforeKeyDown(e,{tagify:this}).then(function(c){switch(e.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":e.preventDefault();var u=t.dropdown.getAllSuggestionsRefs(),f=e.key=="ArrowUp"||e.key=="Up";i&&(i=t.dropdown.getNextOrPrevOption(i,!f)),i&&i.matches(n.classNames.dropdownItemSelector)||(i=u[f?u.length-1:0]),t.dropdown.highlightOption(i,!0);break;case"PageUp":case"PageDown":var g;e.preventDefault();var d=t.dropdown.getAllSuggestionsRefs(),p=Math.floor(t.DOM.dropdown.content.clientHeight/((g=d[0])===null||g===void 0?void 0:g.offsetHeight))||1,m=e.key==="PageUp";if(i){var _=d.indexOf(i),y=m?Math.max(0,_-p):Math.min(d.length-1,_+p);i=d[y]}else i=d[0];t.dropdown.highlightOption(i,!0);break;case"Home":case"End":e.preventDefault();var T=t.dropdown.getAllSuggestionsRefs();i=T[e.key==="Home"?0:T.length-1],t.dropdown.highlightOption(i,!0);break;case"Escape":case"Esc":t.dropdown.hide();break;case"ArrowRight":if(t.state.actions.ArrowLeft||n.autoComplete.rightKey)return;case"Tab":var A=!n.autoComplete.rightKey||!n.autoComplete.tabKey;if(!a&&!o&&i&&A&&!t.state.editing&&s){e.preventDefault();var S=t.dropdown.getMappedValue(s);return t.state.autoCompleteData=s,t.input.autocomplete.set.call(t,S),!1}return!0;case"Enter":e.preventDefault(),t.state.actions.selectOption=!0,setTimeout(function(){return t.state.actions.selectOption=!1},100),n.hooks.suggestionClick(e,{tagify:t,tagData:s,suggestionElm:i}).then(function(){if(i){var M=r?i:t.dropdown.getNextOrPrevOption(i,!f);t.dropdown.selectOption(i,e,function(){if(M){var z=M.getAttribute("value");M=t.dropdown.getSuggestionNodeByValue(z),t.dropdown.highlightOption(M)}})}else t.dropdown.hide(),a||t.addTags(t.state.inputText.trim(),!0)}).catch(function(M){return ke.warn(M)});break;case"Backspace":if(a||t.state.editing.scope)return;var D=t.input.raw.call(t);D!=""&&D.charCodeAt(0)!=8203||(n.backspace===!0?t.removeTags():n.backspace=="edit"&&setTimeout(t.editTag.bind(t),0))}})}},onMouseOver:function(e){var t=e.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(t)},onMouseLeave:function(e){this.dropdown.highlightOption()},onClick:function(e){var t=this;if(e.button==0&&e.target!=this.DOM.dropdown&&e.target!=this.DOM.dropdown.content){var n=e.target.closest(this.settings.classNames.dropdownItemSelector),r=this.dropdown.getSuggestionDataByNode(n);this.state.actions.selectOption=!0,setTimeout(function(){return t.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(e,{tagify:this,tagData:r,suggestionElm:n}).then(function(){n?t.dropdown.selectOption(n,e):t.dropdown.hide()}).catch(function(i){return ke.warn(i)})}},onScroll:function(e){var t=e.target,n=t.scrollTop/(t.scrollHeight-t.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(n)})}}},refilter:function(e){e=e||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(e),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(e){for(var t,n=e&&e.getAttribute("value"),r=this.suggestedListItems.length;r--;){if(Zt(t=this.suggestedListItems[r])&&t.value==n)return t;if(t==n)return{value:t}}},getSuggestionNodeByValue:function(e){return this.dropdown.getAllSuggestionsRefs().find(function(t){return t.getAttribute("value")===e})},getNextOrPrevOption:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.dropdown.getAllSuggestionsRefs(),r=n.findIndex(function(i){return i===e});return t?n[r+1]:n[r-1]},highlightOption:function(e,t){var n,r=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(r),this.state.ddItemElm.removeAttribute("aria-selected")),!e)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.dropdown.getSuggestionDataByNode(e),this.state.ddItemData=n,this.state.ddItemElm=e,e.classList.add(r),e.setAttribute("aria-selected",!0),t&&(e.parentNode.scrollTop=e.clientHeight+e.offsetTop-e.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption:function(e,t,n){var r=this,i=this.settings,s=i.dropdown.includeSelectedTags,a=i.dropdown,o=a.clearOnSelect,c=a.closeOnSelect;if(!e)return this.addTags(this.state.inputText,!0),void(c&&this.dropdown.hide());t=t||{};var u=e.getAttribute("value"),f=u=="noMatch",g=i.mode=="mix",d=this.suggestedListItems.find(function(m){var _;return((_=m.value)!==null&&_!==void 0?_:m)==u});if(this.trigger("dropdown:select",{data:d,elm:e,event:t}),d||f){if(this.state.editing){var p=this.normalizeTags([d])[0];d=i.transformTag.call(this,p)||p,this.onEditTagDone(null,yt({__isValid:!0},d))}else this[g?"addMixTags":"addTags"]([d||this.input.raw.call(this)],o);(g||this.DOM.input.parentNode)&&(setTimeout(function(){r.DOM.input.focus(),r.toggleFocusClass(!0)}),c&&setTimeout(this.dropdown.hide.bind(this)),s?n&&n():(e.addEventListener("transitionend",function(){r.dropdown.fillHeaderFooter(),setTimeout(function(){e.remove(),r.dropdown.refilter(),n&&n()},100)},{once:!0}),e.classList.add(this.settings.classNames.dropdownItemHidden)))}else c&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(e){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var t=this.dropdown.filterListItems("");return e||(t=this.state.dropdown.suggestions),this.addTags(t,!0),this},filterListItems:function(e,t){var n,r,i,s,a,o,c=function(){var M,z,J=void 0,ot=void 0;M=m[S],r=((z=Object)!=null&&typeof Symbol<"u"&&z[Symbol.hasInstance]?z[Symbol.hasInstance](M):M instanceof z)?m[S]:{value:m[S]};var Q,et=Object.keys(r).some(function(b){return A.includes(b)})?A:["value"];g.fuzzySearch&&!t.exact?(s=et.reduce(function(b,N){return b+" "+(r[N]||"")},"").toLowerCase().trim(),g.accentedSearch&&(s=ui(s),o=ui(o)),J=s.indexOf(o)==0,ot=s===o,Q=s,i=o.toLowerCase().split(" ").every(function(b){return Q.includes(b.toLowerCase())})):(J=!0,i=et.some(function(b){var N=""+(r[b]||"");return g.accentedSearch&&(N=ui(N),o=ui(o)),g.caseSensitive||(N=N.toLowerCase()),ot=N===o,t.exact?N===o:N.indexOf(o)==0})),a=!g.includeSelectedTags&&n.isTagDuplicate(Zt(r)?r.value:r),i&&!a&&(ot&&J?p.push(r):g.sortby=="startsWith"&&J?d.unshift(r):d.push(r))},u=this,f=this.settings,g=f.dropdown,d=(t=t||{},[]),p=[],m=f.whitelist,_=g.maxItems>=0?g.maxItems:1/0,y=g.includeSelectedTags,T=typeof g.sortby=="function",A=g.searchKeys,S=0;if(!(e=f.mode=="select"&&this.value.length&&this.value[0][f.tagTextProp]==e?"":e)||!A.length){d=y?m:m.filter(function(M){return!u.isTagDuplicate(Zt(M)?M.value:M)});var D=T?g.sortby(d,o):d.slice(0,_);return this.state.dropdown.suggestions=D,D}for(o=g.caseSensitive?""+e:(""+e).toLowerCase();S<m.length;S++)n=this,c();return this.state.dropdown.suggestions=p.concat(d),D=T?g.sortby(p.concat(d),o):p.concat(d).slice(0,_),this.state.dropdown.suggestions=D,D},getMappedValue:function(e){var t=this.settings.dropdown.mapValueTo;return t?typeof t=="function"?t(e):e[t]||e.value:e.value},createListHTML:function(e){var t=this;return yt([],e).map(function(n,r){typeof n!="string"&&typeof n!="number"||(n={value:n});var i=t.dropdown.getMappedValue(n);return i=typeof i=="string"&&t.settings.dropdown.escapeHTML?Xe(i):i,t.settings.templates.dropdownItem.apply(t,[Gh(Wh({},n),{mappedValue:i}),t])}).join("")}}),On=(On={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return Xh(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(e){var t,n,r,i=this,s=this.settings,a=s.mode=="mix"&&!s.enforceWhitelist,o=!s.whitelist||!s.whitelist.length,c=s.dropdown.position=="manual";if(e=e===void 0?this.state.inputText:e,!(o&&!a&&!s.templates.dropdownItemNoMatch||s.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(e),e&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",e),s.templates.dropdownItemNoMatch&&(r=s.templates.dropdownItemNoMatch.call(this,{value:e}))),!r){if(this.suggestedListItems.length)e&&a&&!this.state.editing.scope&&!br(this.suggestedListItems[0].value,e)&&this.suggestedListItems.unshift({value:e});else{if(!e||!a||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:e}]}n=""+(Zt(t=this.suggestedListItems[0])?t.value:t),s.autoComplete&&n&&n.indexOf(e)==0&&this.input.autocomplete.suggest.call(this,t)}this.dropdown.fill(r),s.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(s.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=e||!0,this.state.dropdown.query=e,this.setStateSelection(),c||setTimeout(function(){i.dropdown.position(),i.dropdown.render()}),setTimeout(function(){i.trigger("dropdown:show",i.DOM.dropdown)})}},hide:function(e){var t=this,n=this.DOM,r=n.scope,i=n.dropdown,s=this.settings.dropdown.position=="manual"&&!e;if(i&&document.body.contains(i)&&!s)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),r.setAttribute("aria-expanded",!1),i.parentNode.removeChild(i),setTimeout(function(){t.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",i),this},toggle:function(e){this.dropdown[this.state.dropdown.visible&&!e?"hide":"show"]()},getAppendTarget:function(){var e=this.settings.dropdown;return typeof e.appendTarget=="function"?e.appendTarget():e.appendTarget},render:function(){var e,t,n,r=this,i=(e=this.DOM.dropdown,(n=e.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(n),t=n.clientHeight,n.parentNode.removeChild(n),t),s=this.settings,a=this.dropdown.getAppendTarget();return s.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(s.classNames.dropdownInital),this.dropdown.position(i),a.appendChild(this.DOM.dropdown),setTimeout(function(){return r.DOM.dropdown.classList.remove(s.classNames.dropdownInital)}))),this},fill:function(e){e=typeof e=="string"?e:this.dropdown.createListHTML(e||this.suggestedListItems);var t,n=this.settings.templates.dropdownContent.call(this,e);this.DOM.dropdown.content.innerHTML=(t=n)?t.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var e=this.dropdown.filterListItems(this.state.dropdown.query),t=this.parseTemplate("dropdownHeader",[e]),n=this.parseTemplate("dropdownFooter",[e]),r=this.dropdown.getHeaderRef(),i=this.dropdown.getFooterRef();t&&(r==null||r.parentNode.replaceChild(t,r)),n&&(i==null||i.parentNode.replaceChild(n,i))},position:function(e){var t=this.settings.dropdown,n=this.dropdown.getAppendTarget();if(t.position!="manual"&&n){var r,i,s,a,o,c,u,f,g,d,p=this.DOM.dropdown,m=t.RTL,_=n===document.body,y=n===this.DOM.scope,T=_?window.pageYOffset:n.scrollTop,A=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,S=A.clientHeight,D=Math.max(A.clientWidth||0,window.innerWidth||0),M=D>480?t.position:"all",z=this.DOM[M=="input"?"input":"scope"];if(e=e||p.clientHeight,this.state.dropdown.visible){if(M=="text"?(s=(r=function(){var Q=document.getSelection();if(Q.rangeCount){var et,b,N=Q.getRangeAt(0),w=N.startContainer,I=N.startOffset;if(I>0)return(b=document.createRange()).setStart(w,I-1),b.setEnd(w,I),{left:(et=b.getBoundingClientRect()).right,top:et.top,bottom:et.bottom};if(w.getBoundingClientRect)return w.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,i=r.top,a=r.left,o="auto"):(c=function(Q){var et=0,b=0;for(Q=Q.parentNode;Q&&Q!=A;)et+=Q.offsetTop||0,b+=Q.offsetLeft||0,Q=Q.parentNode;return{top:et,left:b}}(n),r=z.getBoundingClientRect(),i=y?-1:r.top-c.top,s=(y?r.height:r.bottom-c.top)-1,a=y?-1:r.left-c.left,o=r.width+"px"),!_){var J=function(){for(var Q=0,et=t.appendTarget.parentNode;et;)Q+=et.scrollTop||0,et=et.parentNode;return Q}();i+=J,s+=J}var ot;i=Math.floor(i),s=Math.ceil(s),f=D-a<120,g=((u=(ot=t.placeAbove)!==null&&ot!==void 0?ot:S-r.bottom<e)?i:s)+T,d=a+(m&&r.width||0)+window.pageXOffset,d=M=="text"&&f?"right: 0;":"left: ".concat(d,"px;"),p.style.cssText="".concat(d," top: ").concat(g,"px; min-width: ").concat(o,"; max-width: ").concat(o),p.setAttribute("placement",u?"top":"bottom"),p.setAttribute("position",M)}}}})!=null?On:{},Object.getOwnPropertyDescriptors?Object.defineProperties(hi,Object.getOwnPropertyDescriptors(On)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(On)).forEach(function(e){Object.defineProperty(hi,e,Object.getOwnPropertyDescriptor(On,e))}),hi),hr="@yaireo/tagify/",Qh={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},td={wrapper:function(e,t){return'<tags class="'.concat(t.classNames.namespace," ").concat(t.mode?"".concat(t.classNames[t.mode+"Mode"]):""," ").concat(e.className,`"
                    `).concat(t.readonly?"readonly":"",`
                    `).concat(t.disabled?"disabled":"",`
                    `).concat(t.required?"required":"",`
                    `).concat(t.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(Ko,`
        </tags>`)},input:function(){var e=this.settings,t=e.placeholder||Ko;return"<span ".concat(!e.readonly&&e.userInput?"contenteditable":"",' data-can-editable tabIndex="0" data-placeholder="').concat(t,'" aria-placeholder="').concat(e.placeholder||"",`"
                    class="`).concat(e.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(e.mode=="mix",'"></span>')},tag:function(e,t){var n=t.settings;return'<tag title="'.concat(e.title||e.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(n.a11y.focusableTags?0:-1,`"
                    class="`).concat(n.classNames.tag," ").concat(e.class||"",`"
                    `).concat(this.getAttributes(e),`>
            <x title='' tabIndex="`).concat(n.a11y.focusableTags?0:-1,'" class="').concat(n.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(n.mode==="select"&&n.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(n.classNames.tagText,'">').concat(e[n.tagTextProp]||e.value,`</span>
            </div>
        </tag>`)},dropdown:function(e){var t=e.dropdown,n=t.position=="manual";return'<div class="'.concat(n?"":e.classNames.dropdown," ").concat(t.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(t.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(e.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(e){var t=this.settings.templates,n=this.state.dropdown.suggestions;return`
            `.concat(t.dropdownHeader.call(this,n),`
            `).concat(e,`
            `).concat(t.dropdownFooter.call(this,n),`
        `)},dropdownItem:function(e){return"<div ".concat(this.getAttributes(e),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(e.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(e.class||"",`'
                    tabindex="0"
                    role="option">`).concat(e.mappedValue||e.value,"</div>")},dropdownHeader:function(e){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(e){var t=e.length-this.settings.dropdown.maxItems;return t>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(t,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function tl(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function el(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ed(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,o=[],c=!0,u=!1;try{for(i=i.call(n);!(c=(s=i.next()).done)&&(o.push(s.value),!r||o.length!==r);c=!0);}catch(f){u=!0,a=f}finally{try{c||i.return==null||i.return()}finally{if(u)throw a}}return o}}(e,t)||function(n,r){if(n){if(typeof n=="string")return tl(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tl(n,r)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nl(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function nd(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i.push.apply(i,s)}return i}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Zs(e){return function(t){if(Array.isArray(t))return Gs(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Gs(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gs(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rd={customBinding:function(){var e=this;this.customEventsList.forEach(function(t){e.on(t,e.settings.callbacks[t])})},binding:function(){var e,t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n=this.settings,r=this.events.callbacks,i=t?"addEventListener":"removeEventListener";if(!(this.state.mainEvents&&t||n.disabled||n.readonly)){for(var s in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||{keydown:["input",r.onKeydown.bind(this)],click:["scope",r.onClickScope.bind(this)],dblclick:n.mode!="select"&&["scope",r.onDoubleClickScope.bind(this)],paste:["input",r.onPaste.bind(this)],drop:["input",r.onDrop.bind(this)],compositionstart:["input",r.onCompositionStart.bind(this)],compositionend:["input",r.onCompositionEnd.bind(this)]})e[s]&&this.DOM[e[s][0]][i](s,e[s][1]);var a=this.listeners.main.inputMutationObserver||new MutationObserver(r.onInputDOMChange.bind(this));a.disconnect(),n.mode=="mix"&&a.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this),t&&(this.listeners.main=void 0)}},bindOriginaInputListener:function(e){var t=(e||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),t))},bindGlobal:function(e){var t,n=this.events.callbacks,r=e?"removeEventListener":"addEventListener";if(this.listeners&&(e||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"click",target:document,cb:n.onClickAnywhere.bind(this),useCapture:!0}];var i=!0,s=!1,a=void 0;try{for(var o,c=this.listeners.global[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)(t=o.value).target[r](t.type,t.cb,!!t.useCapture)}catch(u){s=!0,a=u}finally{try{i||c.return==null||c.return()}finally{if(s)throw a}}e&&(this.listeners.global=void 0)}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(e){var t,n,r=this.settings,i=Qo.call(this,e.relatedTarget),s=Je.call(this,e.target),a=e.target.classList.contains(r.classNames.tagX),o=e.type=="focusin",c=e.type=="focusout";a&&r.mode!="mix"&&r.focusInputOnRemove&&this.DOM.input.focus(),i&&o&&!s&&!a&&this.toggleFocusClass(this.state.hasFocus=+new Date);var u=e.target?this.trim(this.DOM.input.textContent):"",f=(n=this.value)===null||n===void 0||(t=n[0])===null||t===void 0?void 0:t[r.tagTextProp],g=r.dropdown.enabled>=0,d={relatedTarget:e.relatedTarget},p=this.state.actions.selectOption&&(g||!r.dropdown.closeOnSelect),m=this.state.actions.addNew&&g;if(c){if(e.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),r.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(p||m||a))if(this.state.hasFocus=!(!o&&!i)&&+new Date,this.toggleFocusClass(this.state.hasFocus),r.mode!="mix"){if(o){if(!r.focusable)return;var _=r.dropdown.enabled===0&&!this.state.dropdown.visible,y=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",d),void(_&&!s&&(this.dropdown.show(this.value.length?"":void 0),r.mode==="select"&&this.setRangeAtStartEnd(!1,y)))}if(c){if(this.trigger("blur",d),this.loading(!1),r.mode=="select"){if(this.value.length){var T=this.getTagElms()[0];u=this.trim(T.textContent)}f===u&&(u="")}u&&!this.state.actions.selectOption&&r.addTagOnBlur&&r.addTagOn.includes("blur")&&this.addTags(u,!0)}i||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else o?this.trigger("focus",d):c&&(this.trigger("blur",d),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(e){this.state.composing=!0},onCompositionEnd:function(e){this.state.composing=!1},onWindowKeyDown:function(e){var t,n=this.settings,r=document.activeElement,i=Qo.call(this,r)&&this.DOM.scope.contains(r),s=r===this.DOM.input,a=i&&r.hasAttribute("readonly"),o=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),c=this.state.dropdown.visible;if((e.key==="Tab"&&c||this.state.hasFocus||i&&!a)&&!s){t=r.nextElementSibling;var u=e.target.classList.contains(n.classNames.tagX);switch(e.key){case"Backspace":n.readonly||this.state.editing||(this.removeTags(r),(t||this.DOM.input).focus());break;case"Enter":if(u)return void this.removeTags(e.target.parentNode);n.a11y.focusableTags&&Je.call(this,r)&&setTimeout(this.editTag.bind(this),0,r);break;case"ArrowDown":this.state.dropdown.visible||n.mode=="mix"||this.dropdown.show();break;case"Tab":o==null||o.focus()}}},onKeydown:function(e){var t=this,n=this.settings;if(!this.state.composing&&n.userInput){n.mode=="select"&&n.enforceWhitelist&&this.value.length&&e.key!="Tab"&&e.preventDefault();var r=this.trim(e.target.textContent);this.trigger("keydown",{event:e}),n.hooks.beforeKeyDown(e,{tagify:this}).then(function(i){if(n.mode=="mix"){switch(e.key){case"Left":case"ArrowLeft":t.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(t.state.editing)return;var s=document.getSelection(),a=e.key=="Delete"&&s.anchorOffset==(s.anchorNode.length||0),o=s.anchorNode.previousSibling,c=s.anchorNode.nodeType==1||!s.anchorOffset&&o&&o.nodeType==1&&s.anchorNode.previousSibling;(function(A){var S=document.createElement("div");A.replace(/\&#?[0-9a-z]+;/gi,function(D){return S.innerHTML=D,S.innerText})})(t.DOM.input.innerHTML);var u,f,g,d=t.getTagElms(),p=s.anchorNode.length===1&&s.anchorNode.nodeValue=="​";if(n.backspace=="edit"&&c)return u=s.anchorNode.nodeType==1?null:s.anchorNode.previousElementSibling,setTimeout(t.editTag.bind(t),0,u),void e.preventDefault();if(Yo()&&nl(c,Element))return g=Zo(c),c.hasAttribute("readonly")||c.remove(),t.DOM.input.focus(),void setTimeout(function(){Ie(g),t.DOM.input.click()});if(s.anchorNode.nodeName=="BR")return;if((a||c)&&s.anchorNode.nodeType==1?f=s.anchorOffset==0?a?d[0]:null:d[Math.min(d.length,s.anchorOffset)-1]:a?f=s.anchorNode.nextElementSibling:nl(c,Element)&&(f=c),s.anchorNode.nodeType==3&&!s.anchorNode.nodeValue&&s.anchorNode.previousElementSibling&&e.preventDefault(),(c||a)&&!n.backspace||s.type!="Range"&&!s.anchorOffset&&s.anchorNode==t.DOM.input&&e.key!="Delete")return void e.preventDefault();if(s.type!="Range"&&f&&f.hasAttribute("readonly"))return void Ie(Zo(f));e.key=="Delete"&&p&&ut(s.anchorNode.nextSibling)&&t.removeTags(s.anchorNode.nextSibling);break;case"Enter":e.preventDefault();var m=window.getSelection();m.getRangeAt(0).insertNode(document.createElement("br")),m.collapseToEnd()}return!0}var _=n.dropdown.position=="manual";switch(e.key){case"Backspace":n.mode=="select"&&n.enforceWhitelist&&t.value.length?t.removeTags():t.state.dropdown.visible&&n.dropdown.position!="manual"||e.target.textContent!=""&&r.charCodeAt(0)!=8203||(n.backspace===!0?t.removeTags():n.backspace=="edit"&&setTimeout(t.editTag.bind(t),0));break;case"Esc":case"Escape":if(t.state.dropdown.visible)return;e.target.blur();break;case"Down":case"ArrowDown":t.state.dropdown.visible||t.dropdown.show();break;case"ArrowRight":var y=t.state.inputSuggestion||t.state.ddItemData;if(y&&n.autoComplete.rightKey)return void t.addTags([y],!0);break;case"Tab":return!0;case"Enter":if(t.state.dropdown.visible&&!_)return;e.preventDefault();var T=t.state.autoCompleteData||r;setTimeout(function(){t.state.dropdown.visible&&!_||t.state.actions.selectOption||!n.addTagOn.includes(e.key.toLowerCase())||(t.addTags([T],!0),t.state.autoCompleteData=null)})}}).catch(function(i){return i})}},onInput:function(e){this.postUpdate();var t=this.settings;if(t.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,e);var n=this.input.normalize.call(this,void 0,{trim:!1}),r=n.length>=t.dropdown.enabled,i={value:n,inputElm:this.DOM.input},s=this.validateTag({value:n});t.mode=="select"&&this.toggleScopeValidation(s),i.isValid=s,this.state.inputText!=n&&(this.input.set.call(this,n,!1),n.search(t.delimiters)!=-1?this.addTags(n)&&this.input.set.call(this):t.dropdown.enabled>=0&&this.dropdown[r?"show":"hide"](n),this.trigger("input",i))},onMixTagsInput:function(e){var t,n,r,i,s,a,o,c,u=this,f=this.settings,g=this.value.length,d=this.getTagElms(),p=document.createDocumentFragment(),m=window.getSelection().getRangeAt(0),_=[].map.call(d,function(y){return ut(y).value});if(e.inputType=="deleteContentBackward"&&Yo()&&this.events.callbacks.onKeydown.call(this,{target:e.target,key:"Backspace"}),Ec(this.getTagElms()),this.value.slice().forEach(function(y){y.readonly&&!_.includes(y.value)&&p.appendChild(u.createTagElem(y))}),p.childNodes.length&&(m.insertNode(p),this.setRangeAtStartEnd(!1,p.lastChild)),d.length!=g)return this.value=[].map.call(this.getTagElms(),function(y){return ut(y)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(a=window.getSelection()).rangeCount>0&&a.anchorNode.nodeType==3){if((m=a.getRangeAt(0).cloneRange()).collapse(!0),m.setStart(a.focusNode,0),r=(t=m.toString().slice(0,m.endOffset)).split(f.pattern).length-1,(n=t.match(f.pattern))&&(i=t.slice(t.lastIndexOf(n[n.length-1]))),i){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:i.match(f.pattern)[0],value:i.replace(f.pattern,"")},this.state.tag.baseOffset=a.baseOffset-this.state.tag.value.length,c=this.state.tag.value.match(f.delimiters))return this.state.tag.value=this.state.tag.value.replace(f.delimiters,""),this.state.tag.delimiters=c[0],this.addTags(this.state.tag.value,f.dropdown.clearOnSelect),void this.dropdown.hide();s=this.state.tag.value.length>=f.dropdown.enabled;try{o=(o=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&o.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(o||r<this.state.mixMode.matchedPatternCount)&&(s=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=r}setTimeout(function(){u.update({withoutChangeEvent:!0}),u.trigger("input",yt({},u.state.tag,{textContent:u.DOM.input.textContent})),u.state.tag&&u.dropdown[s?"show":"hide"](u.state.tag.value)},10)},onInputIE:function(e){var t=this;setTimeout(function(){t.events.callbacks.onInput.call(t,e)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(e){if(e.target!=this.DOM.scope&&!this.DOM.scope.contains(e.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var t=e.target.closest(this.settings.classNames.dropdownSelector);(t==null?void 0:t.__tagify)!=this&&this.dropdown.hide()}},onClickScope:function(e){var t=this.settings,n=e.target.closest("."+t.classNames.tag);e.target,this.DOM.scope;var r=+new Date-this.state.hasFocus;if(!e.target.classList.contains(t.classNames.tagX))return n&&!this.state.editing?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:ut(n),event:e}),void(t.editTags!==1&&t.editTags.clicks!==1&&t.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,e))):void(e.target==this.DOM.input&&(t.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),r>500||!t.focusable)?this.state.dropdown.visible?this.dropdown.hide():t.dropdown.enabled===0&&t.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):t.mode!="select"||t.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,nd(function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{},o=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}))),o.forEach(function(c){Ze(i,c,a[c])})}return i}({},e),{target:this.getTagElms()[0]})),!t.userInput&&this.dropdown.show()));this.removeTags(e.target.parentNode)},onPaste:function(e){var t=this;e.preventDefault();var n,r,i,s=this.settings;if(!s.userInput)return!1;s.readonly||(r=e.clipboardData||window.clipboardData,i=r.getData("Text"),s.hooks.beforePaste(e,{tagify:this,pastedText:i,clipboardData:r}).then(function(a){a===void 0&&(a=i),a&&(t.injectAtCaret(a,window.getSelection().getRangeAt(0)),t.settings.mode=="mix"?t.events.callbacks.onMixTagsInput.call(t,e):t.settings.pasteAsTags?n=t.addTags(t.state.inputText+a,!0):(t.state.inputText=a,t.dropdown.show(a))),t.trigger("paste",{event:e,pastedText:i,clipboardData:r,tagsElems:n})}).catch(function(a){return a}))},onDrop:function(e){e.preventDefault()},onEditTagInput:function(e,t){var n,r=e.closest("."+this.settings.classNames.tag),i=this.getNodeIndex(r),s=ut(r),a=this.input.normalize.call(this,e),o=(Ze(n={},this.settings.tagTextProp,a),Ze(n,"__tagId",s.__tagId),n),c=this.validateTag(o);this.editTagChangeDetected(yt(s,o))||e.originalIsValid!==!0||(c=!0),r.classList.toggle(this.settings.classNames.tagInvalid,c!==!0),s.__isValid=c,r.title=c===!0?s.title||s.value:c,a.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=a),this.dropdown.show(a)),this.trigger("edit:input",{tag:r,index:i,data:yt({},this.value[i],{newValue:a}),event:t})},onEditTagPaste:function(e,t){var n=(t.clipboardData||window.clipboardData).getData("Text");t.preventDefault();var r=xc(n);this.setRangeAtStartEnd(!1,r)},onEditTagClick:function(e,t){this.events.callbacks.onClickScope.call(this,t)},onEditTagFocus:function(e){this.state.editing={scope:e,input:e.querySelector("[contenteditable]")}},onEditTagBlur:function(e,t){var n=Je.call(this,t.relatedTarget);if(this.settings.mode=="select"&&n&&t.relatedTarget.contains(t.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(e))){var r,i,s,a=this.settings,o=e.closest("."+a.classNames.tag),c=ut(o),u=this.input.normalize.call(this,e),f=(Ze(r={},a.tagTextProp,u),Ze(r,"__tagId",c.__tagId),r),g=c.__originalData,d=this.editTagChangeDetected(yt(c,f)),p=this.validateTag(f);if(u)if(d){var m;if(i=this.hasMaxTags(),s=yt({},g,(Ze(m={},a.tagTextProp,this.trim(u)),Ze(m,"__isValid",p),m)),a.transformTag.call(this,s,g),(p=(!i||g.__isValid===!0)&&this.validateTag(s))!==!0){if(this.trigger("invalid",{data:s,tag:o,message:p}),a.editTags.keepInvalid)return;a.keepInvalidTags?s.__isValid=p:s=g}else a.keepInvalidTags&&(delete s.title,delete s["aria-invalid"],delete s.class);this.onEditTagDone(o,s)}else this.onEditTagDone(o,g);else this.onEditTagDone(o)}},onEditTagkeydown:function(e,t){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:e}),e.key){case"Esc":case"Escape":this.state.editing=!1,t.__tagifyTagData.__originalData.value?t.parentNode.replaceChild(t.__tagifyTagData.__originalHTML,t):t.remove();break;case"Enter":case"Tab":e.preventDefault(),setTimeout(function(){return e.target.blur()},0)}},onDoubleClickScope:function(e){var t=e.target.closest("."+this.settings.classNames.tag);if(t){var n,r,i=ut(t),s=this.settings;(i==null?void 0:i.editable)!==!1&&(n=t.classList.contains(this.settings.classNames.tagEditing),r=t.hasAttribute("readonly"),s.readonly||n||r||!this.settings.editTags||!s.userInput||(this.events.callbacks.onEditTagFocus.call(this,t),this.editTag(t)),this.toggleFocusClass(!0),s.mode!="select"&&this.trigger("dblclick",{tag:t,index:this.getNodeIndex(t),data:ut(t)}))}},onInputDOMChange:function(e){var t=this;e.forEach(function(r){r.addedNodes.forEach(function(i){if(i.outerHTML=="<div><br></div>")i.replaceWith(document.createElement("br"));else if(i.nodeType==1&&i.querySelector(t.settings.classNames.tagSelector)){var s,a=document.createTextNode("");i.childNodes[0].nodeType==3&&i.previousSibling.nodeName!="BR"&&(a=document.createTextNode(`
`)),(s=i).replaceWith.apply(s,Zs([a].concat(Zs(Zs(i.childNodes).slice(0,-1))))),Ie(a)}else if(Je.call(t,i)){var o;if(((o=i.previousSibling)===null||o===void 0?void 0:o.nodeType)!=3||i.previousSibling.textContent||i.previousSibling.remove(),i.previousSibling&&i.previousSibling.nodeName=="BR"){i.previousSibling.replaceWith(`
​`);for(var c=i.nextSibling,u="";c;)u+=c.textContent,c=c.nextSibling;u.trim()&&Ie(i.previousSibling)}else i.previousSibling&&!ut(i.previousSibling)||i.before("​")}}),r.removedNodes.forEach(function(i){i&&i.nodeName=="BR"&&Je.call(t,n)&&(t.removeTags(n),t.fixFirefoxLastTagNoCaret())})});var n=this.DOM.input.lastChild;n&&n.nodeValue==""&&n.remove(),n&&n.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Xs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){ba(e,i,n[i])})}return e}function di(e){return function(t){if(Array.isArray(t))return Xs(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Xs(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xs(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){if(!e){ke.warn("input element not found",e);var n=new Proxy(this,{get:function(){return function(){return n}}});return n}if(e.__tagify)return ke.warn("input element is already Tagified - Same instance is returned.",e),e.__tagify;var r;yt(this,function(i){var s=document.createTextNode(""),a={};function o(c,u,f){f&&u.split(/\s+/g).forEach(function(g){return s[c+"EventListener"].call(s,g,f)})}return{removeAllCustomListeners:function(){Object.entries(a).forEach(function(c){var u=ed(c,2),f=u[0];u[1].forEach(function(g){return o("remove",f,g)})}),a={}},off:function(c,u){return c&&(u?o("remove",c,u):c.split(/\s+/g).forEach(function(f){var g;(g=a[f])===null||g===void 0||g.forEach(function(d){return o("remove",f,d)}),delete a[f]})),this},on:function(c,u){return u&&typeof u=="function"&&(c.split(/\s+/g).forEach(function(f){Array.isArray(a[f])?a[f].push(u):a[f]=[u]}),o("add",c,u)),this},trigger:function(c,u,f){var g;if(f=f||{cloneData:!0},c)if(i.settings.isJQueryPlugin)c=="remove"&&(c="removeTag"),jQuery(i.DOM.originalInput).triggerHandler(c,[u]);else{try{var d=typeof u=="object"?u:{value:u};if((d=f.cloneData?yt({},d):d).tagify=this,u.event&&(d.event=this.cloneEvent(u.event)),el(u,Object))for(var p in u)el(u[p],HTMLElement)&&(d[p]=u[p]);g=new CustomEvent(c,{detail:d})}catch(m){ke.warn(m)}s.dispatchEvent(g)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,t=t||{},this.getPersistedData=(r=t.id,function(i){var s;if(r){var a,o="/"+i;if(((s=localStorage)===null||s===void 0?void 0:s.getItem(hr+r+"/v"))===1)try{a=JSON.parse(localStorage[hr+r+o])}catch{}return a}}),this.setPersistedData=function(i){var s;return i?((s=localStorage)===null||s===void 0||s.setItem(hr+i+"/v",1),function(a,o){var c,u="/"+o,f=JSON.stringify(a);a&&o&&((c=localStorage)===null||c===void 0||c.setItem(hr+i+u,f),dispatchEvent(new Event("storage")))}):function(){}}(t.id),this.clearPersistedData=function(i){return function(s){var a=hr+"/"+i+"/";if(s)localStorage.removeItem(a+s);else for(var o in localStorage)o.includes(a)&&localStorage.removeItem(o)}}(t.id),this.applySettings(e,t),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(e),Yh.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),e.autofocus&&this.DOM.input.focus(),e.__tagify=this}Si.prototype={_dropdown:Jh,placeCaretAfterNode:Ie,getSetTagData:ut,helpers:{sameStr:br,removeCollectionProp:Go,omit:ma,isObject:Zt,parseHTML:zs,escapeHTML:Xe,extend:yt,concatWithoutDups:Xo,getUID:Jo,isNodeTag:Je},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(e){return this.settings.trim&&e&&typeof e=="string"?e.trim():e},parseHTML:zs,templates:td,parseTemplate:function(e,t){return zs((e=this.settings.templates[e]||e).apply(this,t))},set whitelist(e){var t=e&&Array.isArray(e);this.settings.whitelist=t?e:[],this.setPersistedData(t?e:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(e){this.settings.userInput=!!e,this.setContentEditable(!!e)},get userInput(){return this.settings.userInput},generateClassSelectors:function(e){var t=function(r){var i=r;Object.defineProperty(e,i+"Selector",{get:function(){return"."+this[i].split(" ")[0]}})};for(var n in e)t(n)},applySettings:function(e,t){var n,r;Ks.templates=this.templates;var i=yt({},Ks,t.mode=="mix"?{dropdown:{position:"text"}}:{}),s=this.settings=yt({},i,t);if(s.disabled=e.hasAttribute("disabled"),s.readonly=s.readonly||e.hasAttribute("readonly"),s.placeholder=Xe(e.getAttribute("placeholder")||s.placeholder||""),s.required=e.hasAttribute("required"),this.generateClassSelectors(s.classNames),this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach(function(o){var c=e.getAttribute("data-"+o);c&&ve(c=c.split(s.delimiters),Array)&&(s[o]=c)}),"autoComplete"in t&&!Zt(t.autoComplete)&&(s.autoComplete=Ks.autoComplete,s.autoComplete.enabled=t.autoComplete),s.mode=="mix"&&(s.pattern=s.pattern||/@/,s.autoComplete.rightKey=!0,s.delimiters=t.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),e.pattern)try{s.pattern=new RegExp(e.pattern)}catch{}if(s.delimiters){s._delimiters=s.delimiters;try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}(s.disabled||s.readonly)&&(s.userInput=!1),this.TEXTS=rl({},Qh,s.texts||{}),s.mode=="select"&&(s.dropdown.includeSelectedTags=!0),(s.mode!="select"||!((n=t.dropdown)===null||n===void 0)&&n.enabled)&&s.userInput||(s.dropdown.enabled=0),s.disabled&&(s.dropdown.enabled=!1),s.dropdown.appendTarget=((r=t.dropdown)===null||r===void 0?void 0:r.appendTarget)||document.body,s.dropdown.includeSelectedTags===void 0&&(s.dropdown.includeSelectedTags=s.duplicates);var a=this.getPersistedData("whitelist");Array.isArray(a)&&(this.whitelist=Array.isArray(s.whitelist)?Xo(s.whitelist,a):a)},getAttributes:function(e){var t,n=this.getCustomAttributes(e),r="";for(t in n)r+=" "+t+(e[t]!==void 0?'="'.concat(n[t],'"'):"");return r},getCustomAttributes:function(e){if(!Zt(e))return"";var t,n={};for(t in e)t.slice(0,2)!="__"&&t!="class"&&e.hasOwnProperty(t)&&e[t]!==void 0&&(n[t]=Xe(e[t]));return n},setStateSelection:function(){var e=window.getSelection(),t={anchorOffset:e.anchorOffset,anchorNode:e.anchorNode,range:e.getRangeAt&&e.rangeCount&&e.getRangeAt(0)};return this.state.selection=t,t},getCSSVars:function(){var e,t,n,r=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(e=function(i){if(!i)return{};var s=(i=i.trim().split(" ")[0]).split(/\d+/g).filter(function(a){return a}).pop().trim();return{value:+i.split(s).filter(function(a){return a})[0].trim(),unit:s}}((n="tag-hide-transition",r.getPropertyValue("--"+n))),t=e.value,e.unit=="s"?1e3*t:t)}},build:function(e){var t=this.DOM,n=e.closest("label");this.settings.mixMode.integrated?(t.originalInput=null,t.scope=e,t.input=e):(t.originalInput=e,t.originalInput_tabIndex=e.tabIndex,t.scope=this.parseTemplate("wrapper",[e,this.settings]),t.input=t.scope.querySelector(this.settings.classNames.inputSelector),e.parentNode.insertBefore(t.scope,e),e.tabIndex=-1),n&&n.setAttribute("for","")},destroy:function(){var e,t,n;this.events.unbindGlobal.call(this),(e=this.DOM.scope.parentNode)===null||e===void 0||e.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval((n=this.listeners)===null||n===void 0||(t=n.main)===null||t===void 0?void 0:t.originalInputValueObserverInterval)},loadOriginalValues:function(e){var t,n=this.settings;if(this.state.blockChangeEvent=!0,e===void 0){var r=this.getPersistedData("value");e=r&&!this.DOM.originalInput.value?r:n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),e)if(n.mode=="mix")this.parseMixTags(e),(t=this.DOM.input.lastChild)&&t.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{ve(JSON.parse(e),Array)&&(e=JSON.parse(e))}catch{}this.addTags(e,!0).forEach(function(i){return i&&i.classList.add(n.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(e){var t={};for(var n in e)n!="path"&&(t[n]=e[n]);return t},loading:function(e){return this.state.isLoading=e,this.DOM.scope.classList[e?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(e,t){return e&&e.classList[t?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(e,t){typeof e=="string"&&this.DOM.scope.classList.toggle(e,t)},toggleScopeValidation:function(e){var t=e===!0||e===void 0;!this.settings.required&&e&&e===this.TEXTS.empty&&(t=!0),this.toggleClass(this.settings.classNames.tagInvalid,!t),this.DOM.scope.title=t?"":e},toggleFocusClass:function(e){this.toggleClass(this.settings.classNames.focus,!!e)},setPlaceholder:function(e){var t=this;["data","aria"].forEach(function(n){return t.DOM.input.setAttribute("".concat(n,"-placeholder"),e)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var e=this.DOM.originalInput,t=this.state.lastOriginalValueReported!==e.value,n=new CustomEvent("change",{bubbles:!0});t&&(this.state.lastOriginalValueReported=e.value,n.simulated=!0,e._valueTracker&&e._valueTracker.setValue(Math.random()),e.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),e.value=this.state.lastOriginalValueReported)}},events:rd,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(e,t){if(t){e=typeof e=="number"?e:!!e,t=t.lastChild||t;var n=document.getSelection();if(ve(n.focusNode,Element)&&!this.DOM.input.contains(n.focusNode))return!0;try{n.rangeCount>=1&&["Start","End"].forEach(function(r){return n.getRangeAt(0)["set"+r](t,e||t.length)})}catch(r){console.warn(r)}}},insertAfterTag:function(e,t){if(t=t||this.settings.mixMode.insertAfterTag,e&&e.parentNode&&t)return t=typeof t=="string"?document.createTextNode(t):t,e.parentNode.insertBefore(t,e.nextSibling),t},editTagChangeDetected:function(e){var t=e.__originalData;for(var n in t)if(!this.dataProps.includes(n)&&e[n]!=t[n])return!0;return!1},getTagTextNode:function(e){return e.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(e,t){this.getTagTextNode(e).innerHTML=Xe(t)},editTag:function(e,t){var n=this;e=e||this.getLastTag(),t=t||{};var r=this.settings,i=this.getTagTextNode(e),s=this.getNodeIndex(e),a=ut(e),o=this.events.callbacks,c=!0,u=r.mode=="select";if(!u&&this.dropdown.hide(),i){if(!ve(a,Object)||!("editable"in a)||a.editable)return a=ut(e,{__originalData:yt({},a),__originalHTML:e.cloneNode(!0)}),ut(a.__originalHTML,a.__originalData),i.setAttribute("contenteditable",!0),e.classList.add(r.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,e),i.addEventListener("click",o.onEditTagClick.bind(this,e)),i.addEventListener("blur",o.onEditTagBlur.bind(this,this.getTagTextNode(e))),i.addEventListener("input",o.onEditTagInput.bind(this,i)),i.addEventListener("paste",o.onEditTagPaste.bind(this,i)),i.addEventListener("keydown",function(f){return o.onEditTagkeydown.call(n,f,e)}),i.addEventListener("compositionstart",o.onCompositionStart.bind(this)),i.addEventListener("compositionend",o.onCompositionEnd.bind(this)),t.skipValidation||(c=this.editTagToggleValidity(e)),i.originalIsValid=c,this.trigger("edit:start",{tag:e,index:s,data:a,isValid:c}),i.focus(),!u&&this.setRangeAtStartEnd(!1,i),r.dropdown.enabled===0&&!u&&this.dropdown.show(),this.state.hasFocus=!0,this}else ke.warn("Cannot find element in Tag template: .",r.classNames.tagTextSelector)},editTagToggleValidity:function(e,t){var n;if(t=t||ut(e))return(n=!("__isValid"in t)||t.__isValid===!0)||this.removeTagsFromValue(e),this.update(),e.classList.toggle(this.settings.classNames.tagNotAllowed,!n),t.__isValid=n,t.__isValid;ke.warn("tag has no data: ",e,t)},onEditTagDone:function(e,t){e=e||this.state.editing.scope,t=t||{};var n,r,i=this.settings,s={tag:e,index:this.getNodeIndex(e),previousData:ut(e),data:t};this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete t.__originalData,delete t.__originalHTML,e&&e.parentNode&&(((r=t[i.tagTextProp])!==void 0?!((n=(r+="").trim)===null||n===void 0)&&n.call(r):!(i.tagTextProp in t)&&t.value)?(e=this.replaceTag(e,t),this.editTagToggleValidity(e,t),i.a11y.focusableTags?e.focus():i.mode!="select"&&Ie(e)):this.removeTags(e)),this.trigger("edit:updated",s),i.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(e,t){t&&t.value!==""&&t.value!==void 0||(t=e.__tagifyTagData),t.__isValid&&t.__isValid!=1&&yt(t,this.getInvalidTagAttrs(t,t.__isValid));var n=this.createTagElem(t);return e.parentNode.replaceChild(n,e),this.updateValueByDOMTags(),n},updateValueByDOMTags:function(){var e=this;this.value.length=0;var t=this.settings.classNames,n=[t.tagNotAllowed.split(" ")[0],t.tagHide];[].forEach.call(this.getTagElms(),function(r){di(r.classList).some(function(i){return n.includes(i)})||e.value.push(ut(r))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(e,t){var n;if(t=t||((n=this.state.selection)===null||n===void 0?void 0:n.range),typeof e=="string"&&(e=document.createTextNode(e)),!t&&e)return this.appendMixTags(e),this;if(!this.DOM.scope.contains(t==null?void 0:t.startContainer))return this;var r=xc(e,t);return this.setRangeAtStartEnd(!1,r),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.settings,r=n.dropdown.closeOnSelect;this.state.inputText=e,t&&(this.DOM.input.innerHTML=Xe(""+e),e&&this.toggleClass(n.classNames.empty,!this.DOM.input.innerHTML)),!e&&r&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var e=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!e),e},normalize:function(e,t){var n=e||this.DOM.input,r=[];n.childNodes.forEach(function(i){return i.nodeType==3&&r.push(i.nodeValue)}),r=r.join(`
`);try{r=r.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return r=r.replace(/\s/g," "),t!=null&&t.trim?this.trim(r):r},autocomplete:{suggest:function(e){if(this.settings.autoComplete.enabled){typeof(e=e||{value:""})!="object"&&(e={value:e});var t=this.dropdown.getMappedValue(e);if(typeof t!="number"){var n=this.state.inputText.toLowerCase(),r=t.substr(0,this.state.inputText.length).toLowerCase(),i=t.substring(this.state.inputText.length);t&&this.state.inputText&&r==n?(this.DOM.input.setAttribute("data-suggest",i),this.state.inputSuggestion=e):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(e){var t=this.DOM.input.getAttribute("data-suggest"),n=e||(t?this.state.inputText+t:null);return!!n&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(e){return this.value.findIndex(function(t){return t.__tagId==(e||{}).__tagId})},getNodeIndex:function(e){var t=0;if(e)for(;e=e.previousElementSibling;)t++;return t},getTagElms:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="."+di(this.settings.classNames.tag.split(" ")).concat(di(t)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(r))},getLastTag:function(){var e=this.settings.classNames,t=this.DOM.scope.querySelectorAll("".concat(e.tagSelector,":not(.").concat(e.tagHide,"):not([readonly])"));return t[t.length-1]},isTagDuplicate:function(e,t,n){var r=0,i=!0,s=!1,a=void 0;try{for(var o,c=this.value[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;br(this.trim(""+e),u.value,t)&&n!=u.__tagId&&r++}}catch(f){s=!0,a=f}finally{try{i||c.return==null||c.return()}finally{if(s)throw a}}return r},getTagIndexByValue:function(e){var t=this,n=[],r=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(i,s){i.__tagifyTagData&&br(t.trim(i.__tagifyTagData.value),e,r)&&n.push(s)}),n},getTagElmByValue:function(e){var t=this.getTagIndexByValue(e)[0];return this.getTagElms()[t]},flashTag:function(e){var t=this;e&&(e.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){e.classList.remove(t.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(e){return e=this.trim(e.toLowerCase()),this.settings.blacklist.filter(function(t){return(""+t).toLowerCase()==e}).length},isTagWhitelisted:function(e){return!!this.getWhitelistItem(e)},getWhitelistItem:function(e,t,n){t=t||"value";var r,i=this.settings;return(n=n||i.whitelist).some(function(s){var a=typeof s=="object"?s[t]||s.value:s;if(br(a,e,i.dropdown.caseSensitive,i.trim))return r=typeof s=="object"?s:{value:s},!0}),r||t!="value"||i.tagTextProp=="value"||(r=this.getWhitelistItem(e,i.tagTextProp,n)),r},validateTag:function(e){var t=this.settings,n="value"in e?"value":t.tagTextProp,r=this.trim(e[n]+"");return(e[n]+"").trim()?t.mode!="mix"&&t.pattern&&ve(t.pattern,RegExp)&&!t.pattern.test(r)?this.TEXTS.pattern:!t.duplicates&&this.isTagDuplicate(r,t.dropdown.caseSensitive,e.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(r)||t.enforceWhitelist&&!this.isTagWhitelisted(r)?this.TEXTS.notAllowed:!t.validate||t.validate(e):this.TEXTS.empty},getInvalidTagAttrs:function(e,t){return{"aria-invalid":!0,class:"".concat(e.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:t}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(e,t){var n=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),n[t||"readonly"]=e,this.DOM.scope[(e?"set":"remove")+"Attribute"](t||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!e),e||(this.events.binding.call(this,!0),this.events.binding.call(this))},setContentEditable:function(e){this.DOM.scope.querySelectorAll("[data-can-editable]").forEach(function(t){t.contentEditable=e,t.tabIndex=e?0:-1})},setDisabled:function(e){this.setReadonly(e,"disabled")},normalizeTags:function(e){var t=this,n=this.settings,r=n.whitelist,i=n.delimiters,s=n.mode,a=n.tagTextProp,o=[],c=!!r&&ve(r[0],Object),u=Array.isArray(e),f=u&&e[0].value,g=function(d){return(d+"").split(i).reduce(function(p,m){var _,y=t.trim(m);return y&&p.push((ba(_={},a,y),ba(_,"value",y),_)),p},[])};if(typeof e=="number"&&(e=e.toString()),typeof e=="string"){if(!e.trim())return[];e=g(e)}else u&&(e=e.reduce(function(d,p){if(Zt(p)){var m=yt({},p);a in m||(a="value"),m[a]=t.trim(m[a]),(m[a]||m[a]===0)&&d.push(m)}else if(p!=null&&p!==""&&p!==void 0){var _;(_=d).push.apply(_,di(g(p)))}return d},[]));return c&&!f&&(e.forEach(function(d){var p=o.map(function(y){return y.value}),m=t.dropdown.filterListItems.call(t,d[a],{exact:!0});t.settings.duplicates||(m=m.filter(function(y){return!p.includes(y.value)}));var _=m.length>1?t.getWhitelistItem(d[a],a,m):m[0];_&&ve(_,Object)?o.push(_):s!="mix"&&(d.value==null&&(d.value=d[a]),o.push(d))}),o.length&&(e=o)),e},parseMixTags:function(e){var t=this,n=this.settings,r=n.mixTagsInterpolator,i=n.duplicates,s=n.transformTag,a=n.enforceWhitelist,o=n.maxTags,c=n.tagTextProp,u=[];e=e.split(r[0]).map(function(g,d){var p,m,_,y=g.split(r[1]),T=y[0],A=u.length==o;try{if(T==+T)throw Error;m=JSON.parse(T)}catch{m=t.normalizeTags(T)[0]||{value:T}}if(s.call(t,m),A||!(y.length>1)||a&&!t.isTagWhitelisted(m.value)||!i&&t.isTagDuplicate(m.value)){if(g)return d?r[0]+g:g}else m[p=m[c]?c:"value"]=t.trim(m[p]),_=t.createTagElem(m),u.push(m),_.classList.add(t.settings.classNames.tagNoAnimation),y[0]=_.outerHTML,t.value.push(m);return y.join("")}).join(""),this.DOM.input.innerHTML=e,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var f=this.getTagElms();return f.forEach(function(g,d){return ut(g,u[d])}),this.update({withoutChangeEvent:!0}),Ec(f,this.state.hasFocus),e},replaceTextWithNode:function(e,t){if(this.state.tag||t){t=t||this.state.tag.prefix+this.state.tag.value;var n,r,i=this.state.selection||window.getSelection(),s=i.anchorNode,a=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return s.splitText(i.anchorOffset-a),(n=s.nodeValue.lastIndexOf(t))==-1||(r=s.splitText(n),e&&s.parentNode.replaceChild(e,r)),!0}},prepareNewTagNode:function(e,t){t=t||{};var n=this.settings,r=[],i={},s=Object.assign({},e,{value:e.value+""});if(e=Object.assign({},s),n.transformTag.call(this,e),e.__isValid=this.hasMaxTags()||this.validateTag(e),e.__isValid!==!0){if(t.skipInvalid)return;if(yt(i,this.getInvalidTagAttrs(e,e.__isValid),{__preInvalidData:s}),e.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(e.value)),!n.createInvalidTags)return void r.push(e.value)}return"readonly"in e&&(e.readonly?i["aria-readonly"]=!0:delete e.readonly),{tagElm:this.createTagElem(e,i),tagData:e,aggregatedInvalidInput:r}},postProcessNewTagNode:function(e,t){var n=this,r=this.settings,i=t.__isValid;i&&i===!0?this.value.push(t):(this.trigger("invalid",{data:t,index:this.value.length,tag:e,message:i}),r.keepInvalidTags||setTimeout(function(){return n.removeTags(e,!0)},1e3)),this.dropdown.position()},selectTag:function(e,t){var n=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(t.value)){this.state.actions.selectOption&&setTimeout(function(){return n.setRangeAtStartEnd(!1,n.DOM.input)});var r=this.getLastTag();return r?this.replaceTag(r,t):this.appendTag(e),this.value[0]=t,this.update(),this.trigger("add",{tag:e,data:t}),[e]}},addEmptyTag:function(e){var t=yt({value:""},e||{}),n=this.createTagElem(t);ut(n,t),this.appendTag(n),this.editTag(n,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(e,t,n){var r=this,i=[],s=this.settings,a=[],o=document.createDocumentFragment(),c=[];if(!e||e.length==0)return i;switch(e=this.normalizeTags(e),s.mode){case"mix":return this.addMixTags(e);case"select":t=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),e.forEach(function(u){var f=r.prepareNewTagNode(u,{skipInvalid:n||s.skipInvalid});if(f){var g=f.tagElm;if(u=f.tagData,a=f.aggregatedInvalidInput,i.push(g),s.mode=="select")return r.selectTag(g,u);o.appendChild(g),r.postProcessNewTagNode(g,u),c.push({tagElm:g,tagData:u})}}),this.appendTag(o),c.forEach(function(u){var f=u.tagElm,g=u.tagData;return r.trigger("add",{tag:f,index:r.getTagIdx(g),data:g})}),this.update(),e.length&&t&&(this.input.set.call(this,s.createInvalidTags?"":a.join(s._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),i},addMixTags:function(e){var t=this;if((e=this.normalizeTags(e))[0].prefix||this.state.tag)return this.prefixedTextToTag(e[0]);var n=document.createDocumentFragment();return e.forEach(function(r){var i=t.prepareNewTagNode(r);n.appendChild(i.tagElm),t.insertAfterTag(i.tagElm),t.postProcessNewTagNode(i.tagElm,i.tagData)}),this.appendMixTags(n),n.children},appendMixTags:function(e){var t=!!this.state.selection;t?this.injectAtCaret(e):(this.DOM.input.focus(),(t=this.setStateSelection()).range.setStart(this.DOM.input,t.range.endOffset),t.range.setEnd(this.DOM.input,t.range.endOffset),this.DOM.input.appendChild(e),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(e){var t,n,r,i=this,s=this.settings,a=(t=this.state.tag)===null||t===void 0?void 0:t.delimiters;if(e.prefix=e.prefix||this.state.tag?this.state.tag.prefix:(s.pattern.source||s.pattern)[0],r=this.prepareNewTagNode(e),n=r.tagElm,this.replaceTextWithNode(n)||this.DOM.input.appendChild(n),setTimeout(function(){return n.classList.add(i.settings.classNames.tagNoAnimation)},300),this.update(),!a){var o=this.insertAfterTag(n)||n;setTimeout(Ie,0,o)}return this.state.tag=null,this.postProcessNewTagNode(n,r.tagData),n},appendTag:function(e){var t=this.DOM,n=t.input;t.scope.insertBefore(e,n)},createTagElem:function(e,t){e.__tagId=Jo();var n,r=yt({},e,rl({value:Xe(e.value+"")},t));return function(i){for(var s,a=document.createNodeIterator(i,NodeFilter.SHOW_TEXT,null,!1);s=a.nextNode();)s.textContent.trim()||s.parentNode.removeChild(s)}(n=this.parseTemplate("tag",[r,this])),ut(n,e),n},reCheckInvalidTags:function(){var e=this,t=this.settings;this.getTagElms(t.classNames.tagNotAllowed).forEach(function(n,r){var i=ut(n),s=e.hasMaxTags(),a=e.validateTag(i),o=a===!0&&!s;if(t.mode=="select"&&e.toggleScopeValidation(a),o)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},e.replaceTag(n,i);n.title=s||a})},removeTags:function(e,t,n){var r,i=this,s=this.settings;if(e=e&&ve(e,HTMLElement)?[e]:ve(e,Array)?e:e?[e]:[this.getLastTag()].filter(function(a){return a}),r=e.reduce(function(a,o){o&&typeof o=="string"&&(o=i.getTagElmByValue(o));var c=ut(o);return o&&c&&!c.readonly&&a.push({node:o,idx:i.getTagIdx(c),data:ut(o,{__removed:!0})}),a},[]),n=typeof n=="number"?n:this.CSSVars.tagHideTransition,s.mode=="select"&&(n=0,this.input.set.call(this)),r.length==1&&s.mode!="select"&&r[0].node.classList.contains(s.classNames.tagNotAllowed)&&(t=!0),r.length)return s.hooks.beforeRemoveTag(r,{tagify:this}).then(function(){var a=function(o){o.node.parentNode&&(o.node.parentNode.removeChild(o.node),t?s.keepInvalidTags&&this.trigger("remove",{tag:o.node,index:o.idx}):(this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),s.keepInvalidTags&&this.reCheckInvalidTags(),this.trigger("remove",{tag:o.node,index:o.idx,data:o.data})))};t||(i.removeTagsFromValue(r.map(function(o){return o.node})),i.update(),s.mode=="select"&&s.userInput&&i.setContentEditable(!0)),n&&n>10&&r.length==1?(function(o){o.node.style.width=parseFloat(window.getComputedStyle(o.node).width)+"px",document.body.clientTop,o.node.classList.add(s.classNames.tagHide),setTimeout(a.bind(this),n,o)}).call(i,r[0]):r.forEach(a.bind(i))}).catch(function(a){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(e){return e.remove()})},removeTagsFromValue:function(e){var t=this;(e=Array.isArray(e)?e:[e]).forEach(function(n){var r=ut(n),i=t.getTagIdx(r);i>-1&&t.value.splice(i,1)})},removeAllTags:function(e){var t=this;e=e||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){t.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(e,function(){t.trigger("remove",{})})},postUpdate:function(){this.state.blockChangeEvent=!1;var e,t,n=this.settings,r=n.classNames,i=n.mode=="mix"?n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(r.hasMaxTags,this.value.length>=n.maxTags),this.toggleClass(r.hasNoTags,!this.value.length),this.toggleClass(r.empty,!i),n.mode=="select"&&this.toggleScopeValidation((t=this.value)===null||t===void 0||(e=t[0])===null||e===void 0?void 0:e.__isValid)},setOriginalInputValue:function(e){var t=this.DOM.originalInput;this.settings.mixMode.integrated||(t.value=e,t.tagifyValue=t.value)},update:function(e,t){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout((function(){this.setPersistedData(n,"value"),this.settings.onChangeAfterBlur&&(e||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate(),t==null||t()}).bind(this),100),this.events.bindOriginaInputListener.call(this,100);var n=this.getInputValue();this.setOriginalInputValue(n)},getInputValue:function(){var e=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(e):e.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(e):JSON.stringify(e):""},getCleanValue:function(e){return Go(e||this.value,this.dataProps)},getMixedTagsAsString:function(){var e="",t=this,n=this.settings,r=n.originalInputValueFormat||JSON.stringify,i=n.mixTagsInterpolator;return function s(a){a.childNodes.forEach(function(o){if(o.nodeType==1){var c=ut(o);if(o.tagName=="BR"&&(e+=`\r
`),c&&Je.call(t,o)){if(c.__removed)return;e+=i[0]+r(ma(c,t.dataProps))+i[1]}else o.getAttribute("style")||["B","I","U"].includes(o.tagName)?e+=o.textContent:o.tagName!="DIV"&&o.tagName!="P"||(e+=`\r
`,s(o))}else e+=o.textContent})}(this.DOM.input),e}},Si.prototype.removeTag=Si.prototype.removeTags;var va=!1,ya=!1,tn=[],wa=-1;function id(e){sd(e)}function sd(e){tn.includes(e)||tn.push(e),od()}function ad(e){let t=tn.indexOf(e);t!==-1&&t>wa&&tn.splice(t,1)}function od(){!ya&&!va&&(va=!0,queueMicrotask(ld))}function ld(){va=!1,ya=!0;for(let e=0;e<tn.length;e++)tn[e](),wa=e;tn.length=0,wa=-1,ya=!1}var Vn,cn,zn,Ac,_a=!0;function cd(e){_a=!1,e(),_a=!0}function ud(e){Vn=e.reactive,zn=e.release,cn=t=>e.effect(t,{scheduler:n=>{_a?id(n):n()}}),Ac=e.raw}function il(e){cn=e}function hd(e){let t=()=>{};return[r=>{let i=cn(r);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(s=>s())}),e._x_effects.add(i),t=()=>{i!==void 0&&(e._x_effects.delete(i),zn(i))},i},()=>{t()}]}function Nc(e,t){let n=!0,r,i=cn(()=>{let s=e();JSON.stringify(s),n?r=s:queueMicrotask(()=>{t(s,r),r=s}),n=!1});return()=>zn(i)}var Oc=[],Sc=[],Cc=[];function dd(e){Cc.push(e)}function io(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Sc.push(t))}function Lc(e){Oc.push(e)}function Ic(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}function Mc(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([n,r])=>{(t===void 0||t.includes(n))&&(r.forEach(i=>i()),delete e._x_attributeCleanups[n])})}function fd(e){var t,n;for((t=e._x_effects)==null||t.forEach(ad);(n=e._x_cleanups)!=null&&n.length;)e._x_cleanups.pop()()}var so=new MutationObserver(co),ao=!1;function oo(){so.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ao=!0}function qc(){gd(),so.disconnect(),ao=!1}var dr=[];function gd(){let e=so.takeRecords();dr.push(()=>e.length>0&&co(e));let t=dr.length;queueMicrotask(()=>{if(dr.length===t)for(;dr.length>0;)dr.shift()()})}function gt(e){if(!ao)return e();qc();let t=e();return oo(),t}var lo=!1,ki=[];function pd(){lo=!0}function md(){lo=!1,co(ki),ki=[]}function co(e){if(lo){ki=ki.concat(e);return}let t=new Set,n=new Set,r=new Map,i=new Map;for(let s=0;s<e.length;s++)if(!e[s].target._x_ignoreMutationObserver&&(e[s].type==="childList"&&(e[s].addedNodes.forEach(a=>a.nodeType===1&&t.add(a)),e[s].removedNodes.forEach(a=>a.nodeType===1&&n.add(a))),e[s].type==="attributes")){let a=e[s].target,o=e[s].attributeName,c=e[s].oldValue,u=()=>{r.has(a)||r.set(a,[]),r.get(a).push({name:o,value:a.getAttribute(o)})},f=()=>{i.has(a)||i.set(a,[]),i.get(a).push(o)};a.hasAttribute(o)&&c===null?u():a.hasAttribute(o)?(f(),u()):f()}i.forEach((s,a)=>{Mc(a,s)}),r.forEach((s,a)=>{Oc.forEach(o=>o(a,s))});for(let s of n)t.has(s)||Sc.forEach(a=>a(s));t.forEach(s=>{s._x_ignoreSelf=!0,s._x_ignore=!0});for(let s of t)n.has(s)||s.isConnected&&(delete s._x_ignoreSelf,delete s._x_ignore,Cc.forEach(a=>a(s)),s._x_ignore=!0,s._x_ignoreSelf=!0);t.forEach(s=>{delete s._x_ignoreSelf,delete s._x_ignore}),t=null,n=null,r=null,i=null}function kc(e){return Br(Bn(e))}function Rr(e,t,n){return e._x_dataStack=[t,...Bn(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter(r=>r!==t)}}function Bn(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Bn(e.host):e.parentNode?Bn(e.parentNode):[]}function Br(e){return new Proxy({objects:e},bd)}var bd={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(n=>Object.prototype.hasOwnProperty.call(n,t)||Reflect.has(n,t))},get({objects:e},t,n){return t=="toJSON"?vd:Reflect.get(e.find(r=>Reflect.has(r,t))||{},t,n)},set({objects:e},t,n,r){const i=e.find(a=>Object.prototype.hasOwnProperty.call(a,t))||e[e.length-1],s=Object.getOwnPropertyDescriptor(i,t);return s!=null&&s.set&&(s!=null&&s.get)?s.set.call(r,n)||!0:Reflect.set(i,t,n)}};function vd(){return Reflect.ownKeys(this).reduce((t,n)=>(t[n]=Reflect.get(this,n),t),{})}function Dc(e){let t=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,n=(r,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([s,{value:a,enumerable:o}])=>{if(o===!1||a===void 0||typeof a=="object"&&a!==null&&a.__v_skip)return;let c=i===""?s:`${i}.${s}`;typeof a=="object"&&a!==null&&a._x_interceptor?r[s]=a.initialize(e,c,s):t(a)&&a!==r&&!(a instanceof Element)&&n(a,c)})};return n(e)}function Rc(e,t=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(r,i,s){return e(this.initialValue,()=>yd(r,i),a=>Ta(r,i,a),i,s)}};return t(n),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let i=n.initialize.bind(n);n.initialize=(s,a,o)=>{let c=r.initialize(s,a,o);return n.initialValue=c,i(s,a,o)}}else n.initialValue=r;return n}}function yd(e,t){return t.split(".").reduce((n,r)=>n[r],e)}function Ta(e,t,n){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=n;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),Ta(e[t[0]],t.slice(1),n)}}var Bc={};function Qt(e,t){Bc[e]=t}function xa(e,t){let n=wd(t);return Object.entries(Bc).forEach(([r,i])=>{Object.defineProperty(e,`$${r}`,{get(){return i(t,n)},enumerable:!1})}),e}function wd(e){let[t,n]=Hc(e),r={interceptor:Rc,...t};return io(e,n),r}function _d(e,t,n,...r){try{return n(...r)}catch(i){Sr(i,e,t)}}function Sr(e,t,n=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}

${n?'Expression: "'+n+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var Ci=!0;function jc(e){let t=Ci;Ci=!1;let n=e();return Ci=t,n}function en(e,t,n={}){let r;return Lt(e,t)(i=>r=i,n),r}function Lt(...e){return Pc(...e)}var Pc=$c;function Td(e){Pc=e}function $c(e,t){let n={};xa(n,e);let r=[n,...Bn(e)],i=typeof t=="function"?xd(r,t):Ad(r,t,e);return _d.bind(null,e,t,i)}function xd(e,t){return(n=()=>{},{scope:r={},params:i=[]}={})=>{let s=t.apply(Br([r,...e]),i);Di(n,s)}}var Ys={};function Ed(e,t){if(Ys[e])return Ys[e];let n=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,s=(()=>{try{let a=new n(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`);return Object.defineProperty(a,"name",{value:`[Alpine] ${e}`}),a}catch(a){return Sr(a,t,e),Promise.resolve()}})();return Ys[e]=s,s}function Ad(e,t,n){let r=Ed(t,n);return(i=()=>{},{scope:s={},params:a=[]}={})=>{r.result=void 0,r.finished=!1;let o=Br([s,...e]);if(typeof r=="function"){let c=r(r,o).catch(u=>Sr(u,n,t));r.finished?(Di(i,r.result,o,a,n),r.result=void 0):c.then(u=>{Di(i,u,o,a,n)}).catch(u=>Sr(u,n,t)).finally(()=>r.result=void 0)}}}function Di(e,t,n,r,i){if(Ci&&typeof t=="function"){let s=t.apply(n,r);s instanceof Promise?s.then(a=>Di(e,a,n,r)).catch(a=>Sr(a,i,t)):e(s)}else typeof t=="object"&&t instanceof Promise?t.then(s=>e(s)):e(t)}var uo="x-";function Kn(e=""){return uo+e}function Nd(e){uo=e}var Ri={};function bt(e,t){return Ri[e]=t,{before(n){if(!Ri[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${e}\` will use the default order of execution`);return}const r=Qe.indexOf(n);Qe.splice(r>=0?r:Qe.indexOf("DEFAULT"),0,e)}}}function Od(e){return Object.keys(Ri).includes(e)}function ho(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let s=Object.entries(e._x_virtualDirectives).map(([o,c])=>({name:o,value:c})),a=Fc(s);s=s.map(o=>a.find(c=>c.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),t=t.concat(s)}let r={};return t.map(Kc((s,a)=>r[s]=a)).filter(Gc).map(Ld(r,n)).sort(Id).map(s=>Cd(e,s))}function Fc(e){return Array.from(e).map(Kc()).filter(t=>!Gc(t))}var Ea=!1,vr=new Map,Uc=Symbol();function Sd(e){Ea=!0;let t=Symbol();Uc=t,vr.set(t,[]);let n=()=>{for(;vr.get(t).length;)vr.get(t).shift()();vr.delete(t)},r=()=>{Ea=!1,n()};e(n),r()}function Hc(e){let t=[],n=o=>t.push(o),[r,i]=hd(e);return t.push(i),[{Alpine:Pr,effect:r,cleanup:n,evaluateLater:Lt.bind(Lt,e),evaluate:en.bind(en,e)},()=>t.forEach(o=>o())]}function Cd(e,t){let n=()=>{},r=Ri[t.type]||n,[i,s]=Hc(e);Ic(e,t.original,s);let a=()=>{e._x_ignore||e._x_ignoreSelf||(r.inline&&r.inline(e,t,i),r=r.bind(r,e,t,i),Ea?vr.get(Uc).push(r):r())};return a.runCleanups=s,a}var Vc=(e,t)=>({name:n,value:r})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:r}),zc=e=>e;function Kc(e=()=>{}){return({name:t,value:n})=>{let{name:r,value:i}=Wc.reduce((s,a)=>a(s),{name:t,value:n});return r!==t&&e(r,t),{name:r,value:i}}}var Wc=[];function fo(e){Wc.push(e)}function Gc({name:e}){return Zc().test(e)}var Zc=()=>new RegExp(`^${uo}([^:^.]+)\\b`);function Ld(e,t){return({name:n,value:r})=>{let i=n.match(Zc()),s=n.match(/:([a-zA-Z0-9\-_:]+)/),a=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=t||e[n]||n;return{type:i?i[1]:null,value:s?s[1]:null,modifiers:a.map(c=>c.replace(".","")),expression:r,original:o}}}var Aa="DEFAULT",Qe=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Aa,"teleport"];function Id(e,t){let n=Qe.indexOf(e.type)===-1?Aa:e.type,r=Qe.indexOf(t.type)===-1?Aa:t.type;return Qe.indexOf(n)-Qe.indexOf(r)}function Tr(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function sn(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(i=>sn(i,t));return}let n=!1;if(t(e,()=>n=!0),n)return;let r=e.firstElementChild;for(;r;)sn(r,t),r=r.nextElementSibling}function Ft(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var sl=!1;function Md(){sl&&Ft("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),sl=!0,document.body||Ft("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Tr(document,"alpine:init"),Tr(document,"alpine:initializing"),oo(),dd(t=>we(t,sn)),io(t=>Wn(t)),Lc((t,n)=>{ho(t,n).forEach(r=>r())});let e=t=>!Ui(t.parentElement,!0);Array.from(document.querySelectorAll(Jc().join(","))).filter(e).forEach(t=>{we(t)}),Tr(document,"alpine:initialized"),setTimeout(()=>{Dd()})}var go=[],Xc=[];function Yc(){return go.map(e=>e())}function Jc(){return go.concat(Xc).map(e=>e())}function Qc(e){go.push(e)}function tu(e){Xc.push(e)}function Ui(e,t=!1){return jr(e,n=>{if((t?Jc():Yc()).some(i=>n.matches(i)))return!0})}function jr(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return jr(e.parentElement,t)}}function qd(e){return Yc().some(t=>e.matches(t))}var eu=[];function kd(e){eu.push(e)}function we(e,t=sn,n=()=>{}){Sd(()=>{t(e,(r,i)=>{n(r,i),eu.forEach(s=>s(r,i)),ho(r,r.attributes).forEach(s=>s()),r._x_ignore&&i()})})}function Wn(e,t=sn){t(e,n=>{fd(n),Mc(n)})}function Dd(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,n,r])=>{Od(n)||r.some(i=>{if(document.querySelector(i))return Ft(`found "${i}", but missing ${t} plugin`),!0})})}var Na=[],po=!1;function mo(e=()=>{}){return queueMicrotask(()=>{po||setTimeout(()=>{Oa()})}),new Promise(t=>{Na.push(()=>{e(),t()})})}function Oa(){for(po=!1;Na.length;)Na.shift()()}function Rd(){po=!0}function bo(e,t){return Array.isArray(t)?al(e,t.join(" ")):typeof t=="object"&&t!==null?Bd(e,t):typeof t=="function"?bo(e,t()):al(e,t)}function al(e,t){let n=i=>i.split(" ").filter(s=>!e.classList.contains(s)).filter(Boolean),r=i=>(e.classList.add(...i),()=>{e.classList.remove(...i)});return t=t===!0?t="":t||"",r(n(t))}function Bd(e,t){let n=o=>o.split(" ").filter(Boolean),r=Object.entries(t).flatMap(([o,c])=>c?n(o):!1).filter(Boolean),i=Object.entries(t).flatMap(([o,c])=>c?!1:n(o)).filter(Boolean),s=[],a=[];return i.forEach(o=>{e.classList.contains(o)&&(e.classList.remove(o),a.push(o))}),r.forEach(o=>{e.classList.contains(o)||(e.classList.add(o),s.push(o))}),()=>{a.forEach(o=>e.classList.add(o)),s.forEach(o=>e.classList.remove(o))}}function Hi(e,t){return typeof t=="object"&&t!==null?jd(e,t):Pd(e,t)}function jd(e,t){let n={};return Object.entries(t).forEach(([r,i])=>{n[r]=e.style[r],r.startsWith("--")||(r=$d(r)),e.style.setProperty(r,i)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{Hi(e,n)}}function Pd(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}function $d(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Sa(e,t=()=>{}){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}bt("transition",(e,{value:t,modifiers:n,expression:r},{evaluate:i})=>{typeof r=="function"&&(r=i(r)),r!==!1&&(!r||typeof r=="boolean"?Ud(e,n,t):Fd(e,r,t))});function Fd(e,t,n){nu(e,bo,""),{enter:i=>{e._x_transition.enter.during=i},"enter-start":i=>{e._x_transition.enter.start=i},"enter-end":i=>{e._x_transition.enter.end=i},leave:i=>{e._x_transition.leave.during=i},"leave-start":i=>{e._x_transition.leave.start=i},"leave-end":i=>{e._x_transition.leave.end=i}}[n](t)}function Ud(e,t,n){nu(e,Hi);let r=!t.includes("in")&&!t.includes("out")&&!n,i=r||t.includes("in")||["enter"].includes(n),s=r||t.includes("out")||["leave"].includes(n);t.includes("in")&&!r&&(t=t.filter((T,A)=>A<t.indexOf("out"))),t.includes("out")&&!r&&(t=t.filter((T,A)=>A>t.indexOf("out")));let a=!t.includes("opacity")&&!t.includes("scale"),o=a||t.includes("opacity"),c=a||t.includes("scale"),u=o?0:1,f=c?fr(t,"scale",95)/100:1,g=fr(t,"delay",0)/1e3,d=fr(t,"origin","center"),p="opacity, transform",m=fr(t,"duration",150)/1e3,_=fr(t,"duration",75)/1e3,y="cubic-bezier(0.4, 0.0, 0.2, 1)";i&&(e._x_transition.enter.during={transformOrigin:d,transitionDelay:`${g}s`,transitionProperty:p,transitionDuration:`${m}s`,transitionTimingFunction:y},e._x_transition.enter.start={opacity:u,transform:`scale(${f})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(e._x_transition.leave.during={transformOrigin:d,transitionDelay:`${g}s`,transitionProperty:p,transitionDuration:`${_}s`,transitionTimingFunction:y},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:u,transform:`scale(${f})`})}function nu(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(r=()=>{},i=()=>{}){Ca(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,i)},out(r=()=>{},i=()=>{}){Ca(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,i)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,r){const i=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let s=()=>i(n);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):s():e._x_transition?e._x_transition.in(n):s();return}e._x_hidePromise=e._x_transition?new Promise((a,o)=>{e._x_transition.out(()=>{},()=>a(r)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>o({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let a=ru(e);a?(a._x_hideChildren||(a._x_hideChildren=[]),a._x_hideChildren.push(e)):i(()=>{let o=c=>{let u=Promise.all([c._x_hidePromise,...(c._x_hideChildren||[]).map(o)]).then(([f])=>f==null?void 0:f());return delete c._x_hidePromise,delete c._x_hideChildren,u};o(e).catch(c=>{if(!c.isFromCancelledTransition)throw c})})})};function ru(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:ru(t)}function Ca(e,t,{during:n,start:r,end:i}={},s=()=>{},a=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(r).length===0&&Object.keys(i).length===0){s(),a();return}let o,c,u;Hd(e,{start(){o=t(e,r)},during(){c=t(e,n)},before:s,end(){o(),u=t(e,i)},after:a,cleanup(){c(),u()}})}function Hd(e,t){let n,r,i,s=Sa(()=>{gt(()=>{n=!0,r||t.before(),i||(t.end(),Oa()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(a){this.beforeCancels.push(a)},cancel:Sa(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},gt(()=>{t.start(),t.during()}),Rd(),requestAnimationFrame(()=>{if(n)return;let a=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,o=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;a===0&&(a=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),gt(()=>{t.before()}),r=!0,requestAnimationFrame(()=>{n||(gt(()=>{t.end()}),Oa(),setTimeout(e._x_transitioning.finish,a+o),i=!0)})})}function fr(e,t,n){if(e.indexOf(t)===-1)return n;const r=e[e.indexOf(t)+1];if(!r||t==="scale"&&isNaN(r))return n;if(t==="duration"||t==="delay"){let i=r.match(/([0-9]+)ms/);if(i)return i[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[r,e[e.indexOf(t)+2]].join(" "):r}var Re=!1;function Pe(e,t=()=>{}){return(...n)=>Re?t(...n):e(...n)}function Vd(e){return(...t)=>Re&&e(...t)}var iu=[];function Vi(e){iu.push(e)}function zd(e,t){iu.forEach(n=>n(e,t)),Re=!0,su(()=>{we(t,(n,r)=>{r(n,()=>{})})}),Re=!1}var La=!1;function Kd(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),Re=!0,La=!0,su(()=>{Wd(t)}),Re=!1,La=!1}function Wd(e){let t=!1;we(e,(r,i)=>{sn(r,(s,a)=>{if(t&&qd(s))return a();t=!0,i(s,a)})})}function su(e){let t=cn;il((n,r)=>{let i=t(n);return zn(i),()=>{}}),e(),il(t)}function au(e,t,n,r=[]){switch(e._x_bindings||(e._x_bindings=Vn({})),e._x_bindings[t]=n,t=r.includes("camel")?ef(t):t,t){case"value":Gd(e,n);break;case"style":Xd(e,n);break;case"class":Zd(e,n);break;case"selected":case"checked":Yd(e,t,n);break;default:ou(e,t,n);break}}function Gd(e,t){if(uu(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=Li(e.value)===t:e.checked=ol(e.value,t));else if(vo(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(n=>ol(n,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")tf(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function Zd(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=bo(e,t)}function Xd(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=Hi(e,t)}function Yd(e,t,n){ou(e,t,n),Qd(e,t,n)}function ou(e,t,n){[null,void 0,!1].includes(n)&&rf(t)?e.removeAttribute(t):(lu(t)&&(n=t),Jd(e,t,n))}function Jd(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}function Qd(e,t,n){e[t]!==n&&(e[t]=n)}function tf(e,t){const n=[].concat(t).map(r=>r+"");Array.from(e.options).forEach(r=>{r.selected=n.includes(r.value)})}function ef(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function ol(e,t){return e==t}function Li(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var nf=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function lu(e){return nf.has(e)}function rf(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function sf(e,t,n){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:cu(e,t,n)}function af(e,t,n,r=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let i=e._x_inlineBindings[t];return i.extract=r,jc(()=>en(e,i.expression))}return cu(e,t,n)}function cu(e,t,n){let r=e.getAttribute(t);return r===null?typeof n=="function"?n():n:r===""?!0:lu(t)?!![t,"true"].includes(r):r}function vo(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function uu(e){return e.type==="radio"||e.localName==="ui-radio"}function hu(e,t){var n;return function(){var r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}}function du(e,t){let n;return function(){let r=this,i=arguments;n||(e.apply(r,i),n=!0,setTimeout(()=>n=!1,t))}}function fu({get:e,set:t},{get:n,set:r}){let i=!0,s,a=cn(()=>{let o=e(),c=n();if(i)r(Js(o)),i=!1;else{let u=JSON.stringify(o),f=JSON.stringify(c);u!==s?r(Js(o)):u!==f&&t(Js(c))}s=JSON.stringify(e()),JSON.stringify(n())});return()=>{zn(a)}}function Js(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function of(e){(Array.isArray(e)?e:[e]).forEach(n=>n(Pr))}var Ye={},ll=!1;function lf(e,t){if(ll||(Ye=Vn(Ye),ll=!0),t===void 0)return Ye[e];Ye[e]=t,Dc(Ye[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Ye[e].init()}function cf(){return Ye}var gu={};function uf(e,t){let n=typeof t!="function"?()=>t:t;return e instanceof Element?pu(e,n()):(gu[e]=n,()=>{})}function hf(e){return Object.entries(gu).forEach(([t,n])=>{Object.defineProperty(e,t,{get(){return(...r)=>n(...r)}})}),e}function pu(e,t,n){let r=[];for(;r.length;)r.pop()();let i=Object.entries(t).map(([a,o])=>({name:a,value:o})),s=Fc(i);return i=i.map(a=>s.find(o=>o.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),ho(e,i,n).map(a=>{r.push(a.runCleanups),a()}),()=>{for(;r.length;)r.pop()()}}var mu={};function df(e,t){mu[e]=t}function ff(e,t){return Object.entries(mu).forEach(([n,r])=>{Object.defineProperty(e,n,{get(){return(...i)=>r.bind(t)(...i)},enumerable:!1})}),e}var gf={get reactive(){return Vn},get release(){return zn},get effect(){return cn},get raw(){return Ac},version:"3.14.3",flushAndStopDeferringMutations:md,dontAutoEvaluateFunctions:jc,disableEffectScheduling:cd,startObservingMutations:oo,stopObservingMutations:qc,setReactivityEngine:ud,onAttributeRemoved:Ic,onAttributesAdded:Lc,closestDataStack:Bn,skipDuringClone:Pe,onlyDuringClone:Vd,addRootSelector:Qc,addInitSelector:tu,interceptClone:Vi,addScopeToNode:Rr,deferMutations:pd,mapAttributes:fo,evaluateLater:Lt,interceptInit:kd,setEvaluator:Td,mergeProxies:Br,extractProp:af,findClosest:jr,onElRemoved:io,closestRoot:Ui,destroyTree:Wn,interceptor:Rc,transition:Ca,setStyles:Hi,mutateDom:gt,directive:bt,entangle:fu,throttle:du,debounce:hu,evaluate:en,initTree:we,nextTick:mo,prefixed:Kn,prefix:Nd,plugin:of,magic:Qt,store:lf,start:Md,clone:Kd,cloneNode:zd,bound:sf,$data:kc,watch:Nc,walk:sn,data:df,bind:uf},Pr=gf;function pf(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return i=>!!n[i]}var mf=Object.freeze({}),bf=Object.prototype.hasOwnProperty,zi=(e,t)=>bf.call(e,t),nn=Array.isArray,xr=e=>bu(e)==="[object Map]",vf=e=>typeof e=="string",yo=e=>typeof e=="symbol",Ki=e=>e!==null&&typeof e=="object",yf=Object.prototype.toString,bu=e=>yf.call(e),vu=e=>bu(e).slice(8,-1),wo=e=>vf(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wf=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},_f=wf(e=>e.charAt(0).toUpperCase()+e.slice(1)),yu=(e,t)=>e!==t&&(e===e||t===t),Ia=new WeakMap,gr=[],le,rn=Symbol("iterate"),Ma=Symbol("Map key iterate");function Tf(e){return e&&e._isEffect===!0}function xf(e,t=mf){Tf(e)&&(e=e.raw);const n=Nf(e,t);return t.lazy||n(),n}function Ef(e){e.active&&(wu(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var Af=0;function Nf(e,t){const n=function(){if(!n.active)return e();if(!gr.includes(n)){wu(n);try{return Sf(),gr.push(n),le=n,e()}finally{gr.pop(),_u(),le=gr[gr.length-1]}}};return n.id=Af++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function wu(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var jn=!0,_o=[];function Of(){_o.push(jn),jn=!1}function Sf(){_o.push(jn),jn=!0}function _u(){const e=_o.pop();jn=e===void 0?!0:e}function Yt(e,t,n){if(!jn||le===void 0)return;let r=Ia.get(e);r||Ia.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(le)||(i.add(le),le.deps.push(i),le.options.onTrack&&le.options.onTrack({effect:le,target:e,type:t,key:n}))}function Be(e,t,n,r,i,s){const a=Ia.get(e);if(!a)return;const o=new Set,c=f=>{f&&f.forEach(g=>{(g!==le||g.allowRecurse)&&o.add(g)})};if(t==="clear")a.forEach(c);else if(n==="length"&&nn(e))a.forEach((f,g)=>{(g==="length"||g>=r)&&c(f)});else switch(n!==void 0&&c(a.get(n)),t){case"add":nn(e)?wo(n)&&c(a.get("length")):(c(a.get(rn)),xr(e)&&c(a.get(Ma)));break;case"delete":nn(e)||(c(a.get(rn)),xr(e)&&c(a.get(Ma)));break;case"set":xr(e)&&c(a.get(rn));break}const u=f=>{f.options.onTrigger&&f.options.onTrigger({effect:f,target:e,key:n,type:t,newValue:r,oldValue:i,oldTarget:s}),f.options.scheduler?f.options.scheduler(f):f()};o.forEach(u)}var Cf=pf("__proto__,__v_isRef,__isVue"),Tu=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(yo)),Lf=xu(),If=xu(!0),cl=Mf();function Mf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=dt(this);for(let s=0,a=this.length;s<a;s++)Yt(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(dt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Of();const r=dt(this)[t].apply(this,n);return _u(),r}}),e}function xu(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_raw"&&s===(e?t?Kf:Ou:t?zf:Nu).get(r))return r;const a=nn(r);if(!e&&a&&zi(cl,i))return Reflect.get(cl,i,s);const o=Reflect.get(r,i,s);return(yo(i)?Tu.has(i):Cf(i))||(e||Yt(r,"get",i),t)?o:qa(o)?!a||!wo(i)?o.value:o:Ki(o)?e?Su(o):Ao(o):o}}var qf=kf();function kf(e=!1){return function(n,r,i,s){let a=n[r];if(!e&&(i=dt(i),a=dt(a),!nn(n)&&qa(a)&&!qa(i)))return a.value=i,!0;const o=nn(n)&&wo(r)?Number(r)<n.length:zi(n,r),c=Reflect.set(n,r,i,s);return n===dt(s)&&(o?yu(i,a)&&Be(n,"set",r,i,a):Be(n,"add",r,i)),c}}function Df(e,t){const n=zi(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&Be(e,"delete",t,void 0,r),i}function Rf(e,t){const n=Reflect.has(e,t);return(!yo(t)||!Tu.has(t))&&Yt(e,"has",t),n}function Bf(e){return Yt(e,"iterate",nn(e)?"length":rn),Reflect.ownKeys(e)}var jf={get:Lf,set:qf,deleteProperty:Df,has:Rf,ownKeys:Bf},Pf={get:If,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},To=e=>Ki(e)?Ao(e):e,xo=e=>Ki(e)?Su(e):e,Eo=e=>e,Wi=e=>Reflect.getPrototypeOf(e);function fi(e,t,n=!1,r=!1){e=e.__v_raw;const i=dt(e),s=dt(t);t!==s&&!n&&Yt(i,"get",t),!n&&Yt(i,"get",s);const{has:a}=Wi(i),o=r?Eo:n?xo:To;if(a.call(i,t))return o(e.get(t));if(a.call(i,s))return o(e.get(s));e!==i&&e.get(t)}function gi(e,t=!1){const n=this.__v_raw,r=dt(n),i=dt(e);return e!==i&&!t&&Yt(r,"has",e),!t&&Yt(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function pi(e,t=!1){return e=e.__v_raw,!t&&Yt(dt(e),"iterate",rn),Reflect.get(e,"size",e)}function ul(e){e=dt(e);const t=dt(this);return Wi(t).has.call(t,e)||(t.add(e),Be(t,"add",e,e)),this}function hl(e,t){t=dt(t);const n=dt(this),{has:r,get:i}=Wi(n);let s=r.call(n,e);s?Au(n,r,e):(e=dt(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?yu(t,a)&&Be(n,"set",e,t,a):Be(n,"add",e,t),this}function dl(e){const t=dt(this),{has:n,get:r}=Wi(t);let i=n.call(t,e);i?Au(t,n,e):(e=dt(e),i=n.call(t,e));const s=r?r.call(t,e):void 0,a=t.delete(e);return i&&Be(t,"delete",e,void 0,s),a}function fl(){const e=dt(this),t=e.size!==0,n=xr(e)?new Map(e):new Set(e),r=e.clear();return t&&Be(e,"clear",void 0,void 0,n),r}function mi(e,t){return function(r,i){const s=this,a=s.__v_raw,o=dt(a),c=t?Eo:e?xo:To;return!e&&Yt(o,"iterate",rn),a.forEach((u,f)=>r.call(i,c(u),c(f),s))}}function bi(e,t,n){return function(...r){const i=this.__v_raw,s=dt(i),a=xr(s),o=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,u=i[e](...r),f=n?Eo:t?xo:To;return!t&&Yt(s,"iterate",c?Ma:rn),{next(){const{value:g,done:d}=u.next();return d?{value:g,done:d}:{value:o?[f(g[0]),f(g[1])]:f(g),done:d}},[Symbol.iterator](){return this}}}}function Se(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${_f(e)} operation ${n}failed: target is readonly.`,dt(this))}return e==="delete"?!1:this}}function $f(){const e={get(s){return fi(this,s)},get size(){return pi(this)},has:gi,add:ul,set:hl,delete:dl,clear:fl,forEach:mi(!1,!1)},t={get(s){return fi(this,s,!1,!0)},get size(){return pi(this)},has:gi,add:ul,set:hl,delete:dl,clear:fl,forEach:mi(!1,!0)},n={get(s){return fi(this,s,!0)},get size(){return pi(this,!0)},has(s){return gi.call(this,s,!0)},add:Se("add"),set:Se("set"),delete:Se("delete"),clear:Se("clear"),forEach:mi(!0,!1)},r={get(s){return fi(this,s,!0,!0)},get size(){return pi(this,!0)},has(s){return gi.call(this,s,!0)},add:Se("add"),set:Se("set"),delete:Se("delete"),clear:Se("clear"),forEach:mi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=bi(s,!1,!1),n[s]=bi(s,!0,!1),t[s]=bi(s,!1,!0),r[s]=bi(s,!0,!0)}),[e,n,t,r]}var[Ff,Uf,iy,sy]=$f();function Eu(e,t){const n=e?Uf:Ff;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(zi(n,i)&&i in r?n:r,i,s)}var Hf={get:Eu(!1)},Vf={get:Eu(!0)};function Au(e,t,n){const r=dt(n);if(r!==n&&t.call(e,r)){const i=vu(e);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Nu=new WeakMap,zf=new WeakMap,Ou=new WeakMap,Kf=new WeakMap;function Wf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gf(e){return e.__v_skip||!Object.isExtensible(e)?0:Wf(vu(e))}function Ao(e){return e&&e.__v_isReadonly?e:Cu(e,!1,jf,Hf,Nu)}function Su(e){return Cu(e,!0,Pf,Vf,Ou)}function Cu(e,t,n,r,i){if(!Ki(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=Gf(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return i.set(e,o),o}function dt(e){return e&&dt(e.__v_raw)||e}function qa(e){return!!(e&&e.__v_isRef===!0)}Qt("nextTick",()=>mo);Qt("dispatch",e=>Tr.bind(Tr,e));Qt("watch",(e,{evaluateLater:t,cleanup:n})=>(r,i)=>{let s=t(r),o=Nc(()=>{let c;return s(u=>c=u),c},i);n(o)});Qt("store",cf);Qt("data",e=>kc(e));Qt("root",e=>Ui(e));Qt("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=Br(Zf(e))),e._x_refs_proxy));function Zf(e){let t=[];return jr(e,n=>{n._x_refs&&t.push(n._x_refs)}),t}var Qs={};function Lu(e){return Qs[e]||(Qs[e]=0),++Qs[e]}function Xf(e,t){return jr(e,n=>{if(n._x_ids&&n._x_ids[t])return!0})}function Yf(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Lu(t))}Qt("id",(e,{cleanup:t})=>(n,r=null)=>{let i=`${n}${r?`-${r}`:""}`;return Jf(e,i,t,()=>{let s=Xf(e,n),a=s?s._x_ids[n]:Lu(n);return r?`${n}-${a}-${r}`:`${n}-${a}`})});Vi((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function Jf(e,t,n,r){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let i=r();return e._x_id[t]=i,n(()=>{delete e._x_id[t]}),i}Qt("el",e=>e);Iu("Focus","focus","focus");Iu("Persist","persist","persist");function Iu(e,t,n){Qt(t,r=>Ft(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}bt("modelable",(e,{expression:t},{effect:n,evaluateLater:r,cleanup:i})=>{let s=r(t),a=()=>{let f;return s(g=>f=g),f},o=r(`${t} = __placeholder`),c=f=>o(()=>{},{scope:{__placeholder:f}}),u=a();c(u),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let f=e._x_model.get,g=e._x_model.set,d=fu({get(){return f()},set(p){g(p)}},{get(){return a()},set(p){c(p)}});i(d)})});bt("teleport",(e,{modifiers:t,expression:n},{cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Ft("x-teleport can only be used on a <template> tag",e);let i=gl(n),s=e.content.cloneNode(!0).firstElementChild;e._x_teleport=s,s._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),s.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(o=>{s.addEventListener(o,c=>{c.stopPropagation(),e.dispatchEvent(new c.constructor(c.type,c))})}),Rr(s,{},e);let a=(o,c,u)=>{u.includes("prepend")?c.parentNode.insertBefore(o,c):u.includes("append")?c.parentNode.insertBefore(o,c.nextSibling):c.appendChild(o)};gt(()=>{a(s,i,t),Pe(()=>{we(s),s._x_ignore=!0})()}),e._x_teleportPutBack=()=>{let o=gl(n);gt(()=>{a(e._x_teleport,o,t)})},r(()=>gt(()=>{s.remove(),Wn(s)}))});var Qf=document.createElement("div");function gl(e){let t=Pe(()=>document.querySelector(e),()=>Qf)();return t||Ft(`Cannot find x-teleport element for selector: "${e}"`),t}var Mu=()=>{};Mu.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};bt("ignore",Mu);bt("effect",Pe((e,{expression:t},{effect:n})=>{n(Lt(e,t))}));function ka(e,t,n,r){let i=e,s=c=>r(c),a={},o=(c,u)=>f=>u(c,f);if(n.includes("dot")&&(t=tg(t)),n.includes("camel")&&(t=eg(t)),n.includes("passive")&&(a.passive=!0),n.includes("capture")&&(a.capture=!0),n.includes("window")&&(i=window),n.includes("document")&&(i=document),n.includes("debounce")){let c=n[n.indexOf("debounce")+1]||"invalid-wait",u=Bi(c.split("ms")[0])?Number(c.split("ms")[0]):250;s=hu(s,u)}if(n.includes("throttle")){let c=n[n.indexOf("throttle")+1]||"invalid-wait",u=Bi(c.split("ms")[0])?Number(c.split("ms")[0]):250;s=du(s,u)}return n.includes("prevent")&&(s=o(s,(c,u)=>{u.preventDefault(),c(u)})),n.includes("stop")&&(s=o(s,(c,u)=>{u.stopPropagation(),c(u)})),n.includes("once")&&(s=o(s,(c,u)=>{c(u),i.removeEventListener(t,s,a)})),(n.includes("away")||n.includes("outside"))&&(i=document,s=o(s,(c,u)=>{e.contains(u.target)||u.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&c(u))})),n.includes("self")&&(s=o(s,(c,u)=>{u.target===e&&c(u)})),(rg(t)||qu(t))&&(s=o(s,(c,u)=>{ig(u,n)||c(u)})),i.addEventListener(t,s,a),()=>{i.removeEventListener(t,s,a)}}function tg(e){return e.replace(/-/g,".")}function eg(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Bi(e){return!Array.isArray(e)&&!isNaN(e)}function ng(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function rg(e){return["keydown","keyup"].includes(e)}function qu(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function ig(e,t){let n=t.filter(s=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(s));if(n.includes("debounce")){let s=n.indexOf("debounce");n.splice(s,Bi((n[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let s=n.indexOf("throttle");n.splice(s,Bi((n[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&pl(e.key).includes(n[0]))return!1;const i=["ctrl","shift","alt","meta","cmd","super"].filter(s=>n.includes(s));return n=n.filter(s=>!i.includes(s)),!(i.length>0&&i.filter(a=>((a==="cmd"||a==="super")&&(a="meta"),e[`${a}Key`])).length===i.length&&(qu(e.type)||pl(e.key).includes(n[0])))}function pl(e){if(!e)return[];e=ng(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(n=>{if(t[n]===e)return n}).filter(n=>n)}bt("model",(e,{modifiers:t,expression:n},{effect:r,cleanup:i})=>{let s=e;t.includes("parent")&&(s=e.parentNode);let a=Lt(s,n),o;typeof n=="string"?o=Lt(s,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?o=Lt(s,`${n()} = __placeholder`):o=()=>{};let c=()=>{let d;return a(p=>d=p),ml(d)?d.get():d},u=d=>{let p;a(m=>p=m),ml(p)?p.set(d):o(()=>{},{scope:{__placeholder:d}})};typeof n=="string"&&e.type==="radio"&&gt(()=>{e.hasAttribute("name")||e.setAttribute("name",n)});var f=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let g=Re?()=>{}:ka(e,f,t,d=>{u(ta(e,t,d,c()))});if(t.includes("fill")&&([void 0,null,""].includes(c())||vo(e)&&Array.isArray(c())||e.tagName.toLowerCase()==="select"&&e.multiple)&&u(ta(e,t,{target:e},c())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=g,i(()=>e._x_removeModelListeners.default()),e.form){let d=ka(e.form,"reset",[],p=>{mo(()=>e._x_model&&e._x_model.set(ta(e,t,{target:e},c())))});i(()=>d())}e._x_model={get(){return c()},set(d){u(d)}},e._x_forceModelUpdate=d=>{d===void 0&&typeof n=="string"&&n.match(/\./)&&(d=""),window.fromModel=!0,gt(()=>au(e,"value",d)),delete window.fromModel},r(()=>{let d=c();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(d)})});function ta(e,t,n,r){return gt(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(vo(e))if(Array.isArray(r)){let i=null;return t.includes("number")?i=ea(n.target.value):t.includes("boolean")?i=Li(n.target.value):i=n.target.value,n.target.checked?r.includes(i)?r:r.concat([i]):r.filter(s=>!sg(s,i))}else return n.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map(i=>{let s=i.value||i.text;return ea(s)}):t.includes("boolean")?Array.from(n.target.selectedOptions).map(i=>{let s=i.value||i.text;return Li(s)}):Array.from(n.target.selectedOptions).map(i=>i.value||i.text);{let i;return uu(e)?n.target.checked?i=n.target.value:i=r:i=n.target.value,t.includes("number")?ea(i):t.includes("boolean")?Li(i):t.includes("trim")?i.trim():i}}})}function ea(e){let t=e?parseFloat(e):null;return ag(t)?t:e}function sg(e,t){return e==t}function ag(e){return!Array.isArray(e)&&!isNaN(e)}function ml(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}bt("cloak",e=>queueMicrotask(()=>gt(()=>e.removeAttribute(Kn("cloak")))));tu(()=>`[${Kn("init")}]`);bt("init",Pe((e,{expression:t},{evaluate:n})=>typeof t=="string"?!!t.trim()&&n(t,{},!1):n(t,{},!1)));bt("text",(e,{expression:t},{effect:n,evaluateLater:r})=>{let i=r(t);n(()=>{i(s=>{gt(()=>{e.textContent=s})})})});bt("html",(e,{expression:t},{effect:n,evaluateLater:r})=>{let i=r(t);n(()=>{i(s=>{gt(()=>{e.innerHTML=s,e._x_ignoreSelf=!0,we(e),delete e._x_ignoreSelf})})})});fo(Vc(":",zc(Kn("bind:"))));var ku=(e,{value:t,modifiers:n,expression:r,original:i},{effect:s,cleanup:a})=>{if(!t){let c={};hf(c),Lt(e,r)(f=>{pu(e,f,i)},{scope:c});return}if(t==="key")return og(e,r);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let o=Lt(e,r);s(()=>o(c=>{c===void 0&&typeof r=="string"&&r.match(/\./)&&(c=""),gt(()=>au(e,t,c,n))})),a(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};ku.inline=(e,{value:t,modifiers:n,expression:r})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:r,extract:!1})};bt("bind",ku);function og(e,t){e._x_keyExpression=t}Qc(()=>`[${Kn("data")}]`);bt("data",(e,{expression:t},{cleanup:n})=>{if(lg(e))return;t=t===""?"{}":t;let r={};xa(r,e);let i={};ff(i,r);let s=en(e,t,{scope:i});(s===void 0||s===!0)&&(s={}),xa(s,e);let a=Vn(s);Dc(a);let o=Rr(e,a);a.init&&en(e,a.init),n(()=>{a.destroy&&en(e,a.destroy),o()})});Vi((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function lg(e){return Re?La?!0:e.hasAttribute("data-has-alpine-state"):!1}bt("show",(e,{modifiers:t,expression:n},{effect:r})=>{let i=Lt(e,n);e._x_doHide||(e._x_doHide=()=>{gt(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{gt(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let s=()=>{e._x_doHide(),e._x_isShown=!1},a=()=>{e._x_doShow(),e._x_isShown=!0},o=()=>setTimeout(a),c=Sa(g=>g?a():s(),g=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,g,a,s):g?o():s()}),u,f=!0;r(()=>i(g=>{!f&&g===u||(t.includes("immediate")&&(g?o():s()),c(g),u=g,f=!1)}))});bt("for",(e,{expression:t},{effect:n,cleanup:r})=>{let i=ug(t),s=Lt(e,i.items),a=Lt(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n(()=>cg(e,i,s,a)),r(()=>{Object.values(e._x_lookup).forEach(o=>gt(()=>{Wn(o),o.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function cg(e,t,n,r){let i=a=>typeof a=="object"&&!Array.isArray(a),s=e;n(a=>{hg(a)&&a>=0&&(a=Array.from(Array(a).keys(),y=>y+1)),a===void 0&&(a=[]);let o=e._x_lookup,c=e._x_prevKeys,u=[],f=[];if(i(a))a=Object.entries(a).map(([y,T])=>{let A=bl(t,T,y,a);r(S=>{f.includes(S)&&Ft("Duplicate key on x-for",e),f.push(S)},{scope:{index:y,...A}}),u.push(A)});else for(let y=0;y<a.length;y++){let T=bl(t,a[y],y,a);r(A=>{f.includes(A)&&Ft("Duplicate key on x-for",e),f.push(A)},{scope:{index:y,...T}}),u.push(T)}let g=[],d=[],p=[],m=[];for(let y=0;y<c.length;y++){let T=c[y];f.indexOf(T)===-1&&p.push(T)}c=c.filter(y=>!p.includes(y));let _="template";for(let y=0;y<f.length;y++){let T=f[y],A=c.indexOf(T);if(A===-1)c.splice(y,0,T),g.push([_,y]);else if(A!==y){let S=c.splice(y,1)[0],D=c.splice(A-1,1)[0];c.splice(y,0,D),c.splice(A,0,S),d.push([S,D])}else m.push(T);_=T}for(let y=0;y<p.length;y++){let T=p[y];T in o&&(gt(()=>{Wn(o[T]),o[T].remove()}),delete o[T])}for(let y=0;y<d.length;y++){let[T,A]=d[y],S=o[T],D=o[A],M=document.createElement("div");gt(()=>{D||Ft('x-for ":key" is undefined or invalid',s,A,o),D.after(M),S.after(D),D._x_currentIfEl&&D.after(D._x_currentIfEl),M.before(S),S._x_currentIfEl&&S.after(S._x_currentIfEl),M.remove()}),D._x_refreshXForScope(u[f.indexOf(A)])}for(let y=0;y<g.length;y++){let[T,A]=g[y],S=T==="template"?s:o[T];S._x_currentIfEl&&(S=S._x_currentIfEl);let D=u[A],M=f[A],z=document.importNode(s.content,!0).firstElementChild,J=Vn(D);Rr(z,J,s),z._x_refreshXForScope=ot=>{Object.entries(ot).forEach(([Q,et])=>{J[Q]=et})},gt(()=>{S.after(z),Pe(()=>we(z))()}),typeof M=="object"&&Ft("x-for key cannot be an object, it must be a string or an integer",s),o[M]=z}for(let y=0;y<m.length;y++)o[m[y]]._x_refreshXForScope(u[f.indexOf(m[y])]);s._x_prevKeys=f})}function ug(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=e.match(r);if(!i)return;let s={};s.items=i[2].trim();let a=i[1].replace(n,"").trim(),o=a.match(t);return o?(s.item=a.replace(t,"").trim(),s.index=o[1].trim(),o[2]&&(s.collection=o[2].trim())):s.item=a,s}function bl(e,t,n,r){let i={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(a=>a.trim()).forEach((a,o)=>{i[a]=t[o]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(a=>a.trim()).forEach(a=>{i[a]=t[a]}):i[e.item]=t,e.index&&(i[e.index]=n),e.collection&&(i[e.collection]=r),i}function hg(e){return!Array.isArray(e)&&!isNaN(e)}function Du(){}Du.inline=(e,{expression:t},{cleanup:n})=>{let r=Ui(e);r._x_refs||(r._x_refs={}),r._x_refs[t]=e,n(()=>delete r._x_refs[t])};bt("ref",Du);bt("if",(e,{expression:t},{effect:n,cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&Ft("x-if can only be used on a <template> tag",e);let i=Lt(e,t),s=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let o=e.content.cloneNode(!0).firstElementChild;return Rr(o,{},e),gt(()=>{e.after(o),Pe(()=>we(o))()}),e._x_currentIfEl=o,e._x_undoIf=()=>{gt(()=>{Wn(o),o.remove()}),delete e._x_currentIfEl},o},a=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};n(()=>i(o=>{o?s():a()})),r(()=>e._x_undoIf&&e._x_undoIf())});bt("id",(e,{expression:t},{evaluate:n})=>{n(t).forEach(i=>Yf(e,i))});Vi((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});fo(Vc("@",zc(Kn("on:"))));bt("on",Pe((e,{value:t,modifiers:n,expression:r},{cleanup:i})=>{let s=r?Lt(e,r):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let a=ka(e,t,n,o=>{s(()=>{},{scope:{$event:o},params:[o]})});i(()=>a())}));Gi("Collapse","collapse","collapse");Gi("Intersect","intersect","intersect");Gi("Focus","trap","focus");Gi("Mask","mask","mask");function Gi(e,t,n){bt(t,r=>Ft(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}Pr.setEvaluator($c);Pr.setReactivityEngine({reactive:Ao,effect:xf,release:Ef,raw:dt});var dg=Pr,Ru=dg,Bu=typeof global=="object"&&global&&global.Object===Object&&global,fg=typeof self=="object"&&self&&self.Object===Object&&self,fe=Bu||fg||Function("return this")(),je=fe.Symbol,ju=Object.prototype,gg=ju.hasOwnProperty,pg=ju.toString,pr=je?je.toStringTag:void 0;function mg(e){var t=gg.call(e,pr),n=e[pr];try{e[pr]=void 0;var r=!0}catch{}var i=pg.call(e);return r&&(t?e[pr]=n:delete e[pr]),i}var bg=Object.prototype,vg=bg.toString;function yg(e){return vg.call(e)}var wg="[object Null]",_g="[object Undefined]",vl=je?je.toStringTag:void 0;function Gn(e){return e==null?e===void 0?_g:wg:vl&&vl in Object(e)?mg(e):yg(e)}function _e(e){return e!=null&&typeof e=="object"}var an=Array.isArray;function $e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Pu(e){return e}var Tg="[object AsyncFunction]",xg="[object Function]",Eg="[object GeneratorFunction]",Ag="[object Proxy]";function No(e){if(!$e(e))return!1;var t=Gn(e);return t==xg||t==Eg||t==Tg||t==Ag}var na=fe["__core-js_shared__"],yl=function(){var e=/[^.]+$/.exec(na&&na.keys&&na.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ng(e){return!!yl&&yl in e}var Og=Function.prototype,Sg=Og.toString;function un(e){if(e!=null){try{return Sg.call(e)}catch{}try{return e+""}catch{}}return""}var Cg=/[\\^$.*+?()[\]{}|]/g,Lg=/^\[object .+?Constructor\]$/,Ig=Function.prototype,Mg=Object.prototype,qg=Ig.toString,kg=Mg.hasOwnProperty,Dg=RegExp("^"+qg.call(kg).replace(Cg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rg(e){if(!$e(e)||Ng(e))return!1;var t=No(e)?Dg:Lg;return t.test(un(e))}function Bg(e,t){return e==null?void 0:e[t]}function hn(e,t){var n=Bg(e,t);return Rg(n)?n:void 0}var Da=hn(fe,"WeakMap"),wl=Object.create,jg=function(){function e(){}return function(t){if(!$e(t))return{};if(wl)return wl(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Pg(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function $g(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Fg=800,Ug=16,Hg=Date.now;function Vg(e){var t=0,n=0;return function(){var r=Hg(),i=Ug-(r-n);if(n=r,i>0){if(++t>=Fg)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function zg(e){return function(){return e}}var ji=function(){try{var e=hn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Kg=ji?function(e,t){return ji(e,"toString",{configurable:!0,enumerable:!1,value:zg(t),writable:!0})}:Pu,Wg=Vg(Kg);function Gg(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Zg=9007199254740991,Xg=/^(?:0|[1-9]\d*)$/;function $u(e,t){var n=typeof e;return t=t??Zg,!!t&&(n=="number"||n!="symbol"&&Xg.test(e))&&e>-1&&e%1==0&&e<t}function Oo(e,t,n){t=="__proto__"&&ji?ji(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $r(e,t){return e===t||e!==e&&t!==t}var Yg=Object.prototype,Jg=Yg.hasOwnProperty;function Fu(e,t,n){var r=e[t];(!(Jg.call(e,t)&&$r(r,n))||n===void 0&&!(t in e))&&Oo(e,t,n)}function Qg(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=void 0;c===void 0&&(c=e[o]),i?Oo(n,o,c):Fu(n,o,c)}return n}var _l=Math.max;function tp(e,t,n){return t=_l(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=_l(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),Pg(e,this,o)}}function ep(e,t){return Wg(tp(e,t,Pu),e+"")}var np=9007199254740991;function Uu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=np}function Zi(e){return e!=null&&Uu(e.length)&&!No(e)}function rp(e,t,n){if(!$e(n))return!1;var r=typeof t;return(r=="number"?Zi(n)&&$u(t,n.length):r=="string"&&t in n)?$r(n[t],e):!1}function ip(e){return ep(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&rp(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var sp=Object.prototype;function So(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||sp;return e===n}function ap(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var op="[object Arguments]";function Tl(e){return _e(e)&&Gn(e)==op}var Hu=Object.prototype,lp=Hu.hasOwnProperty,cp=Hu.propertyIsEnumerable,Ra=Tl(function(){return arguments}())?Tl:function(e){return _e(e)&&lp.call(e,"callee")&&!cp.call(e,"callee")};function up(){return!1}var Vu=typeof qt=="object"&&qt&&!qt.nodeType&&qt,xl=Vu&&typeof kt=="object"&&kt&&!kt.nodeType&&kt,hp=xl&&xl.exports===Vu,El=hp?fe.Buffer:void 0,dp=El?El.isBuffer:void 0,Cr=dp||up,fp="[object Arguments]",gp="[object Array]",pp="[object Boolean]",mp="[object Date]",bp="[object Error]",vp="[object Function]",yp="[object Map]",wp="[object Number]",_p="[object Object]",Tp="[object RegExp]",xp="[object Set]",Ep="[object String]",Ap="[object WeakMap]",Np="[object ArrayBuffer]",Op="[object DataView]",Sp="[object Float32Array]",Cp="[object Float64Array]",Lp="[object Int8Array]",Ip="[object Int16Array]",Mp="[object Int32Array]",qp="[object Uint8Array]",kp="[object Uint8ClampedArray]",Dp="[object Uint16Array]",Rp="[object Uint32Array]",ht={};ht[Sp]=ht[Cp]=ht[Lp]=ht[Ip]=ht[Mp]=ht[qp]=ht[kp]=ht[Dp]=ht[Rp]=!0;ht[fp]=ht[gp]=ht[Np]=ht[pp]=ht[Op]=ht[mp]=ht[bp]=ht[vp]=ht[yp]=ht[wp]=ht[_p]=ht[Tp]=ht[xp]=ht[Ep]=ht[Ap]=!1;function Bp(e){return _e(e)&&Uu(e.length)&&!!ht[Gn(e)]}function Co(e){return function(t){return e(t)}}var zu=typeof qt=="object"&&qt&&!qt.nodeType&&qt,Er=zu&&typeof kt=="object"&&kt&&!kt.nodeType&&kt,jp=Er&&Er.exports===zu,ra=jp&&Bu.process,Pn=function(){try{var e=Er&&Er.require&&Er.require("util").types;return e||ra&&ra.binding&&ra.binding("util")}catch{}}(),Al=Pn&&Pn.isTypedArray,Lo=Al?Co(Al):Bp,Pp=Object.prototype,$p=Pp.hasOwnProperty;function Ku(e,t){var n=an(e),r=!n&&Ra(e),i=!n&&!r&&Cr(e),s=!n&&!r&&!i&&Lo(e),a=n||r||i||s,o=a?ap(e.length,String):[],c=o.length;for(var u in e)(t||$p.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$u(u,c)))&&o.push(u);return o}function Wu(e,t){return function(n){return e(t(n))}}var Fp=Wu(Object.keys,Object),Up=Object.prototype,Hp=Up.hasOwnProperty;function Vp(e){if(!So(e))return Fp(e);var t=[];for(var n in Object(e))Hp.call(e,n)&&n!="constructor"&&t.push(n);return t}function zp(e){return Zi(e)?Ku(e):Vp(e)}function Kp(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Wp=Object.prototype,Gp=Wp.hasOwnProperty;function Zp(e){if(!$e(e))return Kp(e);var t=So(e),n=[];for(var r in e)r=="constructor"&&(t||!Gp.call(e,r))||n.push(r);return n}function Gu(e){return Zi(e)?Ku(e,!0):Zp(e)}var Lr=hn(Object,"create");function Xp(){this.__data__=Lr?Lr(null):{},this.size=0}function Yp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Jp="__lodash_hash_undefined__",Qp=Object.prototype,tm=Qp.hasOwnProperty;function em(e){var t=this.__data__;if(Lr){var n=t[e];return n===Jp?void 0:n}return tm.call(t,e)?t[e]:void 0}var nm=Object.prototype,rm=nm.hasOwnProperty;function im(e){var t=this.__data__;return Lr?t[e]!==void 0:rm.call(t,e)}var sm="__lodash_hash_undefined__";function am(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lr&&t===void 0?sm:t,this}function on(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}on.prototype.clear=Xp;on.prototype.delete=Yp;on.prototype.get=em;on.prototype.has=im;on.prototype.set=am;function om(){this.__data__=[],this.size=0}function Xi(e,t){for(var n=e.length;n--;)if($r(e[n][0],t))return n;return-1}var lm=Array.prototype,cm=lm.splice;function um(e){var t=this.__data__,n=Xi(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():cm.call(t,n,1),--this.size,!0}function hm(e){var t=this.__data__,n=Xi(t,e);return n<0?void 0:t[n][1]}function dm(e){return Xi(this.__data__,e)>-1}function fm(e,t){var n=this.__data__,r=Xi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Ee(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ee.prototype.clear=om;Ee.prototype.delete=um;Ee.prototype.get=hm;Ee.prototype.has=dm;Ee.prototype.set=fm;var Ir=hn(fe,"Map");function gm(){this.size=0,this.__data__={hash:new on,map:new(Ir||Ee),string:new on}}function pm(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Yi(e,t){var n=e.__data__;return pm(t)?n[typeof t=="string"?"string":"hash"]:n.map}function mm(e){var t=Yi(this,e).delete(e);return this.size-=t?1:0,t}function bm(e){return Yi(this,e).get(e)}function vm(e){return Yi(this,e).has(e)}function ym(e,t){var n=Yi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function dn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dn.prototype.clear=gm;dn.prototype.delete=mm;dn.prototype.get=bm;dn.prototype.has=vm;dn.prototype.set=ym;function wm(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Zu=Wu(Object.getPrototypeOf,Object),_m="[object Object]",Tm=Function.prototype,xm=Object.prototype,Xu=Tm.toString,Em=xm.hasOwnProperty,Am=Xu.call(Object);function Nm(e){if(!_e(e)||Gn(e)!=_m)return!1;var t=Zu(e);if(t===null)return!0;var n=Em.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Xu.call(n)==Am}function Om(){this.__data__=new Ee,this.size=0}function Sm(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Cm(e){return this.__data__.get(e)}function Lm(e){return this.__data__.has(e)}var Im=200;function Mm(e,t){var n=this.__data__;if(n instanceof Ee){var r=n.__data__;if(!Ir||r.length<Im-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dn(r)}return n.set(e,t),this.size=n.size,this}function ce(e){var t=this.__data__=new Ee(e);this.size=t.size}ce.prototype.clear=Om;ce.prototype.delete=Sm;ce.prototype.get=Cm;ce.prototype.has=Lm;ce.prototype.set=Mm;var Yu=typeof qt=="object"&&qt&&!qt.nodeType&&qt,Nl=Yu&&typeof kt=="object"&&kt&&!kt.nodeType&&kt,qm=Nl&&Nl.exports===Yu,Ol=qm?fe.Buffer:void 0,Sl=Ol?Ol.allocUnsafe:void 0;function Ju(e,t){if(t)return e.slice();var n=e.length,r=Sl?Sl(n):new e.constructor(n);return e.copy(r),r}function km(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Dm(){return[]}var Rm=Object.prototype,Bm=Rm.propertyIsEnumerable,Cl=Object.getOwnPropertySymbols,jm=Cl?function(e){return e==null?[]:(e=Object(e),km(Cl(e),function(t){return Bm.call(e,t)}))}:Dm;function Pm(e,t,n){var r=t(e);return an(e)?r:wm(r,n(e))}function Ba(e){return Pm(e,zp,jm)}var ja=hn(fe,"DataView"),Pa=hn(fe,"Promise"),$a=hn(fe,"Set"),Ll="[object Map]",$m="[object Object]",Il="[object Promise]",Ml="[object Set]",ql="[object WeakMap]",kl="[object DataView]",Fm=un(ja),Um=un(Ir),Hm=un(Pa),Vm=un($a),zm=un(Da),Wt=Gn;(ja&&Wt(new ja(new ArrayBuffer(1)))!=kl||Ir&&Wt(new Ir)!=Ll||Pa&&Wt(Pa.resolve())!=Il||$a&&Wt(new $a)!=Ml||Da&&Wt(new Da)!=ql)&&(Wt=function(e){var t=Gn(e),n=t==$m?e.constructor:void 0,r=n?un(n):"";if(r)switch(r){case Fm:return kl;case Um:return Ll;case Hm:return Il;case Vm:return Ml;case zm:return ql}return t});var Km=Object.prototype,Wm=Km.hasOwnProperty;function Gm(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Wm.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Pi=fe.Uint8Array;function Io(e){var t=new e.constructor(e.byteLength);return new Pi(t).set(new Pi(e)),t}function Zm(e,t){var n=Io(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var Xm=/\w*$/;function Ym(e){var t=new e.constructor(e.source,Xm.exec(e));return t.lastIndex=e.lastIndex,t}var Dl=je?je.prototype:void 0,Rl=Dl?Dl.valueOf:void 0;function Jm(e){return Rl?Object(Rl.call(e)):{}}function Qu(e,t){var n=t?Io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Qm="[object Boolean]",tb="[object Date]",eb="[object Map]",nb="[object Number]",rb="[object RegExp]",ib="[object Set]",sb="[object String]",ab="[object Symbol]",ob="[object ArrayBuffer]",lb="[object DataView]",cb="[object Float32Array]",ub="[object Float64Array]",hb="[object Int8Array]",db="[object Int16Array]",fb="[object Int32Array]",gb="[object Uint8Array]",pb="[object Uint8ClampedArray]",mb="[object Uint16Array]",bb="[object Uint32Array]";function vb(e,t,n){var r=e.constructor;switch(t){case ob:return Io(e);case Qm:case tb:return new r(+e);case lb:return Zm(e);case cb:case ub:case hb:case db:case fb:case gb:case pb:case mb:case bb:return Qu(e,n);case eb:return new r;case nb:case sb:return new r(e);case rb:return Ym(e);case ib:return new r;case ab:return Jm(e)}}function th(e){return typeof e.constructor=="function"&&!So(e)?jg(Zu(e)):{}}var yb="[object Map]";function wb(e){return _e(e)&&Wt(e)==yb}var Bl=Pn&&Pn.isMap,_b=Bl?Co(Bl):wb,Tb="[object Set]";function xb(e){return _e(e)&&Wt(e)==Tb}var jl=Pn&&Pn.isSet,Eb=jl?Co(jl):xb,Ab=1,eh="[object Arguments]",Nb="[object Array]",Ob="[object Boolean]",Sb="[object Date]",Cb="[object Error]",nh="[object Function]",Lb="[object GeneratorFunction]",Ib="[object Map]",Mb="[object Number]",rh="[object Object]",qb="[object RegExp]",kb="[object Set]",Db="[object String]",Rb="[object Symbol]",Bb="[object WeakMap]",jb="[object ArrayBuffer]",Pb="[object DataView]",$b="[object Float32Array]",Fb="[object Float64Array]",Ub="[object Int8Array]",Hb="[object Int16Array]",Vb="[object Int32Array]",zb="[object Uint8Array]",Kb="[object Uint8ClampedArray]",Wb="[object Uint16Array]",Gb="[object Uint32Array]",lt={};lt[eh]=lt[Nb]=lt[jb]=lt[Pb]=lt[Ob]=lt[Sb]=lt[$b]=lt[Fb]=lt[Ub]=lt[Hb]=lt[Vb]=lt[Ib]=lt[Mb]=lt[rh]=lt[qb]=lt[kb]=lt[Db]=lt[Rb]=lt[zb]=lt[Kb]=lt[Wb]=lt[Gb]=!0;lt[Cb]=lt[nh]=lt[Bb]=!1;function Ii(e,t,n,r,i,s){var a,o=t&Ab;if(a!==void 0)return a;if(!$e(e))return e;var c=an(e);if(c)a=Gm(e);else{var u=Wt(e),f=u==nh||u==Lb;if(Cr(e))return Ju(e,o);if(u==rh||u==eh||f&&!i)a=f?{}:th(e);else{if(!lt[u])return i?e:{};a=vb(e,u,o)}}s||(s=new ce);var g=s.get(e);if(g)return g;s.set(e,a),Eb(e)?e.forEach(function(m){a.add(Ii(m,t,n,m,e,s))}):_b(e)&&e.forEach(function(m,_){a.set(_,Ii(m,t,n,_,e,s))});var d=Ba,p=c?void 0:d(e);return Gg(p||e,function(m,_){p&&(_=m,m=e[_]),Fu(a,_,Ii(m,t,n,_,e,s))}),a}var Zb=1,Xb=4;function kn(e){return Ii(e,Zb|Xb)}var Yb="__lodash_hash_undefined__";function Jb(e){return this.__data__.set(e,Yb),this}function Qb(e){return this.__data__.has(e)}function $i(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new dn;++t<n;)this.add(e[t])}$i.prototype.add=$i.prototype.push=Jb;$i.prototype.has=Qb;function t1(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function e1(e,t){return e.has(t)}var n1=1,r1=2;function ih(e,t,n,r,i,s){var a=n&n1,o=e.length,c=t.length;if(o!=c&&!(a&&c>o))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var g=-1,d=!0,p=n&r1?new $i:void 0;for(s.set(e,t),s.set(t,e);++g<o;){var m=e[g],_=t[g];if(r)var y=a?r(_,m,g,t,e,s):r(m,_,g,e,t,s);if(y!==void 0){if(y)continue;d=!1;break}if(p){if(!t1(t,function(T,A){if(!e1(p,A)&&(m===T||i(m,T,n,r,s)))return p.push(A)})){d=!1;break}}else if(!(m===_||i(m,_,n,r,s))){d=!1;break}}return s.delete(e),s.delete(t),d}function i1(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function s1(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var a1=1,o1=2,l1="[object Boolean]",c1="[object Date]",u1="[object Error]",h1="[object Map]",d1="[object Number]",f1="[object RegExp]",g1="[object Set]",p1="[object String]",m1="[object Symbol]",b1="[object ArrayBuffer]",v1="[object DataView]",Pl=je?je.prototype:void 0,ia=Pl?Pl.valueOf:void 0;function y1(e,t,n,r,i,s,a){switch(n){case v1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b1:return!(e.byteLength!=t.byteLength||!s(new Pi(e),new Pi(t)));case l1:case c1:case d1:return $r(+e,+t);case u1:return e.name==t.name&&e.message==t.message;case f1:case p1:return e==t+"";case h1:var o=i1;case g1:var c=r&a1;if(o||(o=s1),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=o1,a.set(e,t);var f=ih(o(e),o(t),r,i,s,a);return a.delete(e),f;case m1:if(ia)return ia.call(e)==ia.call(t)}return!1}var w1=1,_1=Object.prototype,T1=_1.hasOwnProperty;function x1(e,t,n,r,i,s){var a=n&w1,o=Ba(e),c=o.length,u=Ba(t),f=u.length;if(c!=f&&!a)return!1;for(var g=c;g--;){var d=o[g];if(!(a?d in t:T1.call(t,d)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var _=!0;s.set(e,t),s.set(t,e);for(var y=a;++g<c;){d=o[g];var T=e[d],A=t[d];if(r)var S=a?r(A,T,d,t,e,s):r(T,A,d,e,t,s);if(!(S===void 0?T===A||i(T,A,n,r,s):S)){_=!1;break}y||(y=d=="constructor")}if(_&&!y){var D=e.constructor,M=t.constructor;D!=M&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof M=="function"&&M instanceof M)&&(_=!1)}return s.delete(e),s.delete(t),_}var E1=1,$l="[object Arguments]",Fl="[object Array]",vi="[object Object]",A1=Object.prototype,Ul=A1.hasOwnProperty;function N1(e,t,n,r,i,s){var a=an(e),o=an(t),c=a?Fl:Wt(e),u=o?Fl:Wt(t);c=c==$l?vi:c,u=u==$l?vi:u;var f=c==vi,g=u==vi,d=c==u;if(d&&Cr(e)){if(!Cr(t))return!1;a=!0,f=!1}if(d&&!f)return s||(s=new ce),a||Lo(e)?ih(e,t,n,r,i,s):y1(e,t,c,n,r,i,s);if(!(n&E1)){var p=f&&Ul.call(e,"__wrapped__"),m=g&&Ul.call(t,"__wrapped__");if(p||m){var _=p?e.value():e,y=m?t.value():t;return s||(s=new ce),i(_,y,n,r,s)}}return d?(s||(s=new ce),x1(e,t,n,r,i,s)):!1}function sh(e,t,n,r,i){return e===t?!0:e==null||t==null||!_e(e)&&!_e(t)?e!==e&&t!==t:N1(e,t,n,r,sh,i)}function O1(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return t}}var S1=O1();function Fa(e,t,n){(n!==void 0&&!$r(e[t],n)||n===void 0&&!(t in e))&&Oo(e,t,n)}function C1(e){return _e(e)&&Zi(e)}function Ua(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function L1(e){return Qg(e,Gu(e))}function I1(e,t,n,r,i,s,a){var o=Ua(e,n),c=Ua(t,n),u=a.get(c);if(u){Fa(e,n,u);return}var f=s?s(o,c,n+"",e,t,a):void 0,g=f===void 0;if(g){var d=an(c),p=!d&&Cr(c),m=!d&&!p&&Lo(c);f=c,d||p||m?an(o)?f=o:C1(o)?f=$g(o):p?(g=!1,f=Ju(c,!0)):m?(g=!1,f=Qu(c,!0)):f=[]:Nm(c)||Ra(c)?(f=o,Ra(o)?f=L1(o):(!$e(o)||No(o))&&(f=th(c))):g=!1}g&&(a.set(c,f),i(f,c,r,s,a),a.delete(c)),Fa(e,n,f)}function ah(e,t,n,r,i){e!==t&&S1(t,function(s,a){if(i||(i=new ce),$e(s))I1(e,t,a,n,ah,r,i);else{var o=r?r(Ua(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),Fa(e,a,o)}},Gu)}function Mo(e,t){return sh(e,t)}var De=ip(function(e,t,n){ah(e,t,n)}),P=(e=>(e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e))(P||{});class he{constructor(t,n,r={}){this.attrName=t,this.keyName=n;const i=P.TYPE&P.ATTRIBUTE;this.scope=r.scope!=null?r.scope&P.LEVEL|i:P.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(t){return Array.from(t.attributes).map(n=>n.name)}add(t,n){return this.canAdd(t,n)?(t.setAttribute(this.keyName,n),!0):!1}canAdd(t,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const n=t.getAttribute(this.keyName);return this.canAdd(t,n)&&n?n:""}}class Dn extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const oh=class Ha{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,n=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(n){let r=null;try{r=t.parentNode}catch{return null}return this.find(r,n)}return null}create(t,n,r){const i=this.query(n);if(i==null)throw new Dn(`Unable to create ${n} blot`);const s=i,a=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(r),o=new s(t,a,r);return Ha.blots.set(o.domNode,o),o}find(t,n=!1){return Ha.find(t,n)}query(t,n=P.ANY){let r;return typeof t=="string"?r=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?r=this.types.text:typeof t=="number"?t&P.LEVEL&P.BLOCK?r=this.types.block:t&P.LEVEL&P.INLINE&&(r=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[t.tagName]),r==null?null:"scope"in r&&n&P.LEVEL&r.scope&&n&P.TYPE&r.scope?r:null}register(...t){return t.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new Dn("Invalid definition");if(r&&n.blotName==="abstract")throw new Dn("Cannot register abstract class");const s=r?n.blotName:i?n.attrName:void 0;return this.types[s]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(a=>a.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(a=>{(this.tags[a]==null||n.className==null)&&(this.tags[a]=n)}))),n})}};oh.blots=new WeakMap;let $n=oh;function Hl(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${t}-`)===0)}class M1 extends he{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(t,n){return this.canAdd(t,n)?(this.remove(t),t.classList.add(`${this.keyName}-${n}`),!0):!1}remove(t){Hl(t,this.keyName).forEach(n=>{t.classList.remove(n)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const n=(Hl(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,n)?n:""}}const te=M1;function sa(e){const t=e.split("-"),n=t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return t[0]+n}class q1 extends he{static keys(t){return(t.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(t,n){return this.canAdd(t,n)?(t.style[sa(this.keyName)]=n,!0):!1}remove(t){t.style[sa(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const n=t.style[sa(this.keyName)];return this.canAdd(t,n)?n:""}}const Fe=q1;class k1{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,n){n?t.add(this.domNode,n)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=$n.find(this.domNode);if(t==null)return;const n=he.keys(this.domNode),r=te.keys(this.domNode),i=Fe.keys(this.domNode);n.concat(r).concat(i).forEach(s=>{const a=t.scroll.query(s,P.ATTRIBUTE);a instanceof he&&(this.attributes[a.attrName]=a)})}copy(t){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);t.format(n,r)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,n)=>(t[n]=this.attributes[n].value(this.domNode),t),{})}}const Ji=k1,lh=class{constructor(t,n){this.scroll=t,this.domNode=n,$n.blots.set(n,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new Dn("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof t=="string"?(r=t.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof t=="number"&&(r=t),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),$n.blots.delete(this.domNode)}deleteAt(t,n){this.isolate(t,n).remove()}formatAt(t,n,r,i){const s=this.isolate(t,n);if(this.scroll.query(r,P.BLOT)!=null&&i)s.wrap(r,i);else if(this.scroll.query(r,P.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);s.wrap(a),a.format(r,i)}}insertAt(t,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),s=this.split(t);this.parent.insertBefore(i,s||void 0)}isolate(t,n){const r=this.split(t);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(t,n){return t===0?this:this.next}update(t,n){}wrap(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Dn(`Cannot wrap ${t}`);return r.appendChild(this),r}};lh.blotName="abstract";let ch=lh;const uh=class extends ch{static value(t){return!0}index(t,n){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(t,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};uh.scope=P.INLINE_BLOT;let D1=uh;const Ot=D1;class R1{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const n=t.slice(1);this.append(...n)}}at(t){const n=this.iterator();let r=n();for(;r&&t>0;)t-=1,r=n();return r}contains(t){const n=this.iterator();let r=n();for(;r;){if(r===t)return!0;r=n()}return!1}indexOf(t){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===t)return i;i+=1,r=n()}return-1}insertBefore(t,n){t!=null&&(this.remove(t),t.next=n,n!=null?(t.prev=n.prev,n.prev!=null&&(n.prev.next=t),n.prev=t,n===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let n=0,r=this.head;for(;r!=null;){if(r===t)return n;n+=r.length(),r=r.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const n=t;return t!=null&&(t=t.next),n}}find(t,n=!1){const r=this.iterator();let i=r();for(;i;){const s=i.length();if(t<s||n&&t===s&&(i.next==null||i.next.length()!==0))return[i,t];t-=s,i=r()}return[null,0]}forEach(t){const n=this.iterator();let r=n();for(;r;)t(r),r=n()}forEachAt(t,n,r){if(n<=0)return;const[i,s]=this.find(t);let a=t-s;const o=this.iterator(i);let c=o();for(;c&&a<t+n;){const u=c.length();t>a?r(c,t-a,Math.min(n,a+u-t)):r(c,0,Math.min(u,t+n-a)),a+=u,c=o()}}map(t){return this.reduce((n,r)=>(n.push(t(r)),n),[])}reduce(t,n){const r=this.iterator();let i=r();for(;i;)n=t(n,i),i=r();return n}}function Vl(e,t){const n=t.find(e);if(n)return n;try{return t.create(e)}catch{const r=t.create(P.INLINE);return Array.from(e.childNodes).forEach(i=>{r.domNode.appendChild(i)}),e.parentNode&&e.parentNode.replaceChild(r.domNode,e),r.attach(),r}}const hh=class Ce extends ch{constructor(t,n){super(t,n),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Ce.uiClass&&this.uiNode.classList.add(Ce.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new R1,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const n=Vl(t,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof Dn)return;throw n}})}deleteAt(t,n){if(t===0&&n===this.length())return this.remove();this.children.forEachAt(t,n,(r,i,s)=>{r.deleteAt(i,s)})}descendant(t,n=0){const[r,i]=this.children.find(n);return t.blotName==null&&t(r)||t.blotName!=null&&r instanceof t?[r,i]:r instanceof Ce?r.descendant(t,i):[null,-1]}descendants(t,n=0,r=Number.MAX_VALUE){let i=[],s=r;return this.children.forEachAt(n,r,(a,o,c)=>{(t.blotName==null&&t(a)||t.blotName!=null&&a instanceof t)&&i.push(a),a instanceof Ce&&(i=i.concat(a.descendants(t,o,s))),s-=c}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(n=>{t||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===P.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),t=!0):n instanceof Ce?n.unwrap():n.remove())})}formatAt(t,n,r,i){this.children.forEachAt(t,n,(s,a,o)=>{s.formatAt(a,o,r,i)})}insertAt(t,n,r){const[i,s]=this.children.find(t);if(i)i.insertAt(s,n,r);else{const a=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(a)}}insertBefore(t,n){t.parent!=null&&t.parent.children.remove(t);let r=null;this.children.insertBefore(t,n||null),t.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(t.domNode,r),t.attach()}length(){return this.children.reduce((t,n)=>t+n.length(),0)}moveChildren(t,n){this.children.forEach(r=>{t.insertBefore(r,n)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(t,n=!1){const[r,i]=this.children.find(t,n),s=[[this,t]];return r instanceof Ce?s.concat(r.path(i,n)):(r!=null&&s.push([r,i]),s)}removeChild(t){this.children.remove(t)}replaceWith(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;return r instanceof Ce&&this.moveChildren(r),super.replaceWith(r)}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(t,this.length(),(i,s,a)=>{const o=i.split(s,n);o!=null&&r.appendChild(o)}),r}splitAfter(t){const n=this.clone();for(;t.next!=null;)n.appendChild(t.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,n){const r=[],i=[];t.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(r.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(s);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),r.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,a)=>s===a?0:s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let a=null;s.nextSibling!=null&&(a=this.scroll.find(s.nextSibling));const o=Vl(s,this.scroll);(o.next!==a||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,a||void 0))}),this.enforceAllowedChildren()}};hh.uiClass="";let B1=hh;const Xt=B1;function j1(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}const Sn=class Cn extends Xt{static create(t){return super.create(t)}static formats(t,n){const r=n.query(Cn.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new Ji(this.domNode)}format(t,n){if(t===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof Cn||(r=r.wrap(Cn.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(t,P.INLINE);if(r==null)return;r instanceof he?this.attributes.attribute(r,n):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n)}}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,r,i){this.formats()[r]!=null||this.scroll.query(r,P.ATTRIBUTE)?this.isolate(t,n).format(r,i):super.formatAt(t,n,r,i)}optimize(t){super.optimize(t);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof Cn&&r.prev===this&&j1(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(t,n){const r=super.replaceWith(t,n);return this.attributes.copy(r),r}update(t,n){super.update(t,n),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(t,n){const r=super.wrap(t,n);return r instanceof Cn&&this.attributes.move(r),r}};Sn.allowedChildren=[Sn,Ot],Sn.blotName="inline",Sn.scope=P.INLINE_BLOT,Sn.tagName="SPAN";let P1=Sn;const qo=P1,Ln=class Va extends Xt{static create(t){return super.create(t)}static formats(t,n){const r=n.query(Va.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new Ji(this.domNode)}format(t,n){const r=this.scroll.query(t,P.BLOCK);r!=null&&(r instanceof he?this.attributes.attribute(r,n):t===this.statics.blotName&&!n?this.replaceWith(Va.blotName):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n))}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,r,i){this.scroll.query(r,P.BLOCK)!=null?this.format(r,i):super.formatAt(t,n,r,i)}insertAt(t,n,r){if(r==null||this.scroll.query(n,P.INLINE)!=null)super.insertAt(t,n,r);else{const i=this.split(t);if(i!=null){const s=this.scroll.create(n,r);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,n){const r=super.replaceWith(t,n);return this.attributes.copy(r),r}update(t,n){super.update(t,n),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Ln.blotName="block",Ln.scope=P.BLOCK_BLOT,Ln.tagName="P",Ln.allowedChildren=[qo,Ln,Ot];let $1=Ln;const Mr=$1,za=class extends Xt{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,n){super.deleteAt(t,n),this.enforceAllowedChildren()}formatAt(t,n,r,i){super.formatAt(t,n,r,i),this.enforceAllowedChildren()}insertAt(t,n,r){super.insertAt(t,n,r),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};za.blotName="container",za.scope=P.BLOCK_BLOT;let F1=za;const Qi=F1;class U1 extends Ot{static formats(t,n){}format(t,n){super.formatAt(0,this.length(),t,n)}formatAt(t,n,r,i){t===0&&n===this.length()?this.format(r,i):super.formatAt(t,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Dt=U1,H1={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},V1=100,In=class extends Xt{constructor(t,n){super(null,n),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,H1),this.attach()}create(t,n){return this.registry.create(this,t,n)}find(t,n=!1){const r=this.registry.find(t,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(t,n=P.ANY){return this.registry.query(t,n)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,n){this.update(),t===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(t,n)}formatAt(t,n,r,i){this.update(),super.formatAt(t,n,r,i)}insertAt(t,n,r){this.update(),super.insertAt(t,n,r)}optimize(t=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const s=(c,u=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(r.has(c.domNode)||r.set(c.domNode,[]),u&&s(c.parent))},a=c=>{r.has(c.domNode)&&(c instanceof Xt&&c.children.forEach(a),r.delete(c.domNode),c.optimize(n))};let o=t;for(let c=0;o.length>0;c+=1){if(c>=V1)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(u=>{const f=this.find(u.target,!0);f!=null&&(f.domNode===u.target&&(u.type==="childList"?(s(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(g=>{const d=this.find(g,!1);s(d,!1),d instanceof Xt&&d.children.forEach(p=>{s(p,!1)})})):u.type==="attributes"&&s(f.prev)),s(f))}),this.children.forEach(a),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)t.push(i.pop())}}update(t,n={}){t=t||this.observer.takeRecords();const r=new WeakMap;t.map(i=>{const s=this.find(i.target,!0);return s==null?null:r.has(s.domNode)?(r.get(s.domNode).push(i),null):(r.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(t,n)}};In.blotName="scroll",In.defaultChild=Mr,In.allowedChildren=[Mr,Qi],In.scope=P.BLOCK_BLOT,In.tagName="DIV";let z1=In;const ko=z1,Ka=class dh extends Ot{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,n){super(t,n),this.text=this.statics.value(this.domNode)}deleteAt(t,n){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+n)}index(t,n){return this.domNode===t?n:-1}insertAt(t,n,r){r==null?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,n,r)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof dh&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,n=!1){return[this.domNode,t]}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(t,n){t.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Ka.blotName="text",Ka.scope=P.INLINE_BLOT;let K1=Ka;const Fi=K1,W1=Object.freeze(Object.defineProperty({__proto__:null,Attributor:he,AttributorStore:Ji,BlockBlot:Mr,ClassAttributor:te,ContainerBlot:Qi,EmbedBlot:Dt,InlineBlot:qo,LeafBlot:Ot,ParentBlot:Xt,Registry:$n,Scope:P,ScrollBlot:ko,StyleAttributor:Fe,TextBlot:Fi},Symbol.toStringTag,{value:"Module"}));var yi={exports:{}},aa,zl;function G1(){if(zl)return aa;zl=1;var e=-1,t=1,n=0;function r(b,N,w,I,C){if(b===N)return b?[[n,b]]:[];if(w!=null){var O=Q(b,N,w);if(O)return O}var L=o(b,N),B=b.substring(0,L);b=b.substring(L),N=N.substring(L),L=u(b,N);var $=b.substring(b.length-L);b=b.substring(0,b.length-L),N=N.substring(0,N.length-L);var k=i(b,N);return B&&k.unshift([n,B]),$&&k.push([n,$]),A(k,C),I&&g(k),k}function i(b,N){var w;if(!b)return[[t,N]];if(!N)return[[e,b]];var I=b.length>N.length?b:N,C=b.length>N.length?N:b,O=I.indexOf(C);if(O!==-1)return w=[[t,I.substring(0,O)],[n,C],[t,I.substring(O+C.length)]],b.length>N.length&&(w[0][0]=w[2][0]=e),w;if(C.length===1)return[[e,b],[t,N]];var L=f(b,N);if(L){var B=L[0],$=L[1],k=L[2],K=L[3],H=L[4],G=r(B,k),Z=r($,K);return G.concat([[n,H]],Z)}return s(b,N)}function s(b,N){for(var w=b.length,I=N.length,C=Math.ceil((w+I)/2),O=C,L=2*C,B=new Array(L),$=new Array(L),k=0;k<L;k++)B[k]=-1,$[k]=-1;B[O+1]=0,$[O+1]=0;for(var K=w-I,H=K%2!==0,G=0,Z=0,U=0,ct=0,ft=0;ft<C;ft++){for(var W=-ft+G;W<=ft-Z;W+=2){var nt=O+W,tt;W===-ft||W!==ft&&B[nt-1]<B[nt+1]?tt=B[nt+1]:tt=B[nt-1]+1;for(var rt=tt-W;tt<w&&rt<I&&b.charAt(tt)===N.charAt(rt);)tt++,rt++;if(B[nt]=tt,tt>w)Z+=2;else if(rt>I)G+=2;else if(H){var st=O+K-W;if(st>=0&&st<L&&$[st]!==-1){var at=w-$[st];if(tt>=at)return a(b,N,tt,rt)}}}for(var pt=-ft+U;pt<=ft-ct;pt+=2){var st=O+pt,at;pt===-ft||pt!==ft&&$[st-1]<$[st+1]?at=$[st+1]:at=$[st-1]+1;for(var xt=at-pt;at<w&&xt<I&&b.charAt(w-at-1)===N.charAt(I-xt-1);)at++,xt++;if($[st]=at,at>w)ct+=2;else if(xt>I)U+=2;else if(!H){var nt=O+K-pt;if(nt>=0&&nt<L&&B[nt]!==-1){var tt=B[nt],rt=O+tt-nt;if(at=w-at,tt>=at)return a(b,N,tt,rt)}}}}return[[e,b],[t,N]]}function a(b,N,w,I){var C=b.substring(0,w),O=N.substring(0,I),L=b.substring(w),B=N.substring(I),$=r(C,O),k=r(L,B);return $.concat(k)}function o(b,N){if(!b||!N||b.charAt(0)!==N.charAt(0))return 0;for(var w=0,I=Math.min(b.length,N.length),C=I,O=0;w<C;)b.substring(O,C)==N.substring(O,C)?(w=C,O=w):I=C,C=Math.floor((I-w)/2+w);return S(b.charCodeAt(C-1))&&C--,C}function c(b,N){var w=b.length,I=N.length;if(w==0||I==0)return 0;w>I?b=b.substring(w-I):w<I&&(N=N.substring(0,w));var C=Math.min(w,I);if(b==N)return C;for(var O=0,L=1;;){var B=b.substring(C-L),$=N.indexOf(B);if($==-1)return O;L+=$,($==0||b.substring(C-L)==N.substring(0,L))&&(O=L,L++)}}function u(b,N){if(!b||!N||b.slice(-1)!==N.slice(-1))return 0;for(var w=0,I=Math.min(b.length,N.length),C=I,O=0;w<C;)b.substring(b.length-C,b.length-O)==N.substring(N.length-C,N.length-O)?(w=C,O=w):I=C,C=Math.floor((I-w)/2+w);return D(b.charCodeAt(b.length-C))&&C--,C}function f(b,N){var w=b.length>N.length?b:N,I=b.length>N.length?N:b;if(w.length<4||I.length*2<w.length)return null;function C(Z,U,ct){for(var ft=Z.substring(ct,ct+Math.floor(Z.length/4)),W=-1,nt="",tt,rt,st,at;(W=U.indexOf(ft,W+1))!==-1;){var pt=o(Z.substring(ct),U.substring(W)),xt=u(Z.substring(0,ct),U.substring(0,W));nt.length<xt+pt&&(nt=U.substring(W-xt,W)+U.substring(W,W+pt),tt=Z.substring(0,ct-xt),rt=Z.substring(ct+pt),st=U.substring(0,W-xt),at=U.substring(W+pt))}return nt.length*2>=Z.length?[tt,rt,st,at,nt]:null}var O=C(w,I,Math.ceil(w.length/4)),L=C(w,I,Math.ceil(w.length/2)),B;if(!O&&!L)return null;L?O?B=O[4].length>L[4].length?O:L:B=L:B=O;var $,k,K,H;b.length>N.length?($=B[0],k=B[1],K=B[2],H=B[3]):(K=B[0],H=B[1],$=B[2],k=B[3]);var G=B[4];return[$,k,K,H,G]}function g(b){for(var N=!1,w=[],I=0,C=null,O=0,L=0,B=0,$=0,k=0;O<b.length;)b[O][0]==n?(w[I++]=O,L=$,B=k,$=0,k=0,C=b[O][1]):(b[O][0]==t?$+=b[O][1].length:k+=b[O][1].length,C&&C.length<=Math.max(L,B)&&C.length<=Math.max($,k)&&(b.splice(w[I-1],0,[e,C]),b[w[I-1]+1][0]=t,I--,I--,O=I>0?w[I-1]:-1,L=0,B=0,$=0,k=0,C=null,N=!0)),O++;for(N&&A(b),T(b),O=1;O<b.length;){if(b[O-1][0]==e&&b[O][0]==t){var K=b[O-1][1],H=b[O][1],G=c(K,H),Z=c(H,K);G>=Z?(G>=K.length/2||G>=H.length/2)&&(b.splice(O,0,[n,H.substring(0,G)]),b[O-1][1]=K.substring(0,K.length-G),b[O+1][1]=H.substring(G),O++):(Z>=K.length/2||Z>=H.length/2)&&(b.splice(O,0,[n,K.substring(0,Z)]),b[O-1][0]=t,b[O-1][1]=H.substring(0,H.length-Z),b[O+1][0]=e,b[O+1][1]=K.substring(Z),O++),O++}O++}}var d=/[^a-zA-Z0-9]/,p=/\s/,m=/[\r\n]/,_=/\n\r?\n$/,y=/^\r?\n\r?\n/;function T(b){function N(Z,U){if(!Z||!U)return 6;var ct=Z.charAt(Z.length-1),ft=U.charAt(0),W=ct.match(d),nt=ft.match(d),tt=W&&ct.match(p),rt=nt&&ft.match(p),st=tt&&ct.match(m),at=rt&&ft.match(m),pt=st&&Z.match(_),xt=at&&U.match(y);return pt||xt?5:st||at?4:W&&!tt&&rt?3:tt||rt?2:W||nt?1:0}for(var w=1;w<b.length-1;){if(b[w-1][0]==n&&b[w+1][0]==n){var I=b[w-1][1],C=b[w][1],O=b[w+1][1],L=u(I,C);if(L){var B=C.substring(C.length-L);I=I.substring(0,I.length-L),C=B+C.substring(0,C.length-L),O=B+O}for(var $=I,k=C,K=O,H=N(I,C)+N(C,O);C.charAt(0)===O.charAt(0);){I+=C.charAt(0),C=C.substring(1)+O.charAt(0),O=O.substring(1);var G=N(I,C)+N(C,O);G>=H&&(H=G,$=I,k=C,K=O)}b[w-1][1]!=$&&($?b[w-1][1]=$:(b.splice(w-1,1),w--),b[w][1]=k,K?b[w+1][1]=K:(b.splice(w+1,1),w--))}w++}}function A(b,N){b.push([n,""]);for(var w=0,I=0,C=0,O="",L="",B;w<b.length;){if(w<b.length-1&&!b[w][1]){b.splice(w,1);continue}switch(b[w][0]){case t:C++,L+=b[w][1],w++;break;case e:I++,O+=b[w][1],w++;break;case n:var $=w-C-I-1;if(N){if($>=0&&z(b[$][1])){var k=b[$][1].slice(-1);if(b[$][1]=b[$][1].slice(0,-1),O=k+O,L=k+L,!b[$][1]){b.splice($,1),w--;var K=$-1;b[K]&&b[K][0]===t&&(C++,L=b[K][1]+L,K--),b[K]&&b[K][0]===e&&(I++,O=b[K][1]+O,K--),$=K}}if(M(b[w][1])){var k=b[w][1].charAt(0);b[w][1]=b[w][1].slice(1),O+=k,L+=k}}if(w<b.length-1&&!b[w][1]){b.splice(w,1);break}if(O.length>0||L.length>0){O.length>0&&L.length>0&&(B=o(L,O),B!==0&&($>=0?b[$][1]+=L.substring(0,B):(b.splice(0,0,[n,L.substring(0,B)]),w++),L=L.substring(B),O=O.substring(B)),B=u(L,O),B!==0&&(b[w][1]=L.substring(L.length-B)+b[w][1],L=L.substring(0,L.length-B),O=O.substring(0,O.length-B)));var H=C+I;O.length===0&&L.length===0?(b.splice(w-H,H),w=w-H):O.length===0?(b.splice(w-H,H,[t,L]),w=w-H+1):L.length===0?(b.splice(w-H,H,[e,O]),w=w-H+1):(b.splice(w-H,H,[e,O],[t,L]),w=w-H+2)}w!==0&&b[w-1][0]===n?(b[w-1][1]+=b[w][1],b.splice(w,1)):w++,C=0,I=0,O="",L="";break}}b[b.length-1][1]===""&&b.pop();var G=!1;for(w=1;w<b.length-1;)b[w-1][0]===n&&b[w+1][0]===n&&(b[w][1].substring(b[w][1].length-b[w-1][1].length)===b[w-1][1]?(b[w][1]=b[w-1][1]+b[w][1].substring(0,b[w][1].length-b[w-1][1].length),b[w+1][1]=b[w-1][1]+b[w+1][1],b.splice(w-1,1),G=!0):b[w][1].substring(0,b[w+1][1].length)==b[w+1][1]&&(b[w-1][1]+=b[w+1][1],b[w][1]=b[w][1].substring(b[w+1][1].length)+b[w+1][1],b.splice(w+1,1),G=!0)),w++;G&&A(b,N)}function S(b){return b>=55296&&b<=56319}function D(b){return b>=56320&&b<=57343}function M(b){return D(b.charCodeAt(0))}function z(b){return S(b.charCodeAt(b.length-1))}function J(b){for(var N=[],w=0;w<b.length;w++)b[w][1].length>0&&N.push(b[w]);return N}function ot(b,N,w,I){return z(b)||M(I)?null:J([[n,b],[e,N],[t,w],[n,I]])}function Q(b,N,w){var I=typeof w=="number"?{index:w,length:0}:w.oldRange,C=typeof w=="number"?null:w.newRange,O=b.length,L=N.length;if(I.length===0&&(C===null||C.length===0)){var B=I.index,$=b.slice(0,B),k=b.slice(B),K=C?C.index:null;t:{var H=B+L-O;if(K!==null&&K!==H||H<0||H>L)break t;var G=N.slice(0,H),Z=N.slice(H);if(Z!==k)break t;var U=Math.min(B,H),ct=$.slice(0,U),ft=G.slice(0,U);if(ct!==ft)break t;var W=$.slice(U),nt=G.slice(U);return ot(ct,W,nt,k)}t:{if(K!==null&&K!==B)break t;var tt=B,G=N.slice(0,tt),Z=N.slice(tt);if(G!==$)break t;var rt=Math.min(O-tt,L-tt),st=k.slice(k.length-rt),at=Z.slice(Z.length-rt);if(st!==at)break t;var W=k.slice(0,k.length-rt),nt=Z.slice(0,Z.length-rt);return ot($,W,nt,st)}}if(I.length>0&&C&&C.length===0)t:{var ct=b.slice(0,I.index),st=b.slice(I.index+I.length),U=ct.length,rt=st.length;if(L<U+rt)break t;var ft=N.slice(0,U),at=N.slice(L-rt);if(ct!==ft||st!==at)break t;var W=b.slice(U,O-rt),nt=N.slice(U,L-rt);return ot(ct,W,nt,st)}return null}function et(b,N,w,I){return r(b,N,w,I,!0)}return et.INSERT=t,et.DELETE=e,et.EQUAL=n,aa=et,aa}var yr={exports:{}};yr.exports;var Kl;function fh(){return Kl||(Kl=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Function]",g="[object GeneratorFunction]",d="[object Map]",p="[object Number]",m="[object Object]",_="[object Promise]",y="[object RegExp]",T="[object Set]",A="[object String]",S="[object Symbol]",D="[object WeakMap]",M="[object ArrayBuffer]",z="[object DataView]",J="[object Float32Array]",ot="[object Float64Array]",Q="[object Int8Array]",et="[object Int16Array]",b="[object Int32Array]",N="[object Uint8Array]",w="[object Uint8ClampedArray]",I="[object Uint16Array]",C="[object Uint32Array]",O=/[\\^$.*+?()[\]{}|]/g,L=/\w*$/,B=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,k={};k[s]=k[a]=k[M]=k[z]=k[o]=k[c]=k[J]=k[ot]=k[Q]=k[et]=k[b]=k[d]=k[p]=k[m]=k[y]=k[T]=k[A]=k[S]=k[N]=k[w]=k[I]=k[C]=!0,k[u]=k[f]=k[D]=!1;var K=typeof Le=="object"&&Le&&Le.Object===Object&&Le,H=typeof self=="object"&&self&&self.Object===Object&&self,G=K||H||Function("return this")(),Z=t&&!t.nodeType&&t,U=Z&&!0&&e&&!e.nodeType&&e,ct=U&&U.exports===Z;function ft(l,h){return l.set(h[0],h[1]),l}function W(l,h){return l.add(h),l}function nt(l,h){for(var v=-1,x=l?l.length:0;++v<x&&h(l[v],v,l)!==!1;);return l}function tt(l,h){for(var v=-1,x=h.length,V=l.length;++v<x;)l[V+v]=h[v];return l}function rt(l,h,v,x){for(var V=-1,F=l?l.length:0;++V<F;)v=h(v,l[V],V,l);return v}function st(l,h){for(var v=-1,x=Array(l);++v<l;)x[v]=h(v);return x}function at(l,h){return l==null?void 0:l[h]}function pt(l){var h=!1;if(l!=null&&typeof l.toString!="function")try{h=!!(l+"")}catch{}return h}function xt(l){var h=-1,v=Array(l.size);return l.forEach(function(x,V){v[++h]=[V,x]}),v}function Zn(l,h){return function(v){return l(h(v))}}function zr(l){var h=-1,v=Array(l.size);return l.forEach(function(x){v[++h]=x}),v}var rs=Array.prototype,is=Function.prototype,mn=Object.prototype,Xn=G["__core-js_shared__"],Kr=function(){var l=/[^.]+$/.exec(Xn&&Xn.keys&&Xn.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Wr=is.toString,re=mn.hasOwnProperty,bn=mn.toString,ss=RegExp("^"+Wr.call(re).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=ct?G.Buffer:void 0,vn=G.Symbol,Yn=G.Uint8Array,Rt=Zn(Object.getPrototypeOf,Object),Gr=Object.create,Zr=mn.propertyIsEnumerable,as=rs.splice,Jn=Object.getOwnPropertySymbols,yn=Ue?Ue.isBuffer:void 0,Xr=Zn(Object.keys,Object),wn=Vt(G,"DataView"),He=Vt(G,"Map"),Ht=Vt(G,"Promise"),_n=Vt(G,"Set"),Qn=Vt(G,"WeakMap"),Ve=Vt(Object,"create"),tr=Ct(wn),ze=Ct(He),er=Ct(Ht),nr=Ct(_n),rr=Ct(Qn),Ne=vn?vn.prototype:void 0,Yr=Ne?Ne.valueOf:void 0;function ge(l){var h=-1,v=l?l.length:0;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function os(){this.__data__=Ve?Ve(null):{}}function ls(l){return this.has(l)&&delete this.__data__[l]}function cs(l){var h=this.__data__;if(Ve){var v=h[l];return v===r?void 0:v}return re.call(h,l)?h[l]:void 0}function Jr(l){var h=this.__data__;return Ve?h[l]!==void 0:re.call(h,l)}function ir(l,h){var v=this.__data__;return v[l]=Ve&&h===void 0?r:h,this}ge.prototype.clear=os,ge.prototype.delete=ls,ge.prototype.get=cs,ge.prototype.has=Jr,ge.prototype.set=ir;function wt(l){var h=-1,v=l?l.length:0;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function us(){this.__data__=[]}function hs(l){var h=this.__data__,v=xn(h,l);if(v<0)return!1;var x=h.length-1;return v==x?h.pop():as.call(h,v,1),!0}function ds(l){var h=this.__data__,v=xn(h,l);return v<0?void 0:h[v][1]}function fs(l){return xn(this.__data__,l)>-1}function gs(l,h){var v=this.__data__,x=xn(v,l);return x<0?v.push([l,h]):v[x][1]=h,this}wt.prototype.clear=us,wt.prototype.delete=hs,wt.prototype.get=ds,wt.prototype.has=fs,wt.prototype.set=gs;function Et(l){var h=-1,v=l?l.length:0;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function ps(){this.__data__={hash:new ge,map:new(He||wt),string:new ge}}function ms(l){return We(this,l).delete(l)}function bs(l){return We(this,l).get(l)}function vs(l){return We(this,l).has(l)}function ys(l,h){return We(this,l).set(l,h),this}Et.prototype.clear=ps,Et.prototype.delete=ms,Et.prototype.get=bs,Et.prototype.has=vs,Et.prototype.set=ys;function It(l){this.__data__=new wt(l)}function ws(){this.__data__=new wt}function _s(l){return this.__data__.delete(l)}function Ts(l){return this.__data__.get(l)}function xs(l){return this.__data__.has(l)}function Es(l,h){var v=this.__data__;if(v instanceof wt){var x=v.__data__;if(!He||x.length<n-1)return x.push([l,h]),this;v=this.__data__=new Et(x)}return v.set(l,h),this}It.prototype.clear=ws,It.prototype.delete=_s,It.prototype.get=Ts,It.prototype.has=xs,It.prototype.set=Es;function Tn(l,h){var v=lr(l)||An(l)?st(l.length,String):[],x=v.length,V=!!x;for(var F in l)re.call(l,F)&&!(V&&(F=="length"||js(F,x)))&&v.push(F);return v}function Qr(l,h,v){var x=l[h];(!(re.call(l,h)&&ii(x,v))||v===void 0&&!(h in l))&&(l[h]=v)}function xn(l,h){for(var v=l.length;v--;)if(ii(l[v][0],h))return v;return-1}function ie(l,h){return l&&or(h,ur(h),l)}function sr(l,h,v,x,V,F,Y){var X;if(x&&(X=F?x(l,V,F,Y):x(l)),X!==void 0)return X;if(!ae(l))return l;var mt=lr(l);if(mt){if(X=Rs(l),!h)return qs(l,X)}else{var it=me(l),At=it==f||it==g;if(si(l))return En(l,h);if(it==m||it==s||At&&!F){if(pt(l))return F?l:{};if(X=se(At?{}:l),!h)return ks(l,ie(X,l))}else{if(!k[it])return F?l:{};X=Bs(l,it,sr,h)}}Y||(Y=new It);var Mt=Y.get(l);if(Mt)return Mt;if(Y.set(l,X),!mt)var vt=v?Ds(l):ur(l);return nt(vt||l,function(Nt,_t){vt&&(_t=Nt,Nt=l[_t]),Qr(X,_t,sr(Nt,h,v,x,_t,l,Y))}),X}function As(l){return ae(l)?Gr(l):{}}function Ns(l,h,v){var x=h(l);return lr(l)?x:tt(x,v(l))}function Os(l){return bn.call(l)}function Ss(l){if(!ae(l)||$s(l))return!1;var h=cr(l)||pt(l)?ss:B;return h.test(Ct(l))}function Cs(l){if(!ni(l))return Xr(l);var h=[];for(var v in Object(l))re.call(l,v)&&v!="constructor"&&h.push(v);return h}function En(l,h){if(h)return l.slice();var v=new l.constructor(l.length);return l.copy(v),v}function ar(l){var h=new l.constructor(l.byteLength);return new Yn(h).set(new Yn(l)),h}function Ke(l,h){var v=h?ar(l.buffer):l.buffer;return new l.constructor(v,l.byteOffset,l.byteLength)}function ti(l,h,v){var x=h?v(xt(l),!0):xt(l);return rt(x,ft,new l.constructor)}function ei(l){var h=new l.constructor(l.source,L.exec(l));return h.lastIndex=l.lastIndex,h}function Ls(l,h,v){var x=h?v(zr(l),!0):zr(l);return rt(x,W,new l.constructor)}function Is(l){return Yr?Object(Yr.call(l)):{}}function Ms(l,h){var v=h?ar(l.buffer):l.buffer;return new l.constructor(v,l.byteOffset,l.length)}function qs(l,h){var v=-1,x=l.length;for(h||(h=Array(x));++v<x;)h[v]=l[v];return h}function or(l,h,v,x){v||(v={});for(var V=-1,F=h.length;++V<F;){var Y=h[V],X=void 0;Qr(v,Y,X===void 0?l[Y]:X)}return v}function ks(l,h){return or(l,pe(l),h)}function Ds(l){return Ns(l,ur,pe)}function We(l,h){var v=l.__data__;return Ps(h)?v[typeof h=="string"?"string":"hash"]:v.map}function Vt(l,h){var v=at(l,h);return Ss(v)?v:void 0}var pe=Jn?Zn(Jn,Object):Us,me=Os;(wn&&me(new wn(new ArrayBuffer(1)))!=z||He&&me(new He)!=d||Ht&&me(Ht.resolve())!=_||_n&&me(new _n)!=T||Qn&&me(new Qn)!=D)&&(me=function(l){var h=bn.call(l),v=h==m?l.constructor:void 0,x=v?Ct(v):void 0;if(x)switch(x){case tr:return z;case ze:return d;case er:return _;case nr:return T;case rr:return D}return h});function Rs(l){var h=l.length,v=l.constructor(h);return h&&typeof l[0]=="string"&&re.call(l,"index")&&(v.index=l.index,v.input=l.input),v}function se(l){return typeof l.constructor=="function"&&!ni(l)?As(Rt(l)):{}}function Bs(l,h,v,x){var V=l.constructor;switch(h){case M:return ar(l);case o:case c:return new V(+l);case z:return Ke(l,x);case J:case ot:case Q:case et:case b:case N:case w:case I:case C:return Ms(l,x);case d:return ti(l,x,v);case p:case A:return new V(l);case y:return ei(l);case T:return Ls(l,x,v);case S:return Is(l)}}function js(l,h){return h=h??i,!!h&&(typeof l=="number"||$.test(l))&&l>-1&&l%1==0&&l<h}function Ps(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function $s(l){return!!Kr&&Kr in l}function ni(l){var h=l&&l.constructor,v=typeof h=="function"&&h.prototype||mn;return l===v}function Ct(l){if(l!=null){try{return Wr.call(l)}catch{}try{return l+""}catch{}}return""}function ri(l){return sr(l,!0,!0)}function ii(l,h){return l===h||l!==l&&h!==h}function An(l){return Fs(l)&&re.call(l,"callee")&&(!Zr.call(l,"callee")||bn.call(l)==s)}var lr=Array.isArray;function Nn(l){return l!=null&&ai(l.length)&&!cr(l)}function Fs(l){return oi(l)&&Nn(l)}var si=yn||Hs;function cr(l){var h=ae(l)?bn.call(l):"";return h==f||h==g}function ai(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}function ae(l){var h=typeof l;return!!l&&(h=="object"||h=="function")}function oi(l){return!!l&&typeof l=="object"}function ur(l){return Nn(l)?Tn(l):Cs(l)}function Us(){return[]}function Hs(){return!1}e.exports=ri}(yr,yr.exports)),yr.exports}var wr={exports:{}};wr.exports;var Wl;function gh(){return Wl||(Wl=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",g="[object Date]",d="[object Error]",p="[object Function]",m="[object GeneratorFunction]",_="[object Map]",y="[object Number]",T="[object Null]",A="[object Object]",S="[object Promise]",D="[object Proxy]",M="[object RegExp]",z="[object Set]",J="[object String]",ot="[object Symbol]",Q="[object Undefined]",et="[object WeakMap]",b="[object ArrayBuffer]",N="[object DataView]",w="[object Float32Array]",I="[object Float64Array]",C="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",B="[object Uint8Array]",$="[object Uint8ClampedArray]",k="[object Uint16Array]",K="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,U={};U[w]=U[I]=U[C]=U[O]=U[L]=U[B]=U[$]=U[k]=U[K]=!0,U[o]=U[c]=U[b]=U[f]=U[N]=U[g]=U[d]=U[p]=U[_]=U[y]=U[A]=U[M]=U[z]=U[J]=U[et]=!1;var ct=typeof Le=="object"&&Le&&Le.Object===Object&&Le,ft=typeof self=="object"&&self&&self.Object===Object&&self,W=ct||ft||Function("return this")(),nt=t&&!t.nodeType&&t,tt=nt&&!0&&e&&!e.nodeType&&e,rt=tt&&tt.exports===nt,st=rt&&ct.process,at=function(){try{return st&&st.binding&&st.binding("util")}catch{}}(),pt=at&&at.isTypedArray;function xt(l,h){for(var v=-1,x=l==null?0:l.length,V=0,F=[];++v<x;){var Y=l[v];h(Y,v,l)&&(F[V++]=Y)}return F}function Zn(l,h){for(var v=-1,x=h.length,V=l.length;++v<x;)l[V+v]=h[v];return l}function zr(l,h){for(var v=-1,x=l==null?0:l.length;++v<x;)if(h(l[v],v,l))return!0;return!1}function rs(l,h){for(var v=-1,x=Array(l);++v<l;)x[v]=h(v);return x}function is(l){return function(h){return l(h)}}function mn(l,h){return l.has(h)}function Xn(l,h){return l==null?void 0:l[h]}function Kr(l){var h=-1,v=Array(l.size);return l.forEach(function(x,V){v[++h]=[V,x]}),v}function Wr(l,h){return function(v){return l(h(v))}}function re(l){var h=-1,v=Array(l.size);return l.forEach(function(x){v[++h]=x}),v}var bn=Array.prototype,ss=Function.prototype,Ue=Object.prototype,vn=W["__core-js_shared__"],Yn=ss.toString,Rt=Ue.hasOwnProperty,Gr=function(){var l=/[^.]+$/.exec(vn&&vn.keys&&vn.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Zr=Ue.toString,as=RegExp("^"+Yn.call(Rt).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jn=rt?W.Buffer:void 0,yn=W.Symbol,Xr=W.Uint8Array,wn=Ue.propertyIsEnumerable,He=bn.splice,Ht=yn?yn.toStringTag:void 0,_n=Object.getOwnPropertySymbols,Qn=Jn?Jn.isBuffer:void 0,Ve=Wr(Object.keys,Object),tr=pe(W,"DataView"),ze=pe(W,"Map"),er=pe(W,"Promise"),nr=pe(W,"Set"),rr=pe(W,"WeakMap"),Ne=pe(Object,"create"),Yr=Ct(tr),ge=Ct(ze),os=Ct(er),ls=Ct(nr),cs=Ct(rr),Jr=yn?yn.prototype:void 0,ir=Jr?Jr.valueOf:void 0;function wt(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function us(){this.__data__=Ne?Ne(null):{},this.size=0}function hs(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function ds(l){var h=this.__data__;if(Ne){var v=h[l];return v===r?void 0:v}return Rt.call(h,l)?h[l]:void 0}function fs(l){var h=this.__data__;return Ne?h[l]!==void 0:Rt.call(h,l)}function gs(l,h){var v=this.__data__;return this.size+=this.has(l)?0:1,v[l]=Ne&&h===void 0?r:h,this}wt.prototype.clear=us,wt.prototype.delete=hs,wt.prototype.get=ds,wt.prototype.has=fs,wt.prototype.set=gs;function Et(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function ps(){this.__data__=[],this.size=0}function ms(l){var h=this.__data__,v=En(h,l);if(v<0)return!1;var x=h.length-1;return v==x?h.pop():He.call(h,v,1),--this.size,!0}function bs(l){var h=this.__data__,v=En(h,l);return v<0?void 0:h[v][1]}function vs(l){return En(this.__data__,l)>-1}function ys(l,h){var v=this.__data__,x=En(v,l);return x<0?(++this.size,v.push([l,h])):v[x][1]=h,this}Et.prototype.clear=ps,Et.prototype.delete=ms,Et.prototype.get=bs,Et.prototype.has=vs,Et.prototype.set=ys;function It(l){var h=-1,v=l==null?0:l.length;for(this.clear();++h<v;){var x=l[h];this.set(x[0],x[1])}}function ws(){this.size=0,this.__data__={hash:new wt,map:new(ze||Et),string:new wt}}function _s(l){var h=Vt(this,l).delete(l);return this.size-=h?1:0,h}function Ts(l){return Vt(this,l).get(l)}function xs(l){return Vt(this,l).has(l)}function Es(l,h){var v=Vt(this,l),x=v.size;return v.set(l,h),this.size+=v.size==x?0:1,this}It.prototype.clear=ws,It.prototype.delete=_s,It.prototype.get=Ts,It.prototype.has=xs,It.prototype.set=Es;function Tn(l){var h=-1,v=l==null?0:l.length;for(this.__data__=new It;++h<v;)this.add(l[h])}function Qr(l){return this.__data__.set(l,r),this}function xn(l){return this.__data__.has(l)}Tn.prototype.add=Tn.prototype.push=Qr,Tn.prototype.has=xn;function ie(l){var h=this.__data__=new Et(l);this.size=h.size}function sr(){this.__data__=new Et,this.size=0}function As(l){var h=this.__data__,v=h.delete(l);return this.size=h.size,v}function Ns(l){return this.__data__.get(l)}function Os(l){return this.__data__.has(l)}function Ss(l,h){var v=this.__data__;if(v instanceof Et){var x=v.__data__;if(!ze||x.length<n-1)return x.push([l,h]),this.size=++v.size,this;v=this.__data__=new It(x)}return v.set(l,h),this.size=v.size,this}ie.prototype.clear=sr,ie.prototype.delete=As,ie.prototype.get=Ns,ie.prototype.has=Os,ie.prototype.set=Ss;function Cs(l,h){var v=An(l),x=!v&&ii(l),V=!v&&!x&&Nn(l),F=!v&&!x&&!V&&oi(l),Y=v||x||V||F,X=Y?rs(l.length,String):[],mt=X.length;for(var it in l)Rt.call(l,it)&&!(Y&&(it=="length"||V&&(it=="offset"||it=="parent")||F&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||Bs(it,mt)))&&X.push(it);return X}function En(l,h){for(var v=l.length;v--;)if(ri(l[v][0],h))return v;return-1}function ar(l,h,v){var x=h(l);return An(l)?x:Zn(x,v(l))}function Ke(l){return l==null?l===void 0?Q:T:Ht&&Ht in Object(l)?me(l):ni(l)}function ti(l){return ae(l)&&Ke(l)==o}function ei(l,h,v,x,V){return l===h?!0:l==null||h==null||!ae(l)&&!ae(h)?l!==l&&h!==h:Ls(l,h,v,x,ei,V)}function Ls(l,h,v,x,V,F){var Y=An(l),X=An(h),mt=Y?c:se(l),it=X?c:se(h);mt=mt==o?A:mt,it=it==o?A:it;var At=mt==A,Mt=it==A,vt=mt==it;if(vt&&Nn(l)){if(!Nn(h))return!1;Y=!0,At=!1}if(vt&&!At)return F||(F=new ie),Y||oi(l)?or(l,h,v,x,V,F):ks(l,h,mt,v,x,V,F);if(!(v&i)){var Nt=At&&Rt.call(l,"__wrapped__"),_t=Mt&&Rt.call(h,"__wrapped__");if(Nt||_t){var Oe=Nt?l.value():l,be=_t?h.value():h;return F||(F=new ie),V(Oe,be,v,x,F)}}return vt?(F||(F=new ie),Ds(l,h,v,x,V,F)):!1}function Is(l){if(!ai(l)||Ps(l))return!1;var h=si(l)?as:G;return h.test(Ct(l))}function Ms(l){return ae(l)&&cr(l.length)&&!!U[Ke(l)]}function qs(l){if(!$s(l))return Ve(l);var h=[];for(var v in Object(l))Rt.call(l,v)&&v!="constructor"&&h.push(v);return h}function or(l,h,v,x,V,F){var Y=v&i,X=l.length,mt=h.length;if(X!=mt&&!(Y&&mt>X))return!1;var it=F.get(l);if(it&&F.get(h))return it==h;var At=-1,Mt=!0,vt=v&s?new Tn:void 0;for(F.set(l,h),F.set(h,l);++At<X;){var Nt=l[At],_t=h[At];if(x)var Oe=Y?x(_t,Nt,At,h,l,F):x(Nt,_t,At,l,h,F);if(Oe!==void 0){if(Oe)continue;Mt=!1;break}if(vt){if(!zr(h,function(be,Ge){if(!mn(vt,Ge)&&(Nt===be||V(Nt,be,v,x,F)))return vt.push(Ge)})){Mt=!1;break}}else if(!(Nt===_t||V(Nt,_t,v,x,F))){Mt=!1;break}}return F.delete(l),F.delete(h),Mt}function ks(l,h,v,x,V,F,Y){switch(v){case N:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case b:return!(l.byteLength!=h.byteLength||!F(new Xr(l),new Xr(h)));case f:case g:case y:return ri(+l,+h);case d:return l.name==h.name&&l.message==h.message;case M:case J:return l==h+"";case _:var X=Kr;case z:var mt=x&i;if(X||(X=re),l.size!=h.size&&!mt)return!1;var it=Y.get(l);if(it)return it==h;x|=s,Y.set(l,h);var At=or(X(l),X(h),x,V,F,Y);return Y.delete(l),At;case ot:if(ir)return ir.call(l)==ir.call(h)}return!1}function Ds(l,h,v,x,V,F){var Y=v&i,X=We(l),mt=X.length,it=We(h),At=it.length;if(mt!=At&&!Y)return!1;for(var Mt=mt;Mt--;){var vt=X[Mt];if(!(Y?vt in h:Rt.call(h,vt)))return!1}var Nt=F.get(l);if(Nt&&F.get(h))return Nt==h;var _t=!0;F.set(l,h),F.set(h,l);for(var Oe=Y;++Mt<mt;){vt=X[Mt];var be=l[vt],Ge=h[vt];if(x)var zo=Y?x(Ge,be,vt,h,l,F):x(be,Ge,vt,l,h,F);if(!(zo===void 0?be===Ge||V(be,Ge,v,x,F):zo)){_t=!1;break}Oe||(Oe=vt=="constructor")}if(_t&&!Oe){var li=l.constructor,ci=h.constructor;li!=ci&&"constructor"in l&&"constructor"in h&&!(typeof li=="function"&&li instanceof li&&typeof ci=="function"&&ci instanceof ci)&&(_t=!1)}return F.delete(l),F.delete(h),_t}function We(l){return ar(l,ur,Rs)}function Vt(l,h){var v=l.__data__;return js(h)?v[typeof h=="string"?"string":"hash"]:v.map}function pe(l,h){var v=Xn(l,h);return Is(v)?v:void 0}function me(l){var h=Rt.call(l,Ht),v=l[Ht];try{l[Ht]=void 0;var x=!0}catch{}var V=Zr.call(l);return x&&(h?l[Ht]=v:delete l[Ht]),V}var Rs=_n?function(l){return l==null?[]:(l=Object(l),xt(_n(l),function(h){return wn.call(l,h)}))}:Us,se=Ke;(tr&&se(new tr(new ArrayBuffer(1)))!=N||ze&&se(new ze)!=_||er&&se(er.resolve())!=S||nr&&se(new nr)!=z||rr&&se(new rr)!=et)&&(se=function(l){var h=Ke(l),v=h==A?l.constructor:void 0,x=v?Ct(v):"";if(x)switch(x){case Yr:return N;case ge:return _;case os:return S;case ls:return z;case cs:return et}return h});function Bs(l,h){return h=h??a,!!h&&(typeof l=="number"||Z.test(l))&&l>-1&&l%1==0&&l<h}function js(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function Ps(l){return!!Gr&&Gr in l}function $s(l){var h=l&&l.constructor,v=typeof h=="function"&&h.prototype||Ue;return l===v}function ni(l){return Zr.call(l)}function Ct(l){if(l!=null){try{return Yn.call(l)}catch{}try{return l+""}catch{}}return""}function ri(l,h){return l===h||l!==l&&h!==h}var ii=ti(function(){return arguments}())?ti:function(l){return ae(l)&&Rt.call(l,"callee")&&!wn.call(l,"callee")},An=Array.isArray;function lr(l){return l!=null&&cr(l.length)&&!si(l)}var Nn=Qn||Hs;function Fs(l,h){return ei(l,h)}function si(l){if(!ai(l))return!1;var h=Ke(l);return h==p||h==m||h==u||h==D}function cr(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=a}function ai(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function ae(l){return l!=null&&typeof l=="object"}var oi=pt?is(pt):Ms;function ur(l){return lr(l)?Cs(l):qs(l)}function Us(){return[]}function Hs(){return!1}e.exports=Fs}(wr,wr.exports)),wr.exports}var wi={},Gl;function Z1(){if(Gl)return wi;Gl=1,Object.defineProperty(wi,"__esModule",{value:!0});const e=fh(),t=gh();var n;return function(r){function i(c={},u={},f=!1){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});let g=e(u);f||(g=Object.keys(g).reduce((d,p)=>(g[p]!=null&&(d[p]=g[p]),d),{}));for(const d in c)c[d]!==void 0&&u[d]===void 0&&(g[d]=c[d]);return Object.keys(g).length>0?g:void 0}r.compose=i;function s(c={},u={}){typeof c!="object"&&(c={}),typeof u!="object"&&(u={});const f=Object.keys(c).concat(Object.keys(u)).reduce((g,d)=>(t(c[d],u[d])||(g[d]=u[d]===void 0?null:u[d]),g),{});return Object.keys(f).length>0?f:void 0}r.diff=s;function a(c={},u={}){c=c||{};const f=Object.keys(u).reduce((g,d)=>(u[d]!==c[d]&&c[d]!==void 0&&(g[d]=u[d]),g),{});return Object.keys(c).reduce((g,d)=>(c[d]!==u[d]&&u[d]===void 0&&(g[d]=null),g),f)}r.invert=a;function o(c,u,f=!1){if(typeof c!="object")return u;if(typeof u!="object")return;if(!f)return u;const g=Object.keys(u).reduce((d,p)=>(c[p]===void 0&&(d[p]=u[p]),d),{});return Object.keys(g).length>0?g:void 0}r.transform=o}(n||(n={})),wi.default=n,wi}var _i={},Zl;function ph(){if(Zl)return _i;Zl=1,Object.defineProperty(_i,"__esModule",{value:!0});var e;return function(t){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}t.length=n}(e||(e={})),_i.default=e,_i}var Ti={},Xl;function X1(){if(Xl)return Ti;Xl=1,Object.defineProperty(Ti,"__esModule",{value:!0});const e=ph();class t{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const s=this.offset,a=e.default.length(i);if(r>=a-s?(r=a-s,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const o={};return i.attributes&&(o.attributes=i.attributes),typeof i.retain=="number"?o.retain=r:typeof i.retain=="object"&&i.retain!==null?o.retain=i.retain:typeof i.insert=="string"?o.insert=i.insert.substr(s,r):o.insert=i.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?e.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,s=this.next(),a=this.ops.slice(this.index);return this.offset=r,this.index=i,[s].concat(a)}}else return[]}}return Ti.default=t,Ti}var Yl;function Y1(){return Yl||(Yl=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const n=G1(),r=fh(),i=gh(),s=Z1();t.AttributeMap=s.default;const a=ph();t.Op=a.default;const o=X1();t.OpIterator=o.default;const c="\0",u=(g,d)=>{if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const p=Object.keys(g)[0];if(!p||p!==Object.keys(d)[0])throw new Error(`embed types not matched: ${p} != ${Object.keys(d)[0]}`);return[p,g[p],d[p]]};class f{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,p){this.handlers[d]=p}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const p=this.handlers[d];if(!p)throw new Error(`no handlers for embed type "${d}"`);return p}insert(d,p){const m={};return typeof d=="string"&&d.length===0?this:(m.insert=d,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,p){if(typeof d=="number"&&d<=0)return this;const m={retain:d};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)}push(d){let p=this.ops.length,m=this.ops[p-1];if(d=r(d),typeof m=="object"){if(typeof d.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+d.delete},this;if(typeof m.delete=="number"&&d.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(d),this;if(i(d.attributes,m.attributes)){if(typeof d.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+d.insert},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+d.retain},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this}}return p===this.ops.length?this.ops.push(d):this.ops.splice(p,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const p=[],m=[];return this.forEach(_=>{(d(_)?p:m).push(_)}),[p,m]}reduce(d,p){return this.ops.reduce(d,p)}changeLength(){return this.reduce((d,p)=>p.insert?d+a.default.length(p):p.delete?d-p.delete:d,0)}length(){return this.reduce((d,p)=>d+a.default.length(p),0)}slice(d=0,p=1/0){const m=[],_=new o.default(this.ops);let y=0;for(;y<p&&_.hasNext();){let T;y<d?T=_.next(d-y):(T=_.next(p-y),m.push(T)),y+=a.default.length(T)}return new f(m)}compose(d){const p=new o.default(this.ops),m=new o.default(d.ops),_=[],y=m.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let A=y.retain;for(;p.peekType()==="insert"&&p.peekLength()<=A;)A-=p.peekLength(),_.push(p.next());y.retain-A>0&&m.next(y.retain-A)}const T=new f(_);for(;p.hasNext()||m.hasNext();)if(m.peekType()==="insert")T.push(m.next());else if(p.peekType()==="delete")T.push(p.next());else{const A=Math.min(p.peekLength(),m.peekLength()),S=p.next(A),D=m.next(A);if(D.retain){const M={};if(typeof S.retain=="number")M.retain=typeof D.retain=="number"?A:D.retain;else if(typeof D.retain=="number")S.retain==null?M.insert=S.insert:M.retain=S.retain;else{const J=S.retain==null?"insert":"retain",[ot,Q,et]=u(S[J],D.retain),b=f.getHandler(ot);M[J]={[ot]:b.compose(Q,et,J==="retain")}}const z=s.default.compose(S.attributes,D.attributes,typeof S.retain=="number");if(z&&(M.attributes=z),T.push(M),!m.hasNext()&&i(T.ops[T.ops.length-1],M)){const J=new f(p.rest());return T.concat(J).chop()}}else typeof D.delete=="number"&&(typeof S.retain=="number"||typeof S.retain=="object"&&S.retain!==null)&&T.push(D)}return T.chop()}concat(d){const p=new f(this.ops.slice());return d.ops.length>0&&(p.push(d.ops[0]),p.ops=p.ops.concat(d.ops.slice(1))),p}diff(d,p){if(this.ops===d.ops)return new f;const m=[this,d].map(S=>S.map(D=>{if(D.insert!=null)return typeof D.insert=="string"?D.insert:c;const M=S===d?"on":"with";throw new Error("diff() called "+M+" non-document")}).join("")),_=new f,y=n(m[0],m[1],p,!0),T=new o.default(this.ops),A=new o.default(d.ops);return y.forEach(S=>{let D=S[1].length;for(;D>0;){let M=0;switch(S[0]){case n.INSERT:M=Math.min(A.peekLength(),D),_.push(A.next(M));break;case n.DELETE:M=Math.min(D,T.peekLength()),T.next(M),_.delete(M);break;case n.EQUAL:M=Math.min(T.peekLength(),A.peekLength(),D);const z=T.next(M),J=A.next(M);i(z.insert,J.insert)?_.retain(M,s.default.diff(z.attributes,J.attributes)):_.push(J).delete(M);break}D-=M}}),_.chop()}eachLine(d,p=`
`){const m=new o.default(this.ops);let _=new f,y=0;for(;m.hasNext();){if(m.peekType()!=="insert")return;const T=m.peek(),A=a.default.length(T)-m.peekLength(),S=typeof T.insert=="string"?T.insert.indexOf(p,A)-A:-1;if(S<0)_.push(m.next());else if(S>0)_.push(m.next(S));else{if(d(_,m.next(1).attributes||{},y)===!1)return;y+=1,_=new f}}_.length()>0&&d(_,{},y)}invert(d){const p=new f;return this.reduce((m,_)=>{if(_.insert)p.delete(a.default.length(_));else{if(typeof _.retain=="number"&&_.attributes==null)return p.retain(_.retain),m+_.retain;if(_.delete||typeof _.retain=="number"){const y=_.delete||_.retain;return d.slice(m,m+y).forEach(A=>{_.delete?p.push(A):_.retain&&_.attributes&&p.retain(a.default.length(A),s.default.invert(_.attributes,A.attributes))}),m+y}else if(typeof _.retain=="object"&&_.retain!==null){const y=d.slice(m,m+1),T=new o.default(y.ops).next(),[A,S,D]=u(_.retain,T.insert),M=f.getHandler(A);return p.retain({[A]:M.invert(S,D)},s.default.invert(_.attributes,T.attributes)),m+1}}return m},0),p.chop()}transform(d,p=!1){if(p=!!p,typeof d=="number")return this.transformPosition(d,p);const m=d,_=new o.default(this.ops),y=new o.default(m.ops),T=new f;for(;_.hasNext()||y.hasNext();)if(_.peekType()==="insert"&&(p||y.peekType()!=="insert"))T.retain(a.default.length(_.next()));else if(y.peekType()==="insert")T.push(y.next());else{const A=Math.min(_.peekLength(),y.peekLength()),S=_.next(A),D=y.next(A);if(S.delete)continue;if(D.delete)T.push(D);else{const M=S.retain,z=D.retain;let J=typeof z=="object"&&z!==null?z:A;if(typeof M=="object"&&M!==null&&typeof z=="object"&&z!==null){const ot=Object.keys(M)[0];if(ot===Object.keys(z)[0]){const Q=f.getHandler(ot);Q&&(J={[ot]:Q.transform(M[ot],z[ot],p)})}}T.retain(J,s.default.transform(S.attributes,D.attributes,p))}}return T.chop()}transformPosition(d,p=!1){p=!!p;const m=new o.default(this.ops);let _=0;for(;m.hasNext()&&_<=d;){const y=m.peekLength(),T=m.peekType();if(m.next(),T==="delete"){d-=Math.min(y,d-_);continue}else T==="insert"&&(_<d||!p)&&(d+=y);_+=y}return d}}f.Op=a.default,f.OpIterator=o.default,f.AttributeMap=s.default,f.handlers={},t.default=f,e.exports=f,e.exports.default=f}(yi,yi.exports)),yi.exports}var Ut=Y1();const j=_c(Ut);class ee extends Dt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ee.blotName="break";ee.tagName="BR";let Jt=class extends Fi{};const J1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ts(e){return e.replace(/[&<>"']/g,t=>J1[t])}const oe=class oe extends qo{static compare(t,n){const r=oe.order.indexOf(t),i=oe.order.indexOf(n);return r>=0||i>=0?r-i:t===n?0:t<n?-1:1}formatAt(t,n,r,i){if(oe.compare(this.statics.blotName,r)<0&&this.scroll.query(r,P.BLOT)){const s=this.isolate(t,n);i&&s.wrap(r,i)}else super.formatAt(t,n,r,i)}optimize(t){if(super.optimize(t),this.parent instanceof oe&&oe.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};q(oe,"allowedChildren",[oe,ee,Dt,Jt]),q(oe,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let de=oe;const Jl=1;class Tt extends Mr{constructor(){super(...arguments);q(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=mh(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,s){r<=0||(this.scroll.query(i,P.BLOCK)?n+r===this.length()&&this.format(i,s):super.formatAt(n,Math.min(r,this.length()-n-1),i,s),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const s=r.split(`
`),a=s.shift();a.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let o=this;s.reduce((c,u)=>(o=o.split(c,!0),o.insertAt(0,u),u.length),n+a.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof ee&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Jl),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-Jl)){const s=this.clone();return n===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(n,r);return this.cache={},i}}Tt.blotName="block";Tt.tagName="P";Tt.defaultChild=ee;Tt.allowedChildren=[ee,de,Dt,Jt];class $t extends Dt{attach(){super.attach(),this.attributes=new Ji(this.domNode)}delta(){return new j().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,n){const r=this.scroll.query(t,P.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(t,n,r,i){this.format(r,i)}insertAt(t,n,r){if(r!=null){super.insertAt(t,n,r);return}const i=n.split(`
`),s=i.pop(),a=i.map(c=>{const u=this.scroll.create(Tt.blotName);return u.insertAt(0,c),u}),o=this.split(t);a.forEach(c=>{this.parent.insertBefore(c,o)}),s&&this.parent.insertBefore(this.scroll.create("text",s),o)}}$t.scope=P.BLOCK_BLOT;function mh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(Ot).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),jt(r,{},t)),new j).insert(`
`,jt(e))}function jt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||("formats"in e&&typeof e.formats=="function"&&(t={...t,...e.formats()},n&&delete t["code-token"]),e.parent==null||e.parent.statics.blotName==="scroll"||e.parent.statics.scope!==e.statics.scope)?t:jt(e.parent,t,n)}const Bt=class Bt extends Dt{static value(){}constructor(t,n,r){super(t,n),this.selection=r,this.textNode=document.createTextNode(Bt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,n){if(this.savedLength!==0){super.format(t,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==P.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Bt.CONTENTS.length,r.optimize(),r.formatAt(i,Bt.CONTENTS.length,t,n),this.savedLength=0)}index(t,n){return t===this.textNode?0:super.index(t,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Jt?this.prev:null,r=n?n.length():0,i=this.next instanceof Jt?this.next:null,s=i?i.text:"",{textNode:a}=this,o=a.data.split(Bt.CONTENTS).join("");a.data=Bt.CONTENTS;let c;if(n)c=n,(o||i)&&(n.insertAt(n.length(),o+s),i&&i.remove());else if(i)c=i,i.insertAt(0,o);else{const u=document.createTextNode(o);c=this.scroll.create(u),this.parent.insertBefore(c,this)}if(this.remove(),t){const u=(d,p)=>n&&d===n.domNode?p:d===a?r+p-1:i&&d===i.domNode?r+o.length+p:null,f=u(t.start.node,t.start.offset),g=u(t.end.node,t.end.offset);if(f!==null&&g!==null)return{startNode:c.domNode,startOffset:f,endNode:c.domNode,endOffset:g}}return null}update(t,n){if(t.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(t){super.optimize(t);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Bt.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};q(Bt,"blotName","cursor"),q(Bt,"className","ql-cursor"),q(Bt,"tagName","span"),q(Bt,"CONTENTS","\uFEFF");let Fn=Bt;var oa={exports:{}},Ql;function Q1(){return Ql||(Ql=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,g,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,g||c,d),m=n?n+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,g;if(this._eventsCount===0)return u;for(g in f=this._events)t.call(f,g)&&u.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,g=this._events[f];if(!g)return[];if(g.fn)return[g.fn];for(var d=0,p=g.length,m=new Array(p);d<p;d++)m[d]=g[d].fn;return m},o.prototype.listenerCount=function(u){var f=n?n+u:u,g=this._events[f];return g?g.fn?1:g.length:0},o.prototype.emit=function(u,f,g,d,p,m){var _=n?n+u:u;if(!this._events[_])return!1;var y=this._events[_],T=arguments.length,A,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),T){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,g),!0;case 4:return y.fn.call(y.context,f,g,d),!0;case 5:return y.fn.call(y.context,f,g,d,p),!0;case 6:return y.fn.call(y.context,f,g,d,p,m),!0}for(S=1,A=new Array(T-1);S<T;S++)A[S-1]=arguments[S];y.fn.apply(y.context,A)}else{var D=y.length,M;for(S=0;S<D;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),T){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,f);break;case 3:y[S].fn.call(y[S].context,f,g);break;case 4:y[S].fn.call(y[S].context,f,g,d);break;default:if(!A)for(M=1,A=new Array(T-1);M<T;M++)A[M-1]=arguments[M];y[S].fn.apply(y[S].context,A)}}return!0},o.prototype.on=function(u,f,g){return s(this,u,f,g,!1)},o.prototype.once=function(u,f,g){return s(this,u,f,g,!0)},o.prototype.removeListener=function(u,f,g,d){var p=n?n+u:u;if(!this._events[p])return this;if(!f)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!d||m.once)&&(!g||m.context===g)&&a(this,p);else{for(var _=0,y=[],T=m.length;_<T;_++)(m[_].fn!==f||d&&!m[_].once||g&&m[_].context!==g)&&y.push(m[_]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(oa)),oa.exports}var tv=Q1();const ev=_c(tv),Wa=new WeakMap,Ga=["error","warn","log","info"];let Za="warn";function bh(e){if(Za&&Ga.indexOf(e)<=Ga.indexOf(Za)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console[e](...n)}}function Ae(e){return Ga.reduce((t,n)=>(t[n]=bh.bind(console,n,e),t),{})}Ae.level=e=>{Za=e};bh.level=Ae.level;const la=Ae("quill:events"),nv=["selectionchange","mousedown","mouseup","click"];nv.forEach(e=>{document.addEventListener(e,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=Wa.get(i);s&&s.emitter&&s.emitter.handleDOM(...n)})})});class R extends ev{constructor(){super(),this.domListeners={},this.on("error",la.error)}emit(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return la.log.call(la,...n),super.emit(...n)}handleDOM(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach(s=>{let{node:a,handler:o}=s;(t.target===a||a.contains(t.target))&&o(t,...r)})}listenDOM(t,n,r){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:n,handler:r})}}q(R,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),q(R,"sources",{API:"api",SILENT:"silent",USER:"user"});const ca=Ae("quill:selection");class ln{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=n}}class rv{constructor(t,n){this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ln(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,R.sources.USER),1)}),this.emitter.on(R.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(R.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const a=s.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(a?R.sources.SILENT:i)}catch{}})}),this.emitter.on(R.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:s,startOffset:a,endNode:o,endOffset:c}=i.range;this.setNativeRange(s,a,o,c),this.update(R.sources.SILENT)}}),this.update(R.sources.SILENT)}handleComposition(){this.emitter.on(R.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(R.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(R.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(t,P.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof Ot){const s=i.split(r.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(t,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();t=Math.min(t,r-1),n=Math.min(t+n,r-1)-t;let i,[s,a]=this.scroll.leaf(t);if(s==null)return null;if(n>0&&a===s.length()){const[f]=this.scroll.leaf(t+1);if(f){const[g]=this.scroll.line(t),[d]=this.scroll.line(t+1);g===d&&(s=f,a=0)}}[i,a]=s.position(a,!0);const o=document.createRange();if(n>0)return o.setStart(i,a),[s,a]=this.scroll.leaf(t+n),s==null?null:([i,a]=s.position(a,!0),o.setEnd(i,a),o.getBoundingClientRect());let c="left",u;if(i instanceof Text){if(!i.data.length)return null;a<i.data.length?(o.setStart(i,a),o.setEnd(i,a+1)):(o.setStart(i,a-1),o.setEnd(i,a),c="right"),u=o.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;u=s.domNode.getBoundingClientRect(),a>0&&(c="right")}return{bottom:u.top+u.height,height:u.height,left:u[c],right:u[c],top:u.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const n=t.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return ca.info("getNativeRange",r),r}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ua(this.root,document.activeElement)}normalizedToRange(t){const n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);const r=n.map(a=>{const[o,c]=a,u=this.scroll.find(o,!0),f=u.offset(this.scroll);return c===0?f:u instanceof Ot?f+u.index(o,c):f+u.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),s=Math.min(i,...r);return new ln(s,i-s)}normalizeNative(t){if(!ua(this.root,t.startContainer)||!t.collapsed&&!ua(this.root,t.endContainer))return null;const n={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[n.start,n.end].forEach(r=>{let{node:i,offset:s}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;r.node=i,r.offset=s}),n}rangeToNative(t){const n=this.scroll.length(),r=(i,s)=>{i=Math.min(n-1,i);const[a,o]=this.scroll.leaf(i);return a?a.position(o,s):[null,-1]};return[...r(t.index,!1),...r(t.index+t.length,!0)]}setNativeRange(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ca.info("setNativeRange",t,n,r,i),t!=null&&(this.root.parentNode==null||t.parentNode==null||r.parentNode==null))return;const a=document.getSelection();if(a!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||s||t!==o.startContainer||n!==o.startOffset||r!==o.endContainer||i!==o.endOffset){t instanceof Element&&t.tagName==="BR"&&(n=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const c=document.createRange();c.setStart(t,n),c.setEnd(r,i),a.removeAllRanges(),a.addRange(c)}}else a.removeAllRanges(),this.root.blur()}setRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R.sources.API;if(typeof n=="string"&&(r=n,n=!1),ca.info("setRange",t),t!=null){const i=this.rangeToNative(t);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Mo(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const s=[R.events.SELECTION_CHANGE,kn(this.lastRange),kn(n),t];this.emitter.emit(R.events.EDITOR_CHANGE,...s),t!==R.sources.SILENT&&this.emitter.emit(...s)}}}function ua(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}const iv=/^[ -~]*$/;class sv{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=tc(t),i=new j;return ov(r.ops.slice()).reduce((a,o)=>{const c=Ut.Op.length(o);let u=o.attributes||{},f=!1,g=!1;if(o.insert!=null){if(i.retain(c),typeof o.insert=="string"){const m=o.insert;g=!m.endsWith(`
`)&&(n<=a||!!this.scroll.descendant($t,a)[0]),this.scroll.insertAt(a,m);const[_,y]=this.scroll.line(a);let T=De({},jt(_));if(_ instanceof Tt){const[A]=_.descendant(Ot,y);A&&(T=De(T,jt(A)))}u=Ut.AttributeMap.diff(T,u)||{}}else if(typeof o.insert=="object"){const m=Object.keys(o.insert)[0];if(m==null)return a;const _=this.scroll.query(m,P.INLINE)!=null;if(_)(n<=a||this.scroll.descendant($t,a)[0])&&(g=!0);else if(a>0){const[y,T]=this.scroll.descendant(Ot,a-1);y instanceof Jt?y.value()[T]!==`
`&&(f=!0):y instanceof Dt&&y.statics.scope===P.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(a,m,o.insert[m]),_){const[y]=this.scroll.descendant(Ot,a);if(y){const T=De({},jt(y));u=Ut.AttributeMap.diff(T,u)||{}}}}n+=c}else if(i.push(o),o.retain!==null&&typeof o.retain=="object"){const m=Object.keys(o.retain)[0];if(m==null)return a;this.scroll.updateEmbedAt(a,m,o.retain[m])}Object.keys(u).forEach(m=>{this.scroll.formatAt(a,c,m,u[m])});const d=f?1:0,p=g?1:0;return n+=d+p,i.retain(d),i.delete(p),a+c+d+p},0),i.reduce((a,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(a,o.delete),a):a+Ut.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(t,n){return this.scroll.deleteAt(t,n),this.update(new j().retain(t).delete(n))}formatLine(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(s=>{this.scroll.lines(t,Math.max(n,1)).forEach(a=>{a.format(s,r[s])})}),this.scroll.optimize();const i=new j().retain(t).retain(n,kn(r));return this.update(i)}formatText(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(s=>{this.scroll.formatAt(t,n,s,r[s])});const i=new j().retain(t).retain(n,kn(r));return this.update(i)}getContents(t,n){return this.delta.slice(t,t+n)}getDelta(){return this.scroll.lines().reduce((t,n)=>t.concat(n.delta()),new j)}getFormat(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(t).forEach(o=>{const[c]=o;c instanceof Tt?r.push(c):c instanceof Ot&&i.push(c)}):(r=this.scroll.lines(t,n),i=this.scroll.descendants(Ot,t,n));const[s,a]=[r,i].map(o=>{const c=o.shift();if(c==null)return{};let u=jt(c);for(;Object.keys(u).length>0;){const f=o.shift();if(f==null)return u;u=av(jt(f),u)}return u});return{...s,...a}}getHTML(t,n){const[r,i]=this.scroll.line(t);if(r){const s=r.length();return r.length()>=i+n&&!(i===0&&n===s)?qr(r,i,n,!0):qr(this.scroll,t,n,!0)}return""}getText(t,n){return this.getContents(t,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(t,n){const r=tc(n),i=new j().retain(t).concat(r);return this.scroll.insertContents(t,r),this.update(i)}insertEmbed(t,n,r){return this.scroll.insertAt(t,n,r),this.update(new j().retain(t).insert({[n]:r}))}insertText(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(t,n.length,i,r[i])}),this.update(new j().retain(t).insert(n,kn(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==Tt.blotName)return!1;const n=t;return n.children.length>1?!1:n.children.head instanceof ee}removeFormat(t,n){const r=this.getText(t,n),[i,s]=this.scroll.line(t+n);let a=0,o=new j;i!=null&&(a=i.length()-s,o=i.delta().slice(s,s+a-1).insert(`
`));const u=this.getContents(t,n+a).diff(new j().insert(r).concat(o)),f=new j().retain(t).concat(u);return this.applyDelta(f)}update(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(iv)&&this.scroll.find(n[0].target)){const s=this.scroll.find(n[0].target),a=jt(s),o=s.offset(this.scroll),c=n[0].oldValue.replace(Fn.CONTENTS,""),u=new j().insert(c),f=new j().insert(s.value()),g=r&&{oldRange:ec(r.oldRange,-o),newRange:ec(r.newRange,-o)};t=new j().retain(o).concat(u.diff(f,g)).reduce((p,m)=>m.insert?p.insert(m.insert,a):p.push(m),new j),this.delta=i.compose(t)}else this.delta=this.getDelta(),(!t||!Mo(i.compose(t),this.delta))&&(t=i.diff(this.delta,r));return t}}function Mn(e,t,n){if(e.length===0){const[p]=ha(n.pop());return t<=0?`</li></${p}>`:`</li></${p}>${Mn([],t-1,n)}`}const[{child:r,offset:i,length:s,indent:a,type:o},...c]=e,[u,f]=ha(o);if(a>t)return n.push(o),a===t+1?`<${u}><li${f}>${qr(r,i,s)}${Mn(c,a,n)}`:`<${u}><li>${Mn(e,t+1,n)}`;const g=n[n.length-1];if(a===t&&o===g)return`</li><li${f}>${qr(r,i,s)}${Mn(c,a,n)}`;const[d]=ha(n.pop());return`</li></${d}>${Mn(e,t-1,n)}`}function qr(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in e&&typeof e.html=="function")return e.html(t,n);if(e instanceof Jt)return ts(e.value().slice(t,t+n)).replaceAll(" ","&nbsp;");if(e instanceof Xt){if(e.statics.blotName==="list-container"){const u=[];return e.children.forEachAt(t,n,(f,g,d)=>{const p="formats"in f&&typeof f.formats=="function"?f.formats():{};u.push({child:f,offset:g,length:d,indent:p.indent||0,type:p.list})}),Mn(u,-1,[])}const i=[];if(e.children.forEachAt(t,n,(u,f,g)=>{i.push(qr(u,f,g))}),r||e.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:a}=e.domNode,[o,c]=s.split(`>${a}<`);return o==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${c}`:`${o}>${i.join("")}<${c}`}return e.domNode instanceof Element?e.domNode.outerHTML:""}function av(e,t){return Object.keys(t).reduce((n,r)=>{if(e[r]==null)return n;const i=t[r];return i===e[r]?n[r]=i:Array.isArray(i)?i.indexOf(e[r])<0?n[r]=i.concat([e[r]]):n[r]=i:n[r]=[i,e[r]],n},{})}function ha(e){const t=e==="ordered"?"ol":"ul";switch(e){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function tc(e){return e.reduce((t,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(r,n.attributes)}return t.push(n)},new j)}function ec(e,t){let{index:n,length:r}=e;return new ln(n+t,r)}function ov(e){const t=[];return e.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,s)=>{s&&t.push({insert:`
`,attributes:n.attributes}),i&&t.push({insert:i,attributes:n.attributes})}):t.push(n)}),t}class ne{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=n}}q(ne,"DEFAULTS",{});const xi="\uFEFF";class Do extends Dt{constructor(t,n){super(t,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(xi),this.rightGuard=document.createTextNode(xi),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,n)}restore(t){let n=null,r;const i=t.data.split(xi).join("");if(t===this.leftGuard)if(this.prev instanceof Jt){const s=this.prev.length();this.prev.insertAt(s,i),n={startNode:this.prev.domNode,startOffset:s+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof Jt?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return t.data=xi,n}update(t,n){t.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class lv{constructor(t,n){q(this,"isComposing",!1);this.scroll=t,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const n=t.target instanceof Node?this.scroll.find(t.target,!0):null;n&&!(n instanceof Do)&&(this.emitter.emit(R.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(R.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(R.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(R.events.COMPOSITION_END,t),this.isComposing=!1}}const Nr=class Nr{constructor(t,n){q(this,"modules",{});this.quill=t,this.options=n}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const n=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new n(this.quill,this.options.modules[t]||{}),this.modules[t]}};q(Nr,"DEFAULTS",{modules:{}}),q(Nr,"themes",{default:Nr});let Un=Nr;const cv=e=>e.parentElement||e.getRootNode().host||null,uv=e=>{const t=e.getBoundingClientRect(),n="offsetWidth"in e&&Math.abs(t.width)/e.offsetWidth||1,r="offsetHeight"in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*n,bottom:t.top+e.clientHeight*r,left:t.left}},Ei=e=>{const t=parseInt(e,10);return Number.isNaN(t)?0:t},nc=(e,t,n,r,i,s)=>e<n&&t>r?0:e<n?-(n-e+i):t>r?t-e>r-n?e+i-n:t-r+s:0,hv=(e,t)=>{var s,a,o;const n=e.ownerDocument;let r=t,i=e;for(;i;){const c=i===n.body,u=c?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??n.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??n.documentElement.clientHeight,left:0}:uv(i),f=getComputedStyle(i),g=nc(r.left,r.right,u.left,u.right,Ei(f.scrollPaddingLeft),Ei(f.scrollPaddingRight)),d=nc(r.top,r.bottom,u.top,u.bottom,Ei(f.scrollPaddingTop),Ei(f.scrollPaddingBottom));if(g||d)if(c)(o=n.defaultView)==null||o.scrollBy(g,d);else{const{scrollLeft:p,scrollTop:m}=i;d&&(i.scrollTop+=d),g&&(i.scrollLeft+=g);const _=i.scrollLeft-p,y=i.scrollTop-m;r={left:r.left-_,top:r.top-y,right:r.right-_,bottom:r.bottom-y}}i=c||f.position==="fixed"?null:cv(i)}},dv=100,fv=["block","break","cursor","inline","scroll","text"],gv=(e,t,n)=>{const r=new $n;return fv.forEach(i=>{const s=t.query(i);s&&r.register(s)}),e.forEach(i=>{let s=t.query(i);s||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;s;)if(r.register(s),s="blotName"in s?s.requiredContainer??null:null,a+=1,a>dv){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},Rn=Ae("quill"),Ai=new $n;Xt.uiClass="ql-ui";const Kt=class Kt{static debug(t){t===!0&&(t="log"),Ae.level(t)}static find(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Wa.get(t)||Ai.find(t,n)}static import(t){return this.imports[t]==null&&Rn.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in t?t.attrName:t.blotName;typeof r=="string"?this.register(`formats/${r}`,t,n):Object.keys(t).forEach(i=>{this.register(i,t[i],n)})}else{const t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!r&&Rn.warn(`Overwriting ${t} with`,n),this.imports[t]=n,(t.startsWith("blots/")||t.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Ai.register(n),typeof n.register=="function"&&n.register(Ai)}}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=pv(t,n),this.container=this.options.container,this.container==null){Rn.error("Invalid Quill container",t);return}this.options.debug&&Kt.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Wa.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new R;const i=ko.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new sv(this.scroll),this.selection=new rv(this.scroll,this.emitter),this.composition=new lv(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(R.events.EDITOR_CHANGE,a=>{a===R.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(R.events.SCROLL_UPDATE,(a,o)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),f=c&&u?{oldRange:c,newRange:u}:void 0;zt.call(this,()=>this.editor.update(null,o,f),a)}),this.emitter.on(R.events.SCROLL_EMBED_UPDATE,(a,o)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),f=c&&u?{oldRange:c,newRange:u}:void 0;zt.call(this,()=>{const g=new j().retain(a.offset(this)).retain({[a.statics.blotName]:o});return this.editor.update(g,[],f)},Kt.sources.USER)}),r){const a=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const r=t;t=document.createElement("div"),t.classList.add(r)}return this.container.insertBefore(t,n),t}blur(){this.selection.setRange(null)}deleteText(t,n,r){return[t,n,,r]=ye(t,n,r),zt.call(this,()=>this.editor.deleteText(t,n),r,t,-1*n)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const n=t();return this.allowReadOnlyEdits=!1,n}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R.sources.API;return zt.call(this,()=>{const i=this.getSelection(!0);let s=new j;if(i==null)return s;if(this.scroll.query(t,P.BLOCK))s=this.editor.formatLine(i.index,i.length,{[t]:n});else{if(i.length===0)return this.selection.format(t,n),s;s=this.editor.formatText(i.index,i.length,{[t]:n})}return this.setSelection(i,R.sources.SILENT),s},r)}formatLine(t,n,r,i,s){let a;return[t,n,a,s]=ye(t,n,r,i,s),zt.call(this,()=>this.editor.formatLine(t,n,a),s,t,0)}formatText(t,n,r,i,s){let a;return[t,n,a,s]=ye(t,n,r,i,s),zt.call(this,()=>this.editor.formatText(t,n,a),s,t,0)}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof t=="number"?r=this.selection.getBounds(t,n):r=this.selection.getBounds(t.index,t.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,n]=ye(t,n),this.editor.getContents(t,n)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,n):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,n)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=ye(t,n),this.editor.getHTML(t,n)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=ye(t,n),this.editor.getText(t,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Kt.sources.API;return zt.call(this,()=>this.editor.insertEmbed(t,n,r),i,t)}insertText(t,n,r,i,s){let a;return[t,,a,s]=ye(t,0,r,i,s),zt.call(this,()=>this.editor.insertText(t,n,a),s,t,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,n,r){return[t,n,,r]=ye(t,n,r),zt.call(this,()=>this.editor.removeFormat(t,n),r,t)}scrollRectIntoView(t){hv(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,n=t&&this.selection.getBounds(t.index,t.length);n&&this.scrollRectIntoView(n)}setContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;return zt.call(this,()=>{t=new j(t);const r=this.getLength(),i=this.editor.deleteText(0,r),s=this.editor.insertContents(0,t),a=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(a)},n)}setSelection(t,n,r){t==null?this.selection.setRange(null,n||Kt.sources.API):([t,n,,r]=ye(t,n,r),this.selection.setRange(new ln(Math.max(0,t),n),r),r!==R.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;const r=new j().insert(t);return this.setContents(r,n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R.sources.USER;const n=this.scroll.update(t);return this.selection.update(t),n}updateContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;return zt.call(this,()=>(t=new j(t),this.editor.applyDelta(t)),n,!0)}};q(Kt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Ai,theme:"default"}),q(Kt,"events",R.events),q(Kt,"sources",R.sources),q(Kt,"version","2.0.3"),q(Kt,"imports",{delta:j,parchment:W1,"core/module":ne,"core/theme":Un});let E=Kt;function rc(e){return typeof e=="string"?document.querySelector(e):e}function da(e){return Object.entries(e??{}).reduce((t,n)=>{let[r,i]=n;return{...t,[r]:i===!0?{}:i}},{})}function ic(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!==void 0))}function pv(e,t){const n=rc(e);if(!n)throw new Error("Invalid Quill container");const i=!t.theme||t.theme===E.DEFAULTS.theme?Un:E.import(`themes/${t.theme}`);if(!i)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:s,...a}=E.DEFAULTS,{modules:o,...c}=i.DEFAULTS;let u=da(t.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const f=De({},da(s),da(o),u),g={...a,...ic(c),...ic(t)};let d=t.registry;return d?t.formats&&Rn.warn('Ignoring "formats" option because "registry" is specified'):d=t.formats?gv(t.formats,g.registry,Rn):g.registry,{...g,registry:d,container:n,theme:i,modules:Object.entries(f).reduce((p,m)=>{let[_,y]=m;if(!y)return p;const T=E.import(`modules/${_}`);return T==null?(Rn.error(`Cannot load ${_} module. Are you sure you registered it?`),p):{...p,[_]:De({},T.DEFAULTS||{},y)}},{}),bounds:rc(g.bounds)}}function zt(e,t,n,r){if(!this.isEnabled()&&t===R.sources.USER&&!this.allowReadOnlyEdits)return new j;let i=n==null?null:this.getSelection();const s=this.editor.delta,a=e();if(i!=null&&(n===!0&&(n=i.index),r==null?i=sc(i,a,t):r!==0&&(i=sc(i,n,r,t)),this.setSelection(i,R.sources.SILENT)),a.length()>0){const o=[R.events.TEXT_CHANGE,a,s,t];this.emitter.emit(R.events.EDITOR_CHANGE,...o),t!==R.sources.SILENT&&this.emitter.emit(...o)}return a}function ye(e,t,n,r,i){let s={};return typeof e.index=="number"&&typeof e.length=="number"?typeof t!="number"?(i=r,r=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):typeof t!="number"&&(i=r,r=n,n=t,t=0),typeof n=="object"?(s=n,i=r):typeof n=="string"&&(r!=null?s[n]=r:i=n),i=i||R.sources.API,[e,t,s,i]}function sc(e,t,n,r){const i=typeof n=="number"?n:0;if(e==null)return null;let s,a;return t&&typeof t.transformPosition=="function"?[s,a]=[e.index,e.index+e.length].map(o=>t.transformPosition(o,r!==R.sources.USER)):[s,a]=[e.index,e.index+e.length].map(o=>o<t||o===t&&r===R.sources.USER?o:i>=0?o+i:Math.max(t,o+i)),new ln(s,a-s)}class fn extends Qi{}function ac(e){return e instanceof Tt||e instanceof $t}function oc(e){return typeof e.updateContent=="function"}class qn extends ko{constructor(t,n,r){let{emitter:i}=r;super(t,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(R.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(R.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,n){this.emitter.emit(R.events.SCROLL_EMBED_UPDATE,t,n)}deleteAt(t,n){const[r,i]=this.line(t),[s]=this.line(t+n);if(super.deleteAt(t,n),s!=null&&r!==s&&i>0){if(r instanceof $t||s instanceof $t){this.optimize();return}const a=s.children.head instanceof ee?null:s.children.head;r.moveChildren(s,a),r.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,n,r,i){super.formatAt(t,n,r,i),this.optimize()}insertAt(t,n,r){if(t>=this.length())if(r==null||this.scroll.query(n,P.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(t,n,r);this.optimize()}insertBefore(t,n){if(t.statics.scope===P.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(t),super.insertBefore(r,n)}else super.insertBefore(t,n)}insertContents(t,n){const r=this.deltaToRenderBlocks(n.concat(new j().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const s=r.shift();if(s){const c=s.type==="block"&&(s.delta.length()===0||!this.descendant($t,t)[0]&&t<this.length()),u=s.type==="block"?s.delta:new j().insert({[s.key]:s.value});fa(this,t,u);const f=s.type==="block"?1:0,g=t+u.length()+f;c&&this.insertAt(g-1,`
`);const d=jt(this.line(t)[0]),p=Ut.AttributeMap.diff(d,s.attributes)||{};Object.keys(p).forEach(m=>{this.formatAt(g-1,1,m,p[m])}),t=g}let[a,o]=this.children.find(t);if(r.length&&(a&&(a=a.split(o),o=0),r.forEach(c=>{if(c.type==="block"){const u=this.createBlock(c.attributes,a||void 0);fa(u,0,c.delta)}else{const u=this.create(c.key,c.value);this.insertBefore(u,a||void 0),Object.keys(c.attributes).forEach(f=>{u.format(f,c.attributes[f])})}})),i.type==="block"&&i.delta.length()){const c=a?a.offset(a.scroll)+o:this.length();fa(this,c,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const n=this.path(t).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof Ot?[r,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(ac,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,s,a)=>{let o=[],c=a;return i.children.forEachAt(s,a,(u,f,g)=>{ac(u)?o.push(u):u instanceof Qi&&(o=o.concat(r(u,f,c))),c-=g}),o};return r(this,t,n)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,n),t.length>0&&this.emitter.emit(R.events.SCROLL_OPTIMIZE,t,n))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let n=R.sources.USER;typeof t=="string"&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(r=>{let{target:i}=r;const s=this.find(i,!0);return s&&!oc(s)}),t.length>0&&this.emitter.emit(R.events.SCROLL_BEFORE_UPDATE,n,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(R.events.SCROLL_UPDATE,n,t)}updateEmbedAt(t,n,r){const[i]=this.descendant(s=>s instanceof $t,t);i&&i.statics.blotName===n&&oc(i)&&i.updateContent(r)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const n=[];let r=new j;return t.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const a=s.split(`
`);a.slice(0,-1).forEach(c=>{r.insert(c,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new j});const o=a[a.length-1];o&&r.insert(o,i.attributes)}else{const a=Object.keys(s)[0];if(!a)return;this.query(a,P.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new j,n.push({type:"blockEmbed",key:a,value:s[a],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(t,n){let r;const i={};Object.entries(t).forEach(o=>{let[c,u]=o;this.query(c,P.BLOCK&P.BLOT)!=null?r=c:i[c]=u});const s=this.create(r||this.statics.defaultChild.blotName,r?t[r]:void 0);this.insertBefore(s,n||void 0);const a=s.length();return Object.entries(i).forEach(o=>{let[c,u]=o;s.formatAt(0,a,c,u)}),s}}q(qn,"blotName","scroll"),q(qn,"className","ql-editor"),q(qn,"tagName","DIV"),q(qn,"defaultChild",Tt),q(qn,"allowedChildren",[Tt,$t,fn]);function fa(e,t,n){n.reduce((r,i)=>{const s=Ut.Op.length(i);let a=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const o=i.insert;e.insertAt(r,o);const[c]=e.descendant(Ot,r),u=jt(c);a=Ut.AttributeMap.diff(u,a)||{}}else if(typeof i.insert=="object"){const o=Object.keys(i.insert)[0];if(o==null)return r;if(e.insertAt(r,o,i.insert[o]),e.scroll.query(o,P.INLINE)!=null){const[u]=e.descendant(Ot,r),f=jt(u);a=Ut.AttributeMap.diff(f,a)||{}}}}return Object.keys(a).forEach(o=>{e.formatAt(r,s,o,a[o])}),r+s},t)}const Ro={scope:P.BLOCK,whitelist:["right","center","justify"]},mv=new he("align","align",Ro),vh=new te("align","ql-align",Ro),yh=new Fe("align","text-align",Ro);class wh extends Fe{value(t){let n=super.value(t);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const bv=new te("color","ql-color",{scope:P.INLINE}),Bo=new wh("color","color",{scope:P.INLINE}),vv=new te("background","ql-bg",{scope:P.INLINE}),jo=new wh("background","background-color",{scope:P.INLINE});class gn extends fn{static create(t){const n=super.create(t);return n.setAttribute("spellcheck","false"),n}code(t,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(t,t+n)}html(t,n){return`<pre>
${ts(this.code(t,n))}
</pre>`}}class St extends Tt{static register(){E.register(gn)}}q(St,"TAB","  ");class Po extends de{}Po.blotName="code";Po.tagName="CODE";St.blotName="code-block";St.className="ql-code-block";St.tagName="DIV";gn.blotName="code-block-container";gn.className="ql-code-block-container";gn.tagName="DIV";gn.allowedChildren=[St];St.allowedChildren=[Jt,ee,Fn];St.requiredContainer=gn;const $o={scope:P.BLOCK,whitelist:["rtl"]},_h=new he("direction","dir",$o),Th=new te("direction","ql-direction",$o),xh=new Fe("direction","direction",$o),Eh={scope:P.INLINE,whitelist:["serif","monospace"]},Ah=new te("font","ql-font",Eh);class yv extends Fe{value(t){return super.value(t).replace(/["']/g,"")}}const Nh=new yv("font","font-family",Eh),Oh=new te("size","ql-size",{scope:P.INLINE,whitelist:["small","large","huge"]}),Sh=new Fe("size","font-size",{scope:P.INLINE,whitelist:["10px","18px","32px"]}),wv=Ae("quill:keyboard"),_v=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class es extends ne{static match(t,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==t[r]&&n[r]!==null)?!1:n.key===t.key||n.key===t.which}constructor(t,n){super(t,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=xv(t);if(i==null){wv.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(a=>{const o={...i,key:a,...n,...r};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const i=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(T=>es.match(t,T));if(i.length===0)return;const s=E.find(t.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[o,c]=this.quill.getLine(a.index),[u,f]=this.quill.getLeaf(a.index),[g,d]=a.length===0?[u,f]:this.quill.getLeaf(a.index+a.length),p=u instanceof Fi?u.value().slice(0,f):"",m=g instanceof Fi?g.value().slice(d):"",_={collapsed:a.length===0,empty:a.length===0&&o.length()<=1,format:this.quill.getFormat(a),line:o,offset:c,prefix:p,suffix:m,event:t};i.some(T=>{if(T.collapsed!=null&&T.collapsed!==_.collapsed||T.empty!=null&&T.empty!==_.empty||T.offset!=null&&T.offset!==_.offset)return!1;if(Array.isArray(T.format)){if(T.format.every(A=>_.format[A]==null))return!1}else if(typeof T.format=="object"&&!Object.keys(T.format).every(A=>T.format[A]===!0?_.format[A]!=null:T.format[A]===!1?_.format[A]==null:Mo(T.format[A],_.format[A])))return!1;return T.prefix!=null&&!T.prefix.test(_.prefix)||T.suffix!=null&&!T.suffix.test(_.suffix)?!1:T.handler.call(this,a,_,T)!==!0})&&t.preventDefault()})}handleBackspace(t,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(t.index);let a=new j().retain(t.index-r).delete(r);if(n.offset===0){const[o]=this.quill.getLine(t.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const u=s.formats(),f=this.quill.getFormat(t.index-1,1);if(i=Ut.AttributeMap.diff(u,f)||{},Object.keys(i).length>0){const g=new j().retain(t.index+s.length()-2).retain(1,i);a=a.compose(g)}}}this.quill.updateContents(a,E.sources.USER),this.quill.focus()}handleDelete(t,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(t.index>=this.quill.getLength()-r)return;let i={};const[s]=this.quill.getLine(t.index);let a=new j().retain(t.index).delete(r);if(n.offset>=s.length()-1){const[o]=this.quill.getLine(t.index+1);if(o){const c=s.formats(),u=this.quill.getFormat(t.index,1);i=Ut.AttributeMap.diff(c,u)||{},Object.keys(i).length>0&&(a=a.retain(o.length()-1).retain(1,i))}}this.quill.updateContents(a,E.sources.USER),this.quill.focus()}handleDeleteRange(t){Fo({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,n){const r=Object.keys(n.format).reduce((s,a)=>(this.quill.scroll.query(a,P.BLOCK)&&!Array.isArray(n.format[a])&&(s[a]=n.format[a]),s),{}),i=new j().retain(t.index).delete(t.length).insert(`
`,r);this.quill.updateContents(i,E.sources.USER),this.quill.setSelection(t.index+1,E.sources.SILENT),this.quill.focus()}}const Tv={bindings:{bold:ga("bold"),italic:ga("italic"),underline:ga("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",E.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",E.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(e,t){t.format.indent!=null?this.quill.format("indent","-1",E.sources.USER):t.format.list!=null&&this.quill.format("list",!1,E.sources.USER)}},"indent code-block":lc(!0),"outdent code-block":lc(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,E.sources.USER)}},tab:{key:"Tab",handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();const n=new j().retain(e.index).delete(e.length).insert("	");return this.quill.updateContents(n,E.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,E.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,E.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(e,t){const n={list:!1};t.format.indent&&(n.indent=!1),this.quill.formatLine(e.index,e.length,n,E.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(e){const[t,n]=this.quill.getLine(e.index),r={...t.formats(),list:"checked"},i=new j().retain(e.index).insert(`
`,r).retain(t.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,E.sources.USER),this.quill.setSelection(e.index+1,E.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(e,t){const[n,r]=this.quill.getLine(e.index),i=new j().retain(e.index).insert(`
`,t.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,E.sources.USER),this.quill.setSelection(e.index+1,E.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(e){const t=this.quill.getModule("table");if(t){const[n,r,i,s]=t.getTable(e),a=Ev(n,r,i,s);if(a==null)return;let o=n.offset();if(a<0){const c=new j().retain(o).insert(`
`);this.quill.updateContents(c,E.sources.USER),this.quill.setSelection(e.index+1,e.length,E.sources.SILENT)}else if(a>0){o+=n.length();const c=new j().retain(o).insert(`
`);this.quill.updateContents(c,E.sources.USER),this.quill.setSelection(o,E.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(e,t){const{event:n,line:r}=t,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,E.sources.USER):this.quill.setSelection(i+r.length(),E.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=t.prefix,[r,i]=this.quill.getLine(e.index);if(i>n)return!0;let s;switch(t.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(e.index," ",E.sources.USER),this.quill.history.cutoff();const a=new j().retain(e.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:s});return this.quill.updateContents(a,E.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,E.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(e){const[t,n]=this.quill.getLine(e.index);let r=2,i=t;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const s=new j().retain(e.index+t.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,E.sources.USER),this.quill.setSelection(e.index-1,E.sources.SILENT),!1}return!0}},"embed left":Ni("ArrowLeft",!1),"embed left shift":Ni("ArrowLeft",!0),"embed right":Ni("ArrowRight",!1),"embed right shift":Ni("ArrowRight",!0),"table down":cc(!1),"table up":cc(!0)}};es.DEFAULTS=Tv;function lc(e){return{key:"Tab",shiftKey:!e,format:{"code-block":!0},handler(t,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(t.length===0&&!r.shiftKey){this.quill.insertText(t.index,s,E.sources.USER),this.quill.setSelection(t.index+s.length,E.sources.SILENT);return}const a=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:o,length:c}=t;a.forEach((u,f)=>{e?(u.insertAt(0,s),f===0?o+=s.length:c+=s.length):u.domNode.textContent.startsWith(s)&&(u.deleteAt(0,s.length),f===0?o-=s.length:c-=s.length)}),this.quill.update(E.sources.USER),this.quill.setSelection(o,c,E.sources.SILENT)}}}function Ni(e,t){return{key:e,shiftKey:t,altKey:null,[e==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;e==="ArrowRight"&&(i+=r.length+1);const[s]=this.quill.getLeaf(i);return s instanceof Dt?(e==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,E.sources.USER):this.quill.setSelection(r.index-1,E.sources.USER):t?this.quill.setSelection(r.index,r.length+1,E.sources.USER):this.quill.setSelection(r.index+r.length+1,E.sources.USER),!1):!0}}}function ga(e){return{key:e[0],shortKey:!0,handler(t,n){this.quill.format(e,!n.format[e],E.sources.USER)}}}function cc(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,n){const r=e?"prev":"next",i=n.line,s=i.parent[r];if(s!=null){if(s.statics.blotName==="table-row"){let a=s.children.head,o=i;for(;o.prev!=null;)o=o.prev,a=a.next;const c=a.offset(this.quill.scroll)+Math.min(n.offset,a.length()-1);this.quill.setSelection(c,0,E.sources.USER)}}else{const a=i.table()[r];a!=null&&(e?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,E.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,E.sources.USER))}return!1}}}function xv(e){if(typeof e=="string"||typeof e=="number")e={key:e};else if(typeof e=="object")e=kn(e);else return null;return e.shortKey&&(e[_v]=e.shortKey,delete e.shortKey),e}function Fo(e){let{quill:t,range:n}=e;const r=t.getLines(n);let i={};if(r.length>1){const s=r[0].formats(),a=r[r.length-1].formats();i=Ut.AttributeMap.diff(a,s)||{}}t.deleteText(n,E.sources.USER),Object.keys(i).length>0&&t.formatLine(n.index,1,i,E.sources.USER),t.setSelection(n.index,E.sources.SILENT)}function Ev(e,t,n,r){return t.prev==null&&t.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const Av=/font-weight:\s*normal/,Nv=["P","OL","UL"],uc=e=>e&&Nv.includes(e.tagName),Ov=e=>{Array.from(e.querySelectorAll("br")).filter(t=>uc(t.previousElementSibling)&&uc(t.nextElementSibling)).forEach(t=>{var n;(n=t.parentNode)==null||n.removeChild(t)})},Sv=e=>{Array.from(e.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var n;return(n=t.getAttribute("style"))==null?void 0:n.match(Av)}).forEach(t=>{var r;const n=e.createDocumentFragment();n.append(...t.childNodes),(r=t.parentNode)==null||r.replaceChild(n,t)})};function Cv(e){e.querySelector('[id^="docs-internal-guid-"]')&&(Sv(e),Ov(e))}const Lv=/\bmso-list:[^;]*ignore/i,Iv=/\bmso-list:[^;]*\bl(\d+)/i,Mv=/\bmso-list:[^;]*\blevel(\d+)/i,qv=(e,t)=>{const n=e.getAttribute("style"),r=n==null?void 0:n.match(Iv);if(!r)return null;const i=Number(r[1]),s=n==null?void 0:n.match(Mv),a=s?Number(s[1]):1,o=new RegExp(`@list l${i}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=t.match(o),u=c&&c[1]==="bullet"?"bullet":"ordered";return{id:i,indent:a,type:u,element:e}},kv=e=>{var a,o;const t=Array.from(e.querySelectorAll("[style*=mso-list]")),n=[],r=[];t.forEach(c=>{(c.getAttribute("style")||"").match(Lv)?n.push(c):r.push(c)}),n.forEach(c=>{var u;return(u=c.parentNode)==null?void 0:u.removeChild(c)});const i=e.documentElement.innerHTML,s=r.map(c=>qv(c,i)).filter(c=>c);for(;s.length;){const c=[];let u=s.shift();for(;u;)c.push(u),u=s.length&&((a=s[0])==null?void 0:a.element)===u.element.nextElementSibling&&s[0].id===u.id?s.shift():null;const f=document.createElement("ul");c.forEach(p=>{const m=document.createElement("li");m.setAttribute("data-list",p.type),p.indent>1&&m.setAttribute("class",`ql-indent-${p.indent-1}`),m.innerHTML=p.element.innerHTML,f.appendChild(m)});const g=(o=c[0])==null?void 0:o.element,{parentNode:d}=g??{};g&&(d==null||d.replaceChild(f,g)),c.slice(1).forEach(p=>{let{element:m}=p;d==null||d.removeChild(m)})}};function Dv(e){e.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&kv(e)}const Rv=[Dv,Cv],Bv=e=>{e.documentElement&&Rv.forEach(t=>{t(e)})},jv=Ae("quill:clipboard"),Pv=[[Node.TEXT_NODE,Yv],[Node.TEXT_NODE,dc],["br",Vv],[Node.ELEMENT_NODE,dc],[Node.ELEMENT_NODE,Hv],[Node.ELEMENT_NODE,Uv],[Node.ELEMENT_NODE,Zv],["li",Wv],["ol, ul",Gv],["pre",zv],["tr",Xv],["b",pa("bold")],["i",pa("italic")],["strike",pa("strike")],["style",Kv]],$v=[mv,_h].reduce((e,t)=>(e[t.keyName]=t,e),{}),hc=[yh,jo,Bo,xh,Nh,Sh].reduce((e,t)=>(e[t.keyName]=t,e),{});class Ch extends ne{constructor(t,n){super(t,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Pv.concat(this.options.matchers??[]).forEach(r=>{let[i,s]=r;this.addMatcher(i,s)})}addMatcher(t,n){this.matchers.push([t,n])}convert(t){let{html:n,text:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[St.blotName])return new j().insert(r||"",{[St.blotName]:i[St.blotName]});if(!n)return new j().insert(r||"",i);const s=this.convertHTML(n);return Fr(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new j().retain(s.length()-1).delete(1)):s}normalizeHTML(t){Bv(t)}convertHTML(t){const n=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[s,a]=this.prepareMatching(r,i);return Uo(this.quill.scroll,r,s,a,i)}dangerouslyPasteHTML(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.sources.API;if(typeof t=="string"){const i=this.convert({html:t,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,E.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new j().retain(t).concat(i),r),this.quill.setSelection(t+i.length(),E.sources.SILENT)}}onCaptureCopy(t){var a,o;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:s}=this.onCopy(r,n);(a=t.clipboardData)==null||a.setData("text/plain",s),(o=t.clipboardData)==null||o.setData("text/html",i),n&&Fo({range:r,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(t){var a,o,c,u,f;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(a=t.clipboardData)==null?void 0:a.getData("text/html");let i=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(!r&&!i){const g=(c=t.clipboardData)==null?void 0:c.getData("text/uri-list");g&&(i=this.normalizeURIList(g))}const s=Array.from(((u=t.clipboardData)==null?void 0:u.files)||[]);if(!r&&s.length>0){this.quill.uploader.upload(n,s);return}if(r&&s.length>0){const g=new DOMParser().parseFromString(r,"text/html");if(g.body.childElementCount===1&&((f=g.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,s);return}}this.onPaste(n,{html:r,text:i})}onCopy(t){const n=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:n}}onPaste(t,n){let{text:r,html:i}=n;const s=this.quill.getFormat(t.index),a=this.convert({text:r,html:i},s);jv.log("onPaste",a,{text:r,html:i});const o=new j().retain(t.index).delete(t.length).concat(a);this.quill.updateContents(o,E.sources.USER),this.quill.setSelection(o.length()-t.length,E.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,n){const r=[],i=[];return this.matchers.forEach(s=>{const[a,o]=s;switch(a){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:r.push(o);break;default:Array.from(t.querySelectorAll(a)).forEach(c=>{if(n.has(c)){const u=n.get(c);u==null||u.push(o)}else n.set(c,[o])});break}}),[r,i]}}q(Ch,"DEFAULTS",{matchers:[]});function pn(e,t,n,r){return r.query(t)?e.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[t])return i.push(s);const a=n?{[t]:n}:{};return i.insert(s.insert,{...a,...s.attributes})},new j):e}function Fr(e,t){let n="";for(let r=e.ops.length-1;r>=0&&n.length<t.length;--r){const i=e.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*t.length)===t}function Me(e,t){if(!(e instanceof Element))return!1;const n=t.query(e);return n&&n.prototype instanceof Dt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(e.tagName.toLowerCase())}function Fv(e,t){return e.previousElementSibling&&e.nextElementSibling&&!Me(e.previousElementSibling,t)&&!Me(e.nextElementSibling,t)}const Oi=new WeakMap;function Lh(e){return e==null?!1:(Oi.has(e)||(e.tagName==="PRE"?Oi.set(e,!0):Oi.set(e,Lh(e.parentNode))),Oi.get(e))}function Uo(e,t,n,r,i){return t.nodeType===t.TEXT_NODE?r.reduce((s,a)=>a(t,s,e),new j):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((s,a)=>{let o=Uo(e,a,n,r,i);return a.nodeType===t.ELEMENT_NODE&&(o=n.reduce((c,u)=>u(a,c,e),o),o=(i.get(a)||[]).reduce((c,u)=>u(a,c,e),o)),s.concat(o)},new j):new j}function pa(e){return(t,n,r)=>pn(n,e,!0,r)}function Uv(e,t,n){const r=he.keys(e),i=te.keys(e),s=Fe.keys(e),a={};return r.concat(i).concat(s).forEach(o=>{let c=n.query(o,P.ATTRIBUTE);c!=null&&(a[c.attrName]=c.value(e),a[c.attrName])||(c=$v[o],c!=null&&(c.attrName===o||c.keyName===o)&&(a[c.attrName]=c.value(e)||void 0),c=hc[o],c!=null&&(c.attrName===o||c.keyName===o)&&(c=hc[o],a[c.attrName]=c.value(e)||void 0))}),Object.entries(a).reduce((o,c)=>{let[u,f]=c;return pn(o,u,f,n)},t)}function Hv(e,t,n){const r=n.query(e);if(r==null)return t;if(r.prototype instanceof Dt){const i={},s=r.value(e);if(s!=null)return i[r.blotName]=s,new j().insert(i,r.formats(e,n))}else if(r.prototype instanceof Mr&&!Fr(t,`
`)&&t.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return pn(t,r.blotName,r.formats(e,n),n);return t}function Vv(e,t){return Fr(t,`
`)||t.insert(`
`),t}function zv(e,t,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(e,n):!0;return pn(t,"code-block",i,n)}function Kv(){return new j}function Wv(e,t,n){const r=n.query(e);if(r==null||r.blotName!=="list"||!Fr(t,`
`))return t;let i=-1,s=e.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?t:t.reduce((a,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?a.push(o):a.insert(o.insert,{indent:i,...o.attributes||{}}):a,new j)}function Gv(e,t,n){const r=e;let i=r.tagName==="OL"?"ordered":"bullet";const s=r.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),pn(t,"list",i,n)}function dc(e,t,n){if(!Fr(t,`
`)){if(Me(e,n)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let r=e.nextSibling;for(;r!=null;){if(Me(r,n))return t.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof $t)return t.insert(`
`);r=r.firstChild}}}return t}function Zv(e,t,n){var s;const r={},i=e.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((a,o)=>{let[c,u]=o;return pn(a,c,u,n)},t),parseFloat(i.textIndent||0)>0?new j().insert("	").concat(t):t}function Xv(e,t,n){var i,s;const r=((i=e.parentElement)==null?void 0:i.tagName)==="TABLE"?e.parentElement:(s=e.parentElement)==null?void 0:s.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(e)+1;return pn(t,"table",o,n)}return t}function Yv(e,t,n){var i;let r=e.data;if(((i=e.parentElement)==null?void 0:i.tagName)==="O:P")return t.insert(r.trim());if(!Lh(e)){if(r.trim().length===0&&r.includes(`
`)&&!Fv(e,n))return t;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(e.previousSibling==null&&e.parentElement!=null&&Me(e.parentElement,n)||e.previousSibling instanceof Element&&Me(e.previousSibling,n))&&(r=r.replace(/^ /,"")),(e.nextSibling==null&&e.parentElement!=null&&Me(e.parentElement,n)||e.nextSibling instanceof Element&&Me(e.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return t.insert(r)}class Ih extends ne{constructor(n,r){super(n,r);q(this,"lastRecorded",0);q(this,"ignoreChange",!1);q(this,"stack",{undo:[],redo:[]});q(this,"currentRange",null);this.quill.on(E.events.EDITOR_CHANGE,(i,s,a,o)=>{i===E.events.SELECTION_CHANGE?s&&o!==E.sources.SILENT&&(this.currentRange=s):i===E.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===E.sources.USER?this.record(s,a):this.transform(s)),this.currentRange=Xa(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const s=this.quill.getContents(),a=i.delta.invert(s);this.stack[r].push({delta:a,range:Xa(i.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,E.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),s=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),s=o.range)}else this.lastRecorded=a;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){fc(this.stack.undo,n),fc(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,E.sources.USER);else{const r=Qv(this.quill.scroll,n.delta);this.quill.setSelection(r,E.sources.USER)}}}q(Ih,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function fc(e,t){let n=t;for(let r=e.length-1;r>=0;r-=1){const i=e[r];e[r]={delta:n.transform(i.delta,!0),range:i.range&&Xa(i.range,n)},n=i.delta.transform(n),e[r].delta.length()===0&&e.splice(r,1)}}function Jv(e,t){const n=t.ops[t.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>e.query(r,P.BLOCK)!=null):!1}function Qv(e,t){const n=t.reduce((i,s)=>i+(s.delete||0),0);let r=t.length()-n;return Jv(e,t)&&(r-=1),r}function Xa(e,t){if(!e)return e;const n=t.transformPosition(e.index),r=t.transformPosition(e.index+e.length);return{index:n,length:r-n}}class Mh extends ne{constructor(t,n){super(t,n),t.root.addEventListener("drop",r=>{var a;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}const s=i&&t.selection.normalizeNative(i);if(s){const o=t.selection.normalizedToRange(s);(a=r.dataTransfer)!=null&&a.files&&this.upload(o,r.dataTransfer.files)}})}upload(t,n){const r=[];Array.from(n).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,t,r)}}Mh.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(e,t){if(!this.quill.scroll.query("image"))return;const n=t.map(r=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((s,a)=>s.insert({image:a}),new j().retain(e.index).delete(e.length));this.quill.updateContents(i,R.sources.USER),this.quill.setSelection(e.index+r.length,R.sources.SILENT)})}};const t0=["insertText","insertReplacementText"];class e0 extends ne{constructor(t,n){super(t,n),t.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||t.on(E.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){Fo({range:t,quill:this.quill})}replaceText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(n){const r=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new j().retain(t.index).insert(n,r),E.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+n.length,0,E.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!t0.includes(t.inputType))return;const n=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=n0(t);if(r==null)return;const i=this.quill.selection.normalizeNative(n),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,r)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function n0(e){var t;return typeof e.data=="string"?e.data:(t=e.dataTransfer)!=null&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}const r0=/Mac/i.test(navigator.platform),i0=100,s0=e=>!!(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Home"||r0&&e.key==="a"&&e.ctrlKey===!0);class a0 extends ne{constructor(n,r){super(n,r);q(this,"isListening",!1);q(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:s}=r;if(!(i instanceof Xt)||!i.uiNode)return!0;const a=getComputedStyle(i.domNode).direction==="rtl";return a&&s.key!=="ArrowRight"||!a&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),E.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&s0(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+i0,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof Xt)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}E.register({"blots/block":Tt,"blots/block/embed":$t,"blots/break":ee,"blots/container":fn,"blots/cursor":Fn,"blots/embed":Do,"blots/inline":de,"blots/scroll":qn,"blots/text":Jt,"modules/clipboard":Ch,"modules/history":Ih,"modules/keyboard":es,"modules/uploader":Mh,"modules/input":e0,"modules/uiNode":a0});class o0 extends te{add(t,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(t)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(t),!0):super.add(t,r.toString())}canAdd(t,n){return super.canAdd(t,n)||super.canAdd(t,parseInt(n,10))}value(t){return parseInt(super.value(t),10)||void 0}}const l0=new o0("indent","ql-indent",{scope:P.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Ya extends Tt{}q(Ya,"blotName","blockquote"),q(Ya,"tagName","blockquote");class Ja extends Tt{static formats(t){return this.tagName.indexOf(t.tagName)+1}}q(Ja,"blotName","header"),q(Ja,"tagName",["H1","H2","H3","H4","H5","H6"]);class Ur extends fn{}Ur.blotName="list-container";Ur.tagName="OL";class Hr extends Tt{static create(t){const n=super.create();return n.setAttribute("data-list",t),n}static formats(t){return t.getAttribute("data-list")||void 0}static register(){E.register(Ur)}constructor(t,n){super(t,n);const r=n.ownerDocument.createElement("span"),i=s=>{if(!t.isEnabled())return;const a=this.statics.formats(n,t);a==="checked"?(this.format("list","unchecked"),s.preventDefault()):a==="unchecked"&&(this.format("list","checked"),s.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(t,n)}}Hr.blotName="list";Hr.tagName="LI";Ur.allowedChildren=[Hr];Hr.requiredContainer=Ur;class kr extends de{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}q(kr,"blotName","bold"),q(kr,"tagName",["STRONG","B"]);class Qa extends kr{}q(Qa,"blotName","italic"),q(Qa,"tagName",["EM","I"]);class qe extends de{static create(t){const n=super.create(t);return n.setAttribute("href",this.sanitize(t)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(t){return t.getAttribute("href")}static sanitize(t){return qh(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,n){t!==this.statics.blotName||!n?super.format(t,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}q(qe,"blotName","link"),q(qe,"tagName","A"),q(qe,"SANITIZED_URL","about:blank"),q(qe,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function qh(e,t){const n=document.createElement("a");n.href=e;const r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}class to extends de{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}q(to,"blotName","script"),q(to,"tagName",["SUB","SUP"]);class eo extends kr{}q(eo,"blotName","strike"),q(eo,"tagName",["S","STRIKE"]);class no extends de{}q(no,"blotName","underline"),q(no,"tagName","U");class Mi extends Do{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(t);return typeof t=="string"&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}q(Mi,"blotName","formula"),q(Mi,"className","ql-formula"),q(Mi,"tagName","SPAN");const gc=["alt","height","width"];class ro extends Dt{static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("src",this.sanitize(t)),n}static formats(t){return gc.reduce((n,r)=>(t.hasAttribute(r)&&(n[r]=t.getAttribute(r)),n),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return qh(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,n){gc.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}}q(ro,"blotName","image"),q(ro,"tagName","IMG");const pc=["height","width"];class qi extends $t{static create(t){const n=super.create(t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(t)),n}static formats(t){return pc.reduce((n,r)=>(t.hasAttribute(r)&&(n[r]=t.getAttribute(r)),n),{})}static sanitize(t){return qe.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,n){pc.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}q(qi,"blotName","video"),q(qi,"className","ql-video"),q(qi,"tagName","IFRAME");const _r=new te("code-token","hljs",{scope:P.INLINE});class Te extends de{static formats(t,n){for(;t!=null&&t!==n.domNode;){if(t.classList&&t.classList.contains(St.className))return super.formats(t,n);t=t.parentNode}}constructor(t,n,r){super(t,n,r),_r.add(this.domNode,r)}format(t,n){t!==Te.blotName?super.format(t,n):n?_r.add(this.domNode,n):(_r.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),_r.value(this.domNode)||this.unwrap()}}Te.blotName="code-token";Te.className="ql-token";class Pt extends St{static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("data-language",t),n}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(t,n)}replaceWith(t,n){return this.formatAt(0,this.length(),Te.blotName,!1),super.replaceWith(t,n)}}class Ar extends gn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,n){t===Pt.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(t,n)}))}formatAt(t,n,r,i){r===Pt.blotName&&(this.forceNext=!0),super.formatAt(t,n,r,i)}highlight(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,s=Pt.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const a=this.children.reduce((c,u)=>c.concat(mh(u,!1)),new j),o=t(i,s);a.diff(o).reduce((c,u)=>{let{retain:f,attributes:g}=u;return f?(g&&Object.keys(g).forEach(d=>{[Pt.blotName,Te.blotName].includes(d)&&this.formatAt(c,f,d,g[d])}),c+f):c},0)}this.cachedText=i,this.forceNext=!1}}html(t,n){const[r]=this.children.find(t);return`<pre data-language="${r?Pt.formats(r.domNode):"plain"}">
${ts(this.code(t,n))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Pt.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Ar.allowedChildren=[Pt];Pt.requiredContainer=Ar;Pt.allowedChildren=[Te,Fn,Jt,ee];const c0=(e,t,n)=>{if(typeof e.versionString=="string"){const r=e.versionString.split(".")[0];if(parseInt(r,10)>=11)return e.highlight(n,{language:t}).value}return e.highlight(t,n).value};class kh extends ne{static register(){E.register(Te,!0),E.register(Pt,!0),E.register(Ar,!0)}constructor(t,n){if(super(t,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:s}=i;return r[s]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(E.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Ar))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:s}=r;const a=n.ownerDocument.createElement("option");a.textContent=s,a.setAttribute("value",i),n.appendChild(a)}),n.addEventListener("change",()=>{t.format(Pt.blotName,n.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(n),t.children.head&&(n.value=Pt.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(E.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(E.sources.USER);const r=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Ar):[t]).forEach(s=>{s.highlight(this.highlightBlot,n)}),this.quill.update(E.sources.SILENT),r!=null&&this.quill.setSelection(r,E.sources.SILENT)}highlightBlot(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return ts(t).split(`
`).reduce((i,s,a)=>(a!==0&&i.insert(`
`,{[St.blotName]:n}),i.insert(s)),new j);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(St.className),r.innerHTML=c0(this.options.hljs,n,t),Uo(this.quill.scroll,r,[(i,s)=>{const a=_r.value(i);return a?s.compose(new j().retain(s.length(),{[Te.blotName]:a})):s}],[(i,s)=>i.data.split(`
`).reduce((a,o,c)=>(c!==0&&a.insert(`
`,{[St.blotName]:n}),a.insert(o)),s)],new WeakMap)}}kh.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Or=class Or extends Tt{static create(t){const n=super.create();return t?n.setAttribute("data-row",t):n.setAttribute("data-row",Ho()),n}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,n){t===Or.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(t,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};q(Or,"blotName","table"),q(Or,"tagName","TD");let Gt=Or;class xe extends fn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===n.table&&t.table===r.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const s=this.splitAfter(n);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}q(xe,"blotName","table-row"),q(xe,"tagName","TR");class ue extends fn{}q(ue,"blotName","table-body"),q(ue,"tagName","TBODY");class Hn extends fn{balanceCells(){const t=this.descendants(xe),n=t.reduce((r,i)=>Math.max(i.children.length,r),0);t.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=Gt.formats(r.children.head.domNode));const s=this.scroll.create(Gt.blotName,i);r.appendChild(s),s.optimize()})})}cells(t){return this.rows().map(n=>n.children.at(t))}deleteColumn(t){const[n]=this.descendant(ue);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(t);i!=null&&i.remove()})}insertColumn(t){const[n]=this.descendant(ue);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(t),s=Gt.formats(r.children.head.domNode),a=this.scroll.create(Gt.blotName,s);r.insertBefore(a,i)})}insertRow(t){const[n]=this.descendant(ue);if(n==null||n.children.head==null)return;const r=Ho(),i=this.scroll.create(xe.blotName);n.children.head.children.forEach(()=>{const a=this.scroll.create(Gt.blotName,r);i.appendChild(a)});const s=n.children.at(t);n.insertBefore(i,s)}rows(){const t=this.children.head;return t==null?[]:t.children.map(n=>n)}}q(Hn,"blotName","table-container"),q(Hn,"tagName","TABLE");Hn.allowedChildren=[ue];ue.requiredContainer=Hn;ue.allowedChildren=[xe];xe.requiredContainer=ue;xe.allowedChildren=[Gt];Gt.requiredContainer=xe;function Ho(){return`row-${Math.random().toString(36).slice(2,6)}`}class u0 extends ne{static register(){E.register(Gt),E.register(xe),E.register(ue),E.register(Hn)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Hn).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,n]=this.getTable();n!=null&&(t.deleteColumn(n.cellOffset()),this.quill.update(E.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(E.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const n=t.offset();t.remove(),this.quill.update(E.sources.USER),this.quill.setSelection(n,E.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(t.index);if(n==null||n.statics.blotName!==Gt.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(t){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const a=s.cellOffset();r.insertColumn(a+t),this.quill.update(E.sources.USER);let o=i.rowOffset();t===0&&(o+=1),this.quill.setSelection(n.index+o,n.length,E.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const n=this.quill.getSelection();if(!n)return;const[r,i,s]=this.getTable(n);if(s==null)return;const a=i.rowOffset();r.insertRow(a+t),this.quill.update(E.sources.USER),t>0?this.quill.setSelection(n,E.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,E.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(t).fill(0).reduce(s=>{const a=new Array(n).fill(`
`).join("");return s.insert(a,{table:Ho()})},new j().retain(r.index));this.quill.updateContents(i,E.sources.USER),this.quill.setSelection(r.index,E.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(E.events.SCROLL_OPTIMIZE,t=>{t.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(E.events.TEXT_CHANGE,(r,i,s)=>{s===E.sources.USER&&this.balanceTables()}),!0):!1)})}}const mc=Ae("quill:toolbar");class Vo extends ne{constructor(t,n){var r,i;if(super(t,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),h0(s,this.options.container),(i=(r=t.container)==null?void 0:r.parentNode)==null||i.insertBefore(s,t.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){mc.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var o;const a=(o=this.options.handlers)==null?void 0:o[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(E.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(t,n){this.handlers[t]=n}attach(t){let n=Array.from(t.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){mc.warn("ignoring attaching to nonexistent format",n,t);return}const r=t.tagName==="SELECT"?"change":"click";t.addEventListener(r,i=>{let s;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const o=t.options[t.selectedIndex];o.hasAttribute("selected")?s=!1:s=o.value||!1}else t.classList.contains("ql-active")?s=!1:s=t.value||!t.hasAttribute("value"),i.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,s);else if(this.quill.scroll.query(n).prototype instanceof Dt){if(s=prompt(`Enter ${n}`),!s)return;this.quill.updateContents(new j().retain(a.index).delete(a.length).insert({[n]:s}),E.sources.USER)}else this.quill.format(n,s,E.sources.USER);this.update(a)}),this.controls.push([n,t])}update(t){const n=t==null?{}:this.quill.getFormat(t);this.controls.forEach(r=>{const[i,s]=r;if(s.tagName==="SELECT"){let a=null;if(t==null)a=null;else if(n[i]==null)a=s.querySelector("option[selected]");else if(!Array.isArray(n[i])){let o=n[i];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),a=s.querySelector(`option[value="${o}"]`)}a==null?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(t==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const a=n[i],o=a===s.getAttribute("value")||a!=null&&a.toString()===s.getAttribute("value")||a==null&&!s.getAttribute("value");s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}else{const a=n[i]!=null;s.classList.toggle("ql-active",a),s.setAttribute("aria-pressed",a.toString())}})}}Vo.DEFAULTS={};function bc(e,t,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${t}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${t}: ${n}`)):r.setAttribute("aria-label",t),e.appendChild(r)}function h0(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")bc(r,i);else{const s=Object.keys(i)[0],a=i[s];Array.isArray(a)?d0(r,s,a):bc(r,s,a)}}),e.appendChild(r)})}function d0(e,t,n){const r=document.createElement("select");r.classList.add(`ql-${t}`),n.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),r.appendChild(s)}),e.appendChild(r)}Vo.DEFAULTS={container:null,handlers:{clean(){const e=this.quill.getSelection();if(e!=null)if(e.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(n=>{this.quill.scroll.query(n,P.INLINE)!=null&&this.quill.format(n,!1,E.sources.USER)})}else this.quill.removeFormat(e.index,e.length,E.sources.USER)},direction(e){const{align:t}=this.quill.getFormat();e==="rtl"&&t==null?this.quill.format("align","right",E.sources.USER):!e&&t==="right"&&this.quill.format("align",!1,E.sources.USER),this.quill.format("direction",e,E.sources.USER)},indent(e){const t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0,10);if(e==="+1"||e==="-1"){let i=e==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,E.sources.USER)}},link(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,E.sources.USER)},list(e){const t=this.quill.getSelection(),n=this.quill.getFormat(t);e==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,E.sources.USER):this.quill.format("list","unchecked",E.sources.USER):this.quill.format("list",e,E.sources.USER)}}};const f0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',g0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',p0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',m0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',b0='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',v0='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',y0='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',w0='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',vc='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',_0='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',T0='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',x0='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',E0='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',A0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',N0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',O0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',S0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',C0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',L0='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',I0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',M0='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',q0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',k0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',D0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',R0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',B0='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',j0='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',P0='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',$0='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',F0='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',U0='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',H0='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',V0='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Dr={align:{"":f0,center:g0,right:p0,justify:m0},background:b0,blockquote:v0,bold:y0,clean:w0,code:vc,"code-block":vc,color:_0,direction:{"":T0,rtl:x0},formula:E0,header:{1:A0,2:N0,3:O0,4:S0,5:C0,6:L0},italic:I0,image:M0,indent:{"+1":q0,"-1":k0},link:D0,list:{bullet:R0,check:B0,ordered:j0},script:{sub:P0,super:$0},strike:F0,table:U0,underline:H0,video:V0},z0='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let yc=0;function wc(e,t){e.setAttribute(t,`${e.getAttribute(t)!=="true"}`)}class ns{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),wc(this.label,"aria-expanded"),wc(this.options,"aria-hidden")}buildItem(t){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=t.getAttribute("value");return r&&n.setAttribute("data-value",r),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=z0,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${yc}`,yc+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);t.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");t!==r&&(r!=null&&r.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class Dh extends ns{constructor(t,n){super(t),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(t){const n=super.buildItem(t);return n.style.backgroundColor=t.getAttribute("value")||"",n}selectItem(t,n){super.selectItem(t,n);const r=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class Rh extends ns{constructor(t,n){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,n){super.selectItem(t,n);const r=t||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const K0=e=>{const{overflowY:t}=getComputedStyle(e,null);return t!=="visible"&&t!=="clip"};class Bh{constructor(t,n){this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,K0(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const n=t.left+t.width/2-this.root.offsetWidth/2,r=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let a=0;if(s.right>i.right&&(a=i.right-s.right,this.root.style.left=`${n+a}px`),s.left<i.left&&(a=i.left-s.left,this.root.style.left=`${n+a}px`),s.bottom>i.bottom){const o=s.bottom-s.top,c=t.bottom-t.top+o;this.root.style.top=`${r-c}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const W0=[!1,"center","right","justify"],G0=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Z0=[!1,"serif","monospace"],X0=["1","2","3",!1],Y0=["small",!1,"large","huge"];class Vr extends Un{constructor(t,n){super(t,n);const r=i=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};t.emitter.listenDOM("click",document.body,r)}addModule(t){const n=super.addModule(t);return t==="toolbar"&&this.extendToolbar(n),n}buildButtons(t,n){Array.from(t).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),n[s]!=null))if(s==="direction")r.innerHTML=n[s][""]+n[s].rtl;else if(typeof n[s]=="string")r.innerHTML=n[s];else{const a=r.value||"";a!=null&&n[s][a]&&(r.innerHTML=n[s][a])}})})}buildPickers(t,n){this.pickers=Array.from(t).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&mr(i,W0),typeof n.align=="object"))return new Rh(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&mr(i,G0,s==="background"?"#ffffff":"#000000"),new Dh(i,n[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?mr(i,Z0):i.classList.contains("ql-header")?mr(i,X0):i.classList.contains("ql-size")&&mr(i,Y0)),new ns(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(R.events.EDITOR_CHANGE,r)}}Vr.DEFAULTS=De({},Un.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let e=this.container.querySelector("input.ql-image[type=file]");e==null&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=""}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class jh extends Bh{constructor(t,n){super(t,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,R.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,R.sources.USER)),this.quill.root.scrollTop=n;break}case"video":t=J0(t);case"formula":{if(!t)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,R.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",R.sources.USER),this.quill.setSelection(r+2,R.sources.USER)}break}}this.textbox.value="",this.hide()}}function J0(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:e}function mr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),e.appendChild(i)})}const Q0=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Ph extends jh{constructor(t,n){super(t,n),this.quill.on(R.events.EDITOR_CHANGE,(r,i,s,a)=>{if(r===R.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&a===R.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(i.index,i.length);if(o.length===1){const c=this.quill.getBounds(i);c!=null&&this.position(c)}else{const c=o[o.length-1],u=this.quill.getIndex(c),f=Math.min(c.length()-1,i.index+i.length-u),g=this.quill.getBounds(new ln(u,f));g!=null&&this.position(g)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(R.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const n=this.quill.getBounds(t);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(t){const n=super.position(t),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}q(Ph,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class $h extends Vr{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Q0),super(t,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Ph(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Dr),this.buildPickers(t.container.querySelectorAll("select"),Dr))}}$h.DEFAULTS=De({},Vr.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1,E.sources.USER)}}}}});const ty=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Fh extends jh{constructor(){super(...arguments);q(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,R.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(R.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===R.sources.USER){const[s,a]=this.quill.scroll.descendant(qe,n.index);if(s!=null){this.linkRange=new ln(n.index-a,s.length());const o=qe.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}q(Fh,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Uh extends Vr{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=ty),super(t,n),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Dr),this.buildPickers(t.container.querySelectorAll("select"),Dr),this.tooltip=new Fh(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{t.handlers.link.call(t,!r.format.link)}))}}Uh.DEFAULTS=De({},Vr.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){const t=this.quill.getSelection();if(t==null||t.length===0)return;let n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,E.sources.USER)}}}}});E.register({"attributors/attribute/direction":_h,"attributors/class/align":vh,"attributors/class/background":vv,"attributors/class/color":bv,"attributors/class/direction":Th,"attributors/class/font":Ah,"attributors/class/size":Oh,"attributors/style/align":yh,"attributors/style/background":jo,"attributors/style/color":Bo,"attributors/style/direction":xh,"attributors/style/font":Nh,"attributors/style/size":Sh},!0);E.register({"formats/align":vh,"formats/direction":Th,"formats/indent":l0,"formats/background":jo,"formats/color":Bo,"formats/font":Ah,"formats/size":Oh,"formats/blockquote":Ya,"formats/code-block":St,"formats/header":Ja,"formats/list":Hr,"formats/bold":kr,"formats/code":Po,"formats/italic":Qa,"formats/link":qe,"formats/script":to,"formats/strike":eo,"formats/underline":no,"formats/formula":Mi,"formats/image":ro,"formats/video":qi,"modules/syntax":kh,"modules/table":u0,"modules/toolbar":Vo,"themes/bubble":$h,"themes/snow":Uh,"ui/icons":Dr,"ui/picker":ns,"ui/icon-picker":Rh,"ui/color-picker":Dh,"ui/tooltip":Bh},!0);window.Alpine=Ru;window.Tagify=Si;window.quillInstances={};Ru.start();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".rich-email-editor");e.length&&e.forEach((t,n)=>{window.quillInstances[`editor_${n}`]=new E(t,{theme:"snow",placeholder:t.dataset.placeholder||"Type your email here...",modules:{toolbar:[[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:[1,2,3,4,5,6,!1]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"},{align:[]}],["link","image","video","formula"],["clean"]]}})})})});export default ey();
